(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{51371:function(){},96127:function(){},67958:function(e,t,i){"use strict";i.d(t,{Providers:function(){return er},Am:function(){return $},mZ:function(){return ei}});var n,r,o=i(57437),s=i(67671),a=i(40323),l=i(54226),u=i(55499),c=i(64874),d=i(92115),p=i(69548),h=i(30305),f=i(47495),v=i.n(f),m=i(20920);let y="play-state",g=function(e){let t,i,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(){let o=this,s=arguments;t?(clearTimeout(i),i=setTimeout(()=>{Date.now()-n>=r&&(e.apply(o,s),n=Date.now())},Math.max(r-(Date.now()-n),0))):(e.apply(o,s),n=Date.now(),t=!0)}};(n=r||(r={})).PLAY="play",n.PAUSE="pause",n.WAITING="waiting",n.STALLED="stalled",n.SEEKED="seeked",n.SEEKING="seeking",n.PLAYING="playing",n.ENDED="ended",n.SUSPEND="suspend",n.ERROR="error";class b{getAudioPlayerEvent(e,t){var i,n,r,o,s,a;return this.actionIndex=this.actionIndex+1,{songSessionId:this.songSessionId,isMobile:window.innerWidth<900,hasClip:(null===(i=this.clip)||void 0===i?void 0:i.id)!=null,songId:(null===(n=this.clip)||void 0===n?void 0:n.id)||void 0,startTime:this.startTime,endTime:this.endTime,isPlaying:this.isPlaying,playDuration:this.endTime-this.startTime,isAudioElementNull:!this.audioElement,audioElementCurrentTime:null===(r=this.audioElement)||void 0===r?void 0:r.currentTime,actionName:e,isUserSongOwner:(null===(o=this.session)||void 0===o?void 0:o.userId)!==void 0&&(null===(s=this.session)||void 0===s?void 0:s.userId)===t,volume:100*this.displayVolume,clickSourceUrl:location.pathname,isAutoplayOn:this.autoplay,isRepeatOn:this.repeat,userId:null===(a=this.session)||void 0===a?void 0:a.userId,previousSongSessionId:this.previousSongSessionId,actionIndex:this.actionIndex}}setSilentAudioElement(e){this.silentAudioElement=e}handleSetupListeners(e,t){let i=(e,i)=>{if("active-audio-play"==i.target.id)switch(e){case"error":break;case"pause":if(this.isPlaying){var n,r;this.endTime=(null===(n=this.audioElement)||void 0===n?void 0:n.currentTime)||0,c.g.segmentTrack(d.Vy.audioPlayerEvent,this.getAudioPlayerEvent(this.endTime===this.duration?"SongEnd":"PauseSong",(null===(r=this.clip)||void 0===r?void 0:r.user_id)||"")),this.startTime=this.endTime,this.isPlaying=!1}break;case"waiting":case"stalled":case"seeking":t.isPlayTimeTracked=!1,"production"!==u.OB&&console.log("eventName: ".concat(e),t.isPlayTimeTracked);break;case"playing":case"play":t.isPlayTimeTracked=!0,"production"!==u.OB&&console.log("eventName: ".concat(e),t.isPlayTimeTracked)}},n=e=>{i(e.type,e)},r=e=>{var i;let r=null===(i=t.clip)||void 0===i?void 0:i.id,o=e.type;c.g.track(d.Vy.playbarErrorLogged,{eventType:o,songId:r}),n(e)};e.addEventListener("seeked",n),e.addEventListener("seeking",n),e.addEventListener("playing",e=>{var i,r,o,s,a,l,u;let p=null===(i=t.clip)||void 0===i?void 0:i.id;0===t.currentTime&&(c.g.track(d.Vy.playbarSongStartedFromBeginning,{clipId:p,isMobile:t.isMobile,isUserSongOwner:(null===(r=t.session)||void 0===r?void 0:r.userId)!==void 0&&(null===(o=t.session)||void 0===o?void 0:o.userId)===(null===(s=t.clip)||void 0===s?void 0:s.user_id)}),c.g.track(d.Vy.audioPlayerPlayClicked,{clipId:p,isMobile:t.isMobile,isUserSongOwner:(null===(a=t.session)||void 0===a?void 0:a.userId)!==void 0&&(null===(l=t.session)||void 0===l?void 0:l.userId)===(null===(u=t.clip)||void 0===u?void 0:u.user_id),startTime:0})),n(e)}),e.addEventListener("play",n),e.addEventListener("pause",n),e.addEventListener("ended",e=>{var i;let r=null===(i=t.clip)||void 0===i?void 0:i.id;c.g.track(d.Vy.playbarSongEndReached,{songId:r}),n(e)}),e.addEventListener("suspend",n),e.addEventListener("waiting",n),e.addEventListener("stalled",r),e.addEventListener("error",r)}setAudioElement(e){this.audioElement=e,this.hasSetListeners||(this.hasSetListeners=!0,this.handleSetupListeners(this.audioElement,this)),this.audioElement.duration&&(this.duration=this.audioElement.duration),this.audioElement.addEventListener("durationchange",()=>{var e,t;(null===(e=this.audioElement)||void 0===e?void 0:e.duration)===1/0?(this.duration=60,this.loadingDuration=!0):(this.duration=(null===(t=this.audioElement)||void 0===t?void 0:t.duration)||0,this.loadingDuration=!1),this.loadingStream=!1}),this.isPlaying=!this.audioElement.paused,this.audioElement.addEventListener("timeupdate",g(this.setCurrentTime,500)),this.audioElement.addEventListener("ended",this.handleEnded),this.audioElement.addEventListener("play",()=>{if(this.isPlaying=!0,"mediaSession"in navigator&&this.clip){var e;let t=this.clip;navigator.mediaSession.metadata=new MediaMetadata({title:(0,p.M8)(t),artist:"Suno - ".concat((null===(e=t.metadata)||void 0===e?void 0:e.tags)||"no style"),artwork:t.image_url?[{src:t.image_url,sizes:"256x256",type:"image/png"}]:[]}),navigator.mediaSession.setActionHandler("play",()=>{var e,t,i,n;null===(e=this.audioElement)||void 0===e||e.play(),this.endTime=(null===(t=this.audioElement)||void 0===t?void 0:t.currentTime)||0,this.startTime=(null===(i=this.audioElement)||void 0===i?void 0:i.currentTime)||0,c.g.segmentTrack(d.Vy.audioPlayerEvent,this.getAudioPlayerEvent("PlaySongInMediaSession",(null===(n=this.clip)||void 0===n?void 0:n.user_id)||""))}),navigator.mediaSession.setActionHandler("pause",()=>{var e;return null===(e=this.audioElement)||void 0===e?void 0:e.pause()}),navigator.mediaSession.setActionHandler("nexttrack",()=>{this.stepForward()}),navigator.mediaSession.setActionHandler("previoustrack",()=>{this.stepBackward()}),navigator.mediaSession.setActionHandler("seekto",e=>{if(e.seekTime&&this.audioElement){var t,i,n,r,o;this.isPlaying&&(this.endTime=(null===(r=this.audioElement)||void 0===r?void 0:r.currentTime)||0,c.g.segmentTrack(d.Vy.audioPlayerEvent,this.getAudioPlayerEvent("SeekProgressBarPauseSongInMediaSession",(null===(o=this.clip)||void 0===o?void 0:o.user_id)||"")),this.startTime=this.endTime),this.audioElement.currentTime=e.seekTime,this.currentTime=e.seekTime,this.startTime=null===(t=this.audioElement)||void 0===t?void 0:t.currentTime,this.endTime=null===(i=this.audioElement)||void 0===i?void 0:i.currentTime,c.g.segmentTrack(d.Vy.audioPlayerEvent,this.getAudioPlayerEvent("SeekProgressBarPlaySongInMediaSession",(null===(n=this.clip)||void 0===n?void 0:n.user_id)||""))}})}}),this.audioElement.addEventListener("pause",()=>{this.isPlaying=!1,this.isPlayTimeTracked=!1})}playClip(e,t,i){var n,r,o;this.audioElement&&e&&e.audio_url&&(e.audio_url.includes("audiopipe")&&(this.loadingDuration=!0),"streaming"===e.status&&(this.loadingStream=!0),this.isPlaying&&(this.endTime=this.audioElement.currentTime,c.g.segmentTrack(d.Vy.audioPlayerEvent,this.getAudioPlayerEvent(i||"PlayNewSongPauseSong",(null==e?void 0:e.user_id)||"")),this.startTime=this.endTime),this.clip=e,this.previousSongSessionId=this.songSessionId,this.songSessionId=(0,m.Z)(),this.startTime=0,this.endTime=0,this.actionIndex=-1,null===(n=this.silentAudioElement)||void 0===n||n.play(),this.audioElement.src=e.audio_url,this.audioElement.volume=this.volume,this.audioElement.muted=this.muted,this.audioElement.currentTime=0,null===(r=this.silentAudioElement)||void 0===r||r.pause(),null===(o=this.audioElement.play())||void 0===o||o.catch(e=>{throw e.name,e}),this.isPlaying=!this.audioElement.paused,this.incrementPlayCountWithSpec(),this.edit.setEditingClip(e),c.g.segmentTrack(d.Vy.audioPlayerEvent,this.getAudioPlayerEvent(t||"PlayNewSong",(null==e?void 0:e.user_id)||"")))}setDuration(e){this.duration=e}get progress(){return this.duration?this.currentTime/this.duration:0}get displayVolume(){return this.muted?0:(0,l.B)(this.volume)}async decodeAudio(e){let t=await fetch(e.audio_url||""),i=await t.arrayBuffer(),n=window.AudioContext||window.webkitAudioContext;if(!this.audioContext&&n&&(this.audioContext=new n({sampleRate:8e3})),this.audioContext){let t=await this.audioContext.decodeAudioData(i);this.audioData[e.id]=t}return this.audioData[e.id]}toggleRadio(){this.isRadioPlaying=!this.isRadioPlaying}enableRadio(){this.isRadioPlaying=!0}constructor(e,t,i,n,r){this.isPlaying=!1,this.currentTime=0,this.duration=0,this.startTime=0,this.endTime=0,this.clip=null,this.songSessionId="",this.previousSongSessionId="",this.actionIndex=-1,this.stepCallback=null,this.noClipPlayCallback=null,this.isMobile=!1,this.audioContext=null,this.audioData={},this.audioElement=null,this.silentAudioElement=null,this.repeat=!1,this.autoplay=!0,this.loadingStream=!1,this.loadingDuration=!1,this.volume=1,this.muted=!1,this.hasSetListeners=!1,this.isPlayTimeTracked=!1,this.isRadioPlaying=!1,this.incrementPlayCount=()=>{var e;this.apiClient.POST("/api/gen/{gen_id}/increment_play_count/",{params:{path:{gen_id:(null===(e=this.clip)||void 0===e?void 0:e.id)||""}}})},this.incrementPlayCountWithSpec=()=>{var e,t,i;let n=null!==(i=null===(e=this.clip)||void 0===e?void 0:e.play_count)&&void 0!==i?i:0;this.apiClient.POST("/api/gen/{gen_id}/increment_play_count/v2",{params:{path:{gen_id:(null===(t=this.clip)||void 0===t?void 0:t.id)||""}},body:{sample_factor:1+Math.floor(n/100)}})},this.handleEnded=()=>{if(this.isPlaying=!1,this.repeat){var e,t;this.audioElement&&(this.edit.isSelectionRangeActive()?this.audioElement.currentTime=(null===(t=this.edit.selectionRange)||void 0===t?void 0:t.start)||0:this.audioElement.currentTime=0,this.startTime=0,this.endTime=0,c.g.segmentTrack(d.Vy.audioPlayerEvent,this.getAudioPlayerEvent("AutoRepeatPlaySong",(null===(e=this.clip)||void 0===e?void 0:e.user_id)||"")),this.isPlaying=!0,this.audioElement.play(),this.incrementPlayCountWithSpec())}else this.autoplay&&!this.edit.isSelectionRangeActive()&&this.stepForward("AutoRepeatPlayNewSong","AutoRepeatPauseSong")},this.toggleAutoplay=()=>{this.autoplay=!this.autoplay},this.toggleRepeat=()=>{this.repeat=!this.repeat},this.togglePlay=()=>{var e,t,i,n,r,o;if(this.audioElement){if(!(null===(e=this.clip)||void 0===e?void 0:e.id)){if(this.queue.clips.length){this.queue.currentIndex=0;let e=this.queue.getCurrentClip();e&&this.playClip(e)}return}this.audioElement.paused?(this.edit.isSelectionRangeActive()&&this.edit.isOutsideOfSelectionRange(this.audioElement.currentTime)&&(this.audioElement.currentTime=(null===(i=this.edit.selectionRange)||void 0===i?void 0:i.start)||0),null===(t=this.audioElement.play())||void 0===t||t.catch(e=>{throw e.name,e})):this.audioElement.pause(),this.isPlaying=!this.audioElement.paused,this.isPlaying?(this.endTime=this.audioElement.currentTime,this.startTime=this.audioElement.currentTime,c.g.segmentTrack(d.Vy.audioPlayerEvent,this.getAudioPlayerEvent("PlaySong",(null===(n=this.clip)||void 0===n?void 0:n.user_id)||""))):(this.endTime=null===(r=this.audioElement)||void 0===r?void 0:r.currentTime,c.g.segmentTrack(d.Vy.audioPlayerEvent,this.getAudioPlayerEvent("PauseSong",(null===(o=this.clip)||void 0===o?void 0:o.user_id)||"")),this.startTime=this.endTime)}},this.userSetCurrentProgress=e=>{var t,i,n,r,o,s,a;if(!this.audioElement||(null===(t=this.audioElement)||void 0===t?void 0:t.duration)===1/0)return;let l=e/100*(null===(i=this.audioElement)||void 0===i?void 0:i.duration);Number.isNaN(l)||(this.isPlaying&&(this.endTime=(null===(s=this.audioElement)||void 0===s?void 0:s.currentTime)||0,c.g.segmentTrack(d.Vy.audioPlayerEvent,this.getAudioPlayerEvent("SeekProgressBarPauseSong",(null===(a=this.clip)||void 0===a?void 0:a.user_id)||"")),this.startTime=this.endTime),this.audioElement.currentTime=l,this.currentTime=this.audioElement.currentTime,this.startTime=null===(n=this.audioElement)||void 0===n?void 0:n.currentTime,this.endTime=null===(r=this.audioElement)||void 0===r?void 0:r.currentTime,c.g.segmentTrack(d.Vy.audioPlayerEvent,this.getAudioPlayerEvent("SeekProgressBarPlaySong",(null===(o=this.clip)||void 0===o?void 0:o.user_id)||"")))},this.setCurrentTime=()=>{var e;this.currentTime=(null===(e=this.audioElement)||void 0===e?void 0:e.currentTime)||0},this.setStepCallback=e=>{this.stepCallback=e},this.setNoClipPlayCallback=e=>{this.noClipPlayCallback=e},this.stepBackward=()=>{if(this.currentTime>3){var e,t,i;this.isPlaying&&(this.endTime=(null===(t=this.audioElement)||void 0===t?void 0:t.currentTime)||0,c.g.segmentTrack(d.Vy.audioPlayerEvent,this.getAudioPlayerEvent("BackwardPauseSong",(null===(i=this.clip)||void 0===i?void 0:i.user_id)||"")),this.startTime=this.endTime),this.audioElement&&(this.audioElement.currentTime=0),this.startTime=0,this.endTime=0,c.g.segmentTrack(d.Vy.audioPlayerEvent,this.getAudioPlayerEvent("BackwardRepeatSong",(null===(e=this.clip)||void 0===e?void 0:e.user_id)||""))}else{this.queue.setToPreviousClip();let e=this.queue.getCurrentClip();this.queue.setCurrentPlayingSongIsRemoved(!1),e&&this.playClip(e,"BackwardPlayNewSong","BackwardPauseSong")}},this.stepForward=(e,t)=>{let i=this.queue.setToNextClip(),n=this.queue.getCurrentClip();this.queue.setCurrentPlayingSongIsRemoved(!1),n&&i&&this.playClip(n,e||"ForwardPlayNewSong",t||"ForwardPausePreSong")},this.setVolume=e=>{this.volume=Math.max(0,Math.min(1,e)),this.muted=0===this.volume,this.audioElement&&(this.audioElement.volume=e,this.audioElement.muted=this.muted)},this.toggleMute=()=>{this.muted=!this.muted,this.muted||0!==this.volume||(this.volume=.6),this.audioElement&&(this.audioElement.volume=this.volume,this.audioElement.muted=this.muted)},this.storageObject=()=>({autoplay:this.autoplay,repeat:this.repeat,volume:this.volume,muted:this.muted}),this.initLocalStorageUpdate=()=>{(0,h.U5)(this.storageObject,()=>{if(v()("localStorage")){let e=JSON.stringify(this.storageObject());localStorage.setItem(y,e)}})},this.loadFromLocalStorage=()=>{if(v()("localStorage")){let e=localStorage.getItem(y);try{let t=JSON.parse(e||"");t&&(this.autoplay=(0,p.Be)(t.autoplay,!0),this.repeat=(0,p.Be)(t.repeat,!1),this.volume=(0,p.Be)(t.volume,1),this.muted=(0,p.Be)(t.muted,!1))}catch(e){}}},this.apiClient=e,this.queue=t,this.session=i,this.edit=n,(0,h.ky)(this),this.loadFromLocalStorage(),this.initLocalStorageUpdate(),this.isMobile=r;let o=window.AudioContext||window.webkitAudioContext;o&&(this.audioContext=new o({sampleRate:8e3}))}}var w=i(1225),_=i(6467),k=i(31397),S=i(70410);let C=i(25566).env.NEXT_PUBLIC_STATUS_URL||"https://statusz.suno.ai/z",I="session-state";class P{constructor(){this.isMaintenance=!1,this.isScheduledMaintenance=!1,this.message="",this.loadStatus=async()=>{try{let e=await fetch(C),t=await e.json();(null==t?void 0:t.status)==="maintenance"?(this.isMaintenance=!0,this.message=null==t?void 0:t.message):(null==t?void 0:t.status)==="scheduled_maintenance"&&(this.isScheduledMaintenance=!0,this.message=null==t?void 0:t.message)}catch(e){return}},(0,h.ky)(this),this.loadStatus()}}let E=new P;class T{updateCatchaCallback(e){this.callback=e}get isStaff(){var e;return(null===(e=this.roles)||void 0===e?void 0:e.staff)||!1}get isOutOfCredits(){return this.credits<=0}isFeatureAllowed(e){var t;return{enabled:(null===(t=this.flags)||void 0===t?void 0:t[e])||!1,loading:null===this.flags}}constructor(e){var t=this;this.user=null,this.userId=null,this.roles={},this.flags=null,this.models=[],this.previewInitialWidth=232,this.sub={},this.isSubLoaded=!1,this.credits=50,this.isCreditsLoaded=!1,this.callback=null,this.captchaVerification=null,this.shown_creation_tour=!0,this.storageObject=()=>({previewInitialWidth:this.previewInitialWidth}),this.initLocalStorageUpdate=()=>{(0,h.U5)(this.storageObject,()=>{if(v()("localStorage")){let e=JSON.stringify(this.storageObject());localStorage.setItem(I,e)}})},this.loadFromLocalStorage=()=>{if(v()("localStorage")){let e=localStorage.getItem(I);try{let t=JSON.parse(e||"");t&&(this.previewInitialWidth=(0,p.Be)(t.previewInitialWidth,232))}catch(e){}}},this.setPreviewInitialWidth=e=>{e>0&&(this.previewInitialWidth=e)},this.loadSession=async function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,{data:n}=await t.apiClient.GET("/api/session/",{headers:{credentials:"include"}});if(e.isSignedIn&&n&&t.loadSubscriptionInfo(),n){var r;t.user=n.user,t.userId=(null===(r=n.user)||void 0===r?void 0:r.id)||null,t.roles=n.roles,t.flags=n.flags,t.models=n.models}else i>0&&setTimeout(()=>{t.loadSession(e,i-1)},1e3)},this.loadSubscriptionInfo=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,{data:i,error:n}=await t.apiClient.GET("/api/billing/info/");if(i)return t.credits=(null==i?void 0:i.total_credits_left)||0,t.isCreditsLoaded=!0,t.sub=i,t.isSubLoaded=!0,i;n&&e>0&&setTimeout(()=>{t.loadSubscriptionInfo(e-1)},1e3)},this.deductCredits=e=>{this.credits=Math.max(0,this.credits-e)},this.getModelDisplayName=e=>{let t=this.models.find(t=>t.external_key===e);return(null==t?void 0:t.name)||e},this.acceptTOS=async()=>{let{data:e}=await this.apiClient.POST("/api/user/accept_custom_mode_tos/")},this.grantInviteCredits=async e=>{try{let t=(await this.apiClient.POST("/api/invite/",{body:{inviter_handle:e}})).data;if(t.error_msg)return console.error("Failed to send invite:",t.error_msg),null;return t}catch(e){return console.error("Error sending invite:",e),null}},this.botCheck=async()=>{let{enabled:e}=this.isFeatureAllowed("bot-hcaptcha");!0==e&&!0===(await this.apiClient.POST("/api/user_actions/action_check/")).data&&this.captchaVerification()},this.getUserConfig=async()=>{let e=(await this.apiClient.POST("/api/user/user_config/",{body:{}})).data;console.log("data.shown_creation_tour ",e.shown_creation_tour),e&&(this.shown_creation_tour=e.shown_creation_tour)},this.hasShownTutorial=async()=>{await this.apiClient.POST("/api/user/update_user_config/",{body:{}})},this.maintenanceState=E,(0,h.ky)(this),this.loadFromLocalStorage(),this.initLocalStorageUpdate(),this.apiClient=e}}var x=i(74262),A=i(3079),O=i(51064),j=i(2265),M=i(1633),L=i(55329);let R="create-state";class F{setContinueClip(e){var t,i,n;if(this.infillFromSeconds=null,this.infillToSeconds=null,null===e){this.continueClipId=null,this.continueClipDuration=null,this.continueAtSeconds=null,this.continueClipUserId=null,this.continueClipIsPublic=void 0;return}this.continueClipId=e.id,this.continueClipUserId=e.user_id,this.continueClipIsPublic=e.is_public,this.continueClipDuration=(null===(t=e.metadata)||void 0===t?void 0:t.duration)||null,this.continueAtSeconds=(null===(i=e.metadata)||void 0===i?void 0:i.duration)?(0,p.q$)((null===(n=e.metadata)||void 0===n?void 0:n.duration)-.2,.2):null,this.isSimple=!1}constructor(e,t,i){var n=this;this.lyrics="",this.style="",this.recommmendedStyles=(0,L.mR)(),this.recommmendedStylesTimeout=null,this.description="",this.title="",this.mv=p.jd,this.placeholder=(0,M.MT)(),this.instrumental=!1,this.reusePromptClipId=null,this.reusePromptClipUserId=null,this.reusePromptClipIsPublic=void 0,this.continueClipId=null,this.continueClipDuration=null,this.continueAtSeconds=null,this.continueClipUserId=null,this.continueClipIsPublic=void 0,this.artistClipId=null,this.artistStartSeconds=null,this.artistEndSeconds=null,this.coverClipId=null,this.infillFromSeconds=null,this.infillToSeconds=null,this.isSimple=!0,this.isCustomModeFocused=!1,this.isLoading=!1,this.showLyrics=!1,this.isLoadingLyrics=!1,this.isGenerateLyircsUsed=!1,this.isRecommendStyleUsed=!1,this.isMobile=!1,this.selectedClip=null,this.isLocalStorageAvailable=!1,this.shouldOpenMobileCreate=!1,this.imageData={},this.videoS3Id=null,this.generationType="TEXT",this.artist="",this.cover="",this.configurations={},this.setGenerationType=e=>{this.generationType=e},this.setLyrics=e=>{this.lyrics=e},this.setShowLyrics=e=>{this.showLyrics=e},this.setMv=e=>{this.mv=e},this.setTitle=e=>{this.title=e},this.setReusePromptClip=e=>{this.reusePromptClipId=e.id,this.reusePromptClipUserId=e.user_id,this.reusePromptClipIsPublic=e.is_public},this.setContinueAtSeconds=e=>{this.continueAtSeconds=e},this.setInfillFromSeconds=e=>{this.infillFromSeconds=e},this.setInfillToSeconds=e=>{this.infillToSeconds=e},this.setArtistClip=e=>{if(null===e){this.artistClipId=null,this.artistStartSeconds=null,this.artistEndSeconds=null;return}{var t;this.artistClipId=e.id,this.artistStartSeconds=0;let i=(null===(t=e.metadata)||void 0===t?void 0:t.duration)||0;this.artistEndSeconds=Math.min(i,120)}this.isSimple=!1},this.resetArtistClip=()=>{this.artistClipId=null,this.artistStartSeconds=null,this.artistEndSeconds=null},this.isArtistValid=()=>null==this.artistClipId||null!=this.artistStartSeconds&&null!=this.artistEndSeconds&&!(this.artistStartSeconds<0)&&(null==this.artistEndSeconds||!(this.artistStartSeconds>this.artistEndSeconds)),this.setCoverClip=e=>{if(null===e){this.coverClipId=null;return}this.coverClipId=e.id,this.isSimple=!1},this.resetCoverClip=()=>{this.coverClipId=null},this.setIsMobile=e=>{this.isMobile=e},this.resetContinueAtSeconds=()=>{this.continueAtSeconds=this.continueClipDuration},this.isContinueValid=()=>null==this.continueClipId||null!=this.continueAtSeconds&&!(this.continueAtSeconds<=0)&&(null==this.continueClipDuration||!(this.continueAtSeconds>this.continueClipDuration)),this.setSelectedClip=e=>{this.selectedClip=e},this.setStyle=e=>{this.style=e,this.isRecommendStyleUsed=!0;let t=(0,L.J1)(this.style,this.recommmendedStyles);t.length>0&&(null!=this.recommmendedStylesTimeout&&clearTimeout(this.recommmendedStylesTimeout),this.recommmendedStylesTimeout=setTimeout(()=>{this.setRecommendedStyles(t)},500))},this.setRecommendedStyles=e=>{this.recommmendedStyles=e},this.setDescription=e=>{this.description=e},this.setIsSimple=e=>{this.isSimple=e,e&&this.setContinueClip(null)},this.setIsLoading=e=>{this.isLoading=e},this.setInstrumental=e=>{this.instrumental=e},this.setImageData=(e,t)=>{this.imageData[t]=e},this.setVideoS3Id=e=>{this.videoS3Id=e},this.rerollPlaceholder=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M.MT;n.placeholder=e()},this.reuseClip=e=>{this.setReusePromptClip(e),this.setLyrics(e.metadata.prompt||""),this.setStyle(e.metadata.tags||""),this.setDescription(e.metadata.gpt_description_prompt||""),this.setTitle(e.title||""),this.isSimple=!1},this.generateLyrics=async()=>{this.isLoadingLyrics=!0,this.isGenerateLyircsUsed=!0;let{data:e,error:t}=await this.apiClient.POST("/api/generate/lyrics/",{body:{prompt:this.lyrics||""}});if(t||!e.id){$({title:"Please wait a few seconds.",description:"Please wait a few seconds before generating more lyrics.",status:"error",duration:4e3,isClosable:!0}),this.isLoadingLyrics=!1;return}let i=e.id;for(let e=0;e<10;e++){await new Promise(e=>setTimeout(e,4e3));let{data:e,error:t}=await this.apiClient.GET("/api/generate/lyrics/{request_id}",{params:{path:{request_id:i}}});if(t){$({title:"An error occurred generating lyrics.",description:"Please try a different lyrics prompt.",status:"error",duration:5e3,isClosable:!0});break}if((null==e?void 0:e.status)!=="running"){if((null==e?void 0:e.status)==="error"){$({title:"An error occurred generating lyrics.",description:"Please try a different lyrics prompt.",status:"error",duration:4e3,isClosable:!0});break}this.setLyrics(e.text),this.setTitle(e.title);break}}this.isLoadingLyrics=!1},this.generateStyle=()=>{this.setStyle((0,M.$L)())},this.storageObject=()=>({mv:this.mv,isSimple:this.isSimple}),this.initLocalStorageUpdate=()=>{(0,h.U5)(this.storageObject,()=>{if(this.isLocalStorageAvailable){let e=JSON.stringify(this.storageObject());localStorage.setItem(R,e)}})},this.loadFromLocalStorage=()=>{if(this.isLocalStorageAvailable){let e=localStorage.getItem(R);try{let t=JSON.parse(e||"");t&&(this.mv=t.mv||p.jd,this.isSimple=void 0===t.isSimple||t.isSimple)}catch(e){}}},this.reset=()=>{this.lyrics="",this.style="",this.description="",this.title="",this.mv=p.jd,this.instrumental=!1,this.continueClipId=null,this.continueClipDuration=null,this.continueAtSeconds=null,this.videoS3Id=null,this.imageData={},this.generationType="TEXT"},this.isSetToDefaults=()=>""===this.lyrics&&""===this.style&&""===this.description&&""===this.title&&this.mv===p.jd&&!1===this.instrumental&&null===this.continueClipId&&null===this.continueClipDuration&&null===this.continueAtSeconds&&null===this.videoS3Id&&0===Object.keys(this.imageData).length&&"TEXT"===this.generationType,(0,h.ky)(this),this.apiClient=e,this.playbarState=t,this.session=i,this.isLocalStorageAvailable=v()("localStorage"),this.loadFromLocalStorage(),this.initLocalStorageUpdate(),(0,L.dn)(e,this)}}class D{setActiveClip(e){this.activeClip=e}setActivePlaylist(e){this.activePlaylist=e}get currentClips(){return this.isLoaded?this.clipIds.map(e=>this.clips.clipById[e]):null}get currentActiveClip(){return this.activeClip}constructor(e,t,i){var n=this;this.activeClip=void 0,this.activePlaylist=void 0,this.clipIds=[],this.numTotalClips=0,this.playlistIds=[],this.numTotalPlaylists=0,this.followedProfiles=[],this.followers=[],this.loadingPlaylists=!1,this.isLoaded={clips:!1,playlists:!1},this.filters={clips:{liked:!1,public:!1,page:0,query:""},playlists:{page:0,trashed:!1,query:""}},this.trashedClipIndices=new Map,this.setInitialClips=e=>{this.clipIds=e.map(e=>e.id),this.clips.updateClips(e),this.isLoaded={...this.isLoaded,clips:!0},this.updateFilters({})},this.updateFilters=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"clips";void 0===e.page&&(n.filters[t].page=0),n.filters[t]={...n.filters[t],...e},"clips"===t&&n.loadClips(),"playlists"===t&&n.loadPlaylists()},this.incrementPage=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"clips";n.updateFilters({page:Math.max(0,n.filters[t].page+e)},t)},this.setPageNumber=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"clips";n.updateFilters({page:e},t)},this.loadClips=async()=>{if(this.filters.clips.query){let e=await this.search.librarySearch(this.filters.clips.query,this.filters.clips.page),t=null==e?void 0:e.result;void 0!==t&&(this.clips.updateClips(t),this.clipIds=t.map(e=>e.id));return}let e=JSON.stringify(this.filters),{data:t}=await this.apiClient.GET("/api/feed/v2",{params:{query:{...this.filters.clips.liked?{is_liked:!0}:{},...this.filters.clips.public?{is_public:!0}:{},page:this.filters.clips.page,query:""!==this.filters.clips.query?this.filters.clips.query:void 0}}});if(!t)return;let i=t.clips;this.clips.updateClips(t.clips),this.numTotalClips=t.num_total_results,this.isLoaded={...this.isLoaded,clips:!0},e===JSON.stringify(this.filters)&&(this.clipIds=i.map(e=>e.id),this.clips.clipIds=i.reverse().map(e=>e.id))},this.removeFromLibrary=e=>{let t=this.clipIds.indexOf(e);-1!==t&&(this.trashedClipIndices.set(e,t),this.clipIds.splice(t,1))},this.loadPlaylists=async e=>{this.loadingPlaylists=!0;let t=Math.max(e||1,1),{data:i}=await this.apiClient.GET("/api/playlist/me",{params:{query:{page:t,show_trashed:this.filters.playlists.trashed,query:""!==this.filters.playlists.query?this.filters.playlists.query:void 0}}});if(this.loadingPlaylists=!1,!i)return;let n=i.playlists.map(e=>({...e,clipIds:e.playlist_clips.map(e=>{var t;return null==e?void 0:null===(t=e.clip)||void 0===t?void 0:t.id}).filter(e=>void 0!==e)}));this.clips?(this.clips.updatePlaylists(n,t),this.isLoaded={...this.isLoaded,playlists:!0},this.playlistIds=i.playlists.map(e=>e.id),this.numTotalPlaylists=i.num_total_results):console.error("Clips instance is undefined")},this.loadFollowedProfiles=async e=>{var t,i,n;let r=await this.apiClient.GET("/api/profiles/following",{params:{query:{page:e||1}}});return this.followedProfiles=[...this.followedProfiles.slice(0,((e||1)-1)*20),...(null===(t=r.data)||void 0===t?void 0:t.profiles)||[]],{numLoadedProfiles:((null===(i=r.data)||void 0===i?void 0:i.profiles)||[]).length,numTotalProfiles:null===(n=r.data)||void 0===n?void 0:n.num_total_profiles}},this.loadFollowers=async e=>{var t,i,n;let r=await this.apiClient.GET("/api/profiles/followers",{params:{query:{page:e||1}}});return this.followers=[...this.followers.slice(0,((e||1)-1)*20),...(null===(t=r.data)||void 0===t?void 0:t.profiles)||[]],{numLoadedProfiles:((null===(i=r.data)||void 0===i?void 0:i.profiles)||[]).length,numTotalProfiles:null===(n=r.data)||void 0===n?void 0:n.num_total_profiles}},this.addClipsToPlaylist=async(e,t)=>{let{response:i}=await this.apiClient.POST("/api/playlist/update_clips/",{body:{playlist_id:t.id,update_type:"add",metadata:{clip_ids:e.map(e=>e.id)}}}),n=1===e.length?'"'.concat((0,p.M8)(e[0]),'"'):"".concat(e.length," clips");return $({title:"".concat(n,' added to "').concat(""===t.name?"Untitled Playlist":t.name,'"'),duration:4e3,isClosable:!0,status:"success"}),i},this.setPlaylistVisibility=async(e,t)=>{await this.apiClient.POST("/api/playlist_reaction/{playlist_id}/set_visibility/",{params:{path:{playlist_id:e}},body:{is_public:t}})},this.addToLibrary=e=>{if(!this.clipIds.includes(e)){let t=this.trashedClipIndices.get(e);"number"==typeof t?(this.clipIds.splice(t,0,e),this.trashedClipIndices.delete(e)):this.clipIds.push(e)}},this.apiClient=e,this.clips=t,this.search=i,(0,h.ky)(this)}}var B=i(68554);class q{get currentClips(){return this.isLoaded?this.clipIds.map(e=>this.clips.clipById[e]):null}constructor(e,t){this.clipIds=[],this.numTotalClips=0,this.isLoaded=!1,this.filters={liked:!1,public:!1,page:0},this.trashedClipIndices=new Map,this.setInitialClips=e=>{this.clipIds=e.map(e=>e.id),this.clips.updateClips(e),this.isLoaded=!0,this.updateFilters({})},this.updateFilters=e=>{void 0===e.page&&(this.filters.page=0),this.filters={...this.filters,...e},this.loadClips()},this.incrementPage=e=>{this.updateFilters({page:Math.max(0,this.filters.page+e)})},this.setPageNumber=e=>{this.updateFilters({page:e})},this.loadClips=async e=>{let t=JSON.stringify(this.filters),{data:i}=await this.apiClient.GET("/api/clips/trashed_v2",{params:{query:{...this.filters.liked?{is_liked:!0}:{},...this.filters.public?{is_public:!0}:{},page:this.filters.page,page_size:e}}});i&&(this.clips.updateClips(i.clips),this.isLoaded=!0,this.numTotalClips=i.num_total_results,t===JSON.stringify(this.filters)&&(this.clipIds=i.clips.map(e=>e.id)))},this.removeFromTrash=e=>{let t=this.clipIds.indexOf(e);-1!==t&&(this.trashedClipIndices.set(e,t),this.clipIds.splice(t,1))},this.addToTrash=e=>{if(!this.clipIds.includes(e)){let t=this.trashedClipIndices.get(e);"number"==typeof t?(this.clipIds.splice(t,0,e),this.trashedClipIndices.delete(e)):this.clipIds.push(e)}},this.getStepCallback=()=>(e,t)=>{var i;let n=this.clipIds.indexOf((null===(i=e.clip)||void 0===i?void 0:i.id)||"");if(-1===n)return;let r=this.clipIds[n+t];r&&e.playClip(this.clips.clipById[r])},this.getPlaylistStepCallback=e=>(t,i)=>{var n;let r=e.clipIds.indexOf((null===(n=t.clip)||void 0===n?void 0:n.id)||"");if(-1===r)return;let o=e.clipIds[r+i];o&&t.playClip(this.clips.clipById[o])},this.apiClient=e,this.clips=t,(0,h.ky)(this)}}let N="tag_song";class U{get currentClips(){return this.clips}constructor(e){this.rankBy="default",this.tagSearch=async(e,t)=>{var i,n,r;let o={query:e=e.trim().substring(0,256),from_index:t?this.fromIndex+this.size:0},{data:s}=await this.apiClient.POST("/api/search/",{body:{search_queries:[{name:N,search_type:N,term:o.query,from_index:o.from_index,rank_by:this.rankBy}]}});if(c.g.track(d.Vy.songSearch,o),s){if(e!=this.tagTerm)return;return t?this.clips=this.clips.concat(s.result[N].result):this.clips=s.result[N].result,this.size=null!==(i=s.result[N].page_size)&&void 0!==i?i:0,this.fromIndex=null!==(n=s.result[N].from_index)&&void 0!==n?n:0,this.totalHits=null!==(r=s.result[N].total_hits)&&void 0!==r?r:0,s}},this.apiClient=e,this.totalHits=0,this.clips=[],this.fromIndex=0,this.size=0,this.tagTerm="",this.rankBy="default",(0,h.ky)(this)}}class G{constructor(e,t){this.feedClips=[],this.fetch=async()=>{let{data:e}=await this.apiClient.POST("/api/discover/",{body:{}});if(e&&e.sections)return e.sections.forEach(e=>{if("playlist"===e.section_type&&this.clips.updateClips(e.items),"playlist_list"===e.section_type){let t=e.items.map(e=>({...e,clipIds:[]}));this.clips.updatePlaylists(t,1)}}),e},this.apiClient=e,this.clips=t,(0,h.ky)(this)}}var z=i(95430),J=i(75396);let V=new(i(91509)).Z(i.tu(new URL(i.p+i.u(919),i.b)));var W=i(29945);class K{constructor(e,t){var i=this;this.feedClips=[],this.feedSearch=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;if(e<i.feedClips.length)return i.feedClips;let{data:n}=await i.apiClient.POST("/api/social/following-clip-feed/",{body:{feed_type:"default",start_index:e,page_size:t}});if(n)return e<i.feedClips.length?i.feedClips:(i.feedClips=i.feedClips.concat(n.items),i.clips.updateClips(i.feedClips),n.items)},this.apiClient=e,this.clips=t,(0,h.ky)(this)}}class H{async cropClip(){var e,t,i,n;this.isLoading=!0;let{data:r}=await this.apiClient.POST("/api/edit/crop/{clip_id}/",{params:{path:{clip_id:this.editingClipId||""}},body:{crop_start_s:(null===(e=this.selectionRange)||void 0===e?void 0:e.start)||0,crop_end_s:(null===(t=this.selectionRange)||void 0===t?void 0:t.end)||(null===(n=this.clips.clipById[this.editingClipId||""])||void 0===n?void 0:null===(i=n.metadata)||void 0===i?void 0:i.duration)||0}});(null==r?void 0:r.action_clip_id)&&this.pollForActionStatus(null==r?void 0:r.action_clip_id,async()=>{this.isLoading=!1;let e=await this.clips.loadClipById(null==r?void 0:r.action_clip_id);e&&(this.clips.updateClips([e]),this.clips.clipIds=[...this.clips.clipIds,null==r?void 0:r.action_clip_id])})}async pollForActionStatus(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,{data:n}=await this.apiClient.GET("/api/edit/action/{action_clip_id}/",{params:{path:{action_clip_id:e}}});console.log(n),(null==n?void 0:n.status)==="complete"?t&&t():(null==n?void 0:n.status)==="error"||i<=0?($({title:"An error occurred. Please try again.",status:"error",duration:4e3,isClosable:!0}),this.isLoading=!1):setTimeout(()=>this.pollForActionStatus(e,t,--i),4e3)}setSelectionRange(e,t){this.selectionRange={start:e,end:t}}setIsScrubbing(e){this.isScrubbing=e}clearSelectionRange(){this.selectionRange=null}setEditingClip(e){this.editingClipId=(null==e?void 0:e.id)||null}setIsEditorOpen(e){this.isEditorOpen=e}isSelectionRangeActive(){var e,t;return(null===(e=this.selectionRange)||void 0===e?void 0:e.start)!==void 0&&(null===(t=this.selectionRange)||void 0===t?void 0:t.end)!==void 0}isOutsideOfSelectionRange(e){var t,i;return!!this.isSelectionRangeActive&&(e<((null===(t=this.selectionRange)||void 0===t?void 0:t.start)||0)||e>((null===(i=this.selectionRange)||void 0===i?void 0:i.end)||0))}constructor(e,t,i){this.isEditorOpen=!1,this.isLoading=!1,this.isScrubbing=!1,this.editingClipId=null,this.pendingActionClipId=null,this.pendingActionType=null,this.pendingActionParams=null,this.selectionRange=null,this.apiClient=e,this.session=t,this.clips=i,(0,h.ky)(this)}}if(!1===c.g.initialized)try{localStorage.removeItem("chakra-ui-color-mode")}catch(e){}if("function"==typeof Node&&Node.prototype){let e=Node.prototype.removeChild;Node.prototype.removeChild=function(t){return t.parentNode!==this?(console&&console.error("Cannot remove a child from a different parent",t,this),t):e.apply(this,arguments)};let t=Node.prototype.insertBefore;Node.prototype.insertBefore=function(e,i){return i&&i.parentNode!==this?(console&&console.error("Cannot insert before a reference node from a different parent",i,this),e):t.apply(this,arguments)}}let Z="Satoshi, system-ui, -apple-system, BlinkMacSystemFont, Segoe UI",Y=(0,x.B1)({config:{initialColorMode:"dark",useSystemColorMode:!1},fonts:{heading:Z,body:Z},components:{MenuList:{defaultProps:{background:"black"}}}}),{ToastContainer:Q,toast:$}=(0,A.I)({theme:Y,colorMode:"dark"}),X=(0,j.createContext)({}),ee=null,et=(e,t)=>{if(ee)return ee;let i=new T(e),n=new a.z3(e,i),r=new W.b,o=new H(e,i,n),s=new B.p(e),l=new b(e,r,i,o,t),u=new K(e,n),c=new D(e,n,s),d=new G(e,n);return ee={playbar:l,clips:n,queue:r,social:u,genForm:new F(e,l,i),library:c,trash:new q(e,n),search:s,tag:new U(e),session:i,edit:o,discover:d}},ei=()=>(0,j.useContext)(X),en=(0,z.Pi)(e=>{let{setStatsigUser:t}=e,{trackStart:i,trackEnd:n}=function(e){let[t,i]=(0,j.useState)(0);e.current=V;let n=()=>{var t;null===(t=e.current)||void 0===t||t.postMessage({turn:"on"})},r=()=>{var t;null===(t=e.current)||void 0===t||t.postMessage({turn:"off"})};(0,j.useEffect)(()=>{e.current&&(e.current.onmessage=e=>{let{data:{time:t}}=e;i(t)},n())},[]);let[o,s]=(0,j.useState)(0),a=e=>{s(e+o)},l=()=>{"production"!==u.OB&&console.log("Total session play time: ".concat(o," seconds"))};return(0,j.useEffect)(()=>{l()},[o]),{trackStart:function(){n()},trackEnd:function(e,i){(function(e,t,i){if(e){let n=e/10;a(n),"production"!==u.OB&&console.log("Song played for ".concat(n," seconds")),n&&(c.g.track(d.Vy.trackingSongTimeElapsed,{secondsElapsed:n,isUserSongOwner:i,songId:t}),c.g.incrementUserProperty(d.Fc.totalPlayTimeInSeconds,n))}})(t,e,i),r()}}}((0,j.useRef)()),r=(0,O.aC)(),{session:o,playbar:s}=ei();return(0,j.useEffect)(()=>{var e,t;let r=null==s?void 0:null===(e=s.clip)||void 0===e?void 0:e.id,a=(null==o?void 0:o.userId)!==void 0&&(null==s?void 0:null===(t=s.clip)||void 0===t?void 0:t.user_id)===(null==o?void 0:o.userId);r&&(s.isPlayTimeTracked?i():n(r,a))},[s.isPlayTimeTracked]),(0,j.useEffect)(()=>{t&&r.isSignedIn&&o.userId&&(t({userID:o.userId}),c.g.identify(o.userId))},[r.isSignedIn,o.userId,t]),null});function er(e){let{children:t}=e;(0,j.useEffect)(()=>{"development"===u.OB&&console.log("Loaded in development mode")},[]);let i=(0,s.m)(),n=(0,O.aC)(),[r]=(0,w.a)("(max-width: 768px)"),a=(0,j.useMemo)(()=>et(i,r),[]),[l,d]=(0,j.useState)({});return(0,j.useEffect)(()=>{!1===c.g.initialized&&c.g.init()},[]),(0,j.useEffect)(()=>{n.isLoaded&&void 0!==n.isSignedIn&&a.session.loadSession(n)},[n.isLoaded,n.isSignedIn]),(0,o.jsx)(J.StatsigProvider,{user:l,sdkKey:M.KX,waitForInitialization:!1,options:{environment:{tier:u.OB}},children:(0,o.jsxs)(X.Provider,{value:a,children:[(0,o.jsx)(_.Z,{initialColorMode:"dark"}),(0,o.jsx)(en,{setStatsigUser:d}),(0,o.jsxs)(k.ChakraProvider,{theme:Y,children:[(0,o.jsx)(Q,{}),(0,o.jsx)(S.t7,{children:t})]})]})})}},67671:function(e,t,i){"use strict";i.d(t,{m:function(){return s}});var n=i(80494),r=i(51064),o=i(8358);function s(){let{getToken:e}=(0,r.aC)(),[t]=(0,o.fP)(["irclickid"]);return(0,n.ZP)({baseUrl:"https://studio-api.suno.ai",fetch:async(i,n)=>{let r=await e();return fetch(i,{...n,headers:{...null==n?void 0:n.headers,Authorization:"Bearer ".concat(r),"Affiliate-Id":t.irclickid}})}})}},40323:function(e,t,i){"use strict";i.d(t,{Jr:function(){return v},Ls:function(){return p},de:function(){return f},dq:function(){return c},ip:function(){return h},z3:function(){return d}});var n=i(67958),r=i(69523),o=i(64874),s=i(92115),a=i(30305),l=i(69548);let u=e=>{let t=Date.now()-new Date(null==e?void 0:e.created_at).getTime();return(null==e?void 0:e.status)==="submitted"?t-3e4:(null==e?void 0:e.status)==="queued"?t-9e5:-1},c=(e,t)=>{let i=e.mv.includes("engine-t")||e.mv.includes("engine-ft"),n=e.mv.includes("engine-t");return null!==e.infillFromSeconds&&null!==e.infillToSeconds?i?e.mv:"chirp-v3p5-engine-ft":e.continueClipId&&"upload"===t.clipById[e.continueClipId].metadata.type?n?e.mv:"chirp-v3-5-upload":e.mv};class d{get clips(){return this.clipIds.map(e=>this.clipById[e]).filter(e=>{var t;return(null==e?void 0:null===(t=e.reaction)||void 0===t?void 0:t.reaction_type)!=="D"}).filter(e=>(null==e?void 0:e.status)!=="error")}get allClips(){return this.clipIds.map(e=>this.clipById[e]).filter(e=>"error"!==e.status)}get playlists(){return this.playlistIds.map(e=>this.playlistById[e]).filter(e=>!!e)}get allPlaylists(){return this.allPlaylistIds.map(e=>this.playlistById[e]).filter(e=>!!e)}get loadingRequests(){return Array.from(this.runningRequests).map(e=>this.requestById[e])}async setClipConfigurations(e,t){if(!this.clipById[e]){console.error("Clip not found:",e);return}this.clipById[e].metadata||(this.clipById[e].metadata={}),this.clipById[e].metadata.configurations=t;let{data:i}=await this.apiClient.POST("/api/gen/{gen_id}/set_configurations/",{params:{path:{gen_id:e}},body:{configurations:t}})}async setArtistClipId(e,t){if(!this.clipById[e]){console.error("Clip not found:",e);return}this.clipById[e].metadata||(this.clipById[e].metadata={}),this.clipById[e].metadata.artist_clip_id=t;let{data:i}=await this.apiClient.POST("/api/gen/{gen_id}/set_artist_clip_id/",{params:{path:{gen_id:e}},body:{artist_clip_id:t}})}async setCoverClipId(e,t){if(!this.clipById[e]){console.error("Clip not found:",e);return}this.clipById[e].metadata||(this.clipById[e].metadata={}),this.clipById[e].metadata.cover_clip_id=t;let{data:i}=await this.apiClient.POST("/api/gen/{gen_id}/set_cover_clip_id/",{params:{path:{gen_id:e}},body:{cover_clip_id:t}})}constructor(e,t){var i=this;this.clipById={},this.playlistById={},this.clipIds=[],this.playlistIds=[],this.allPlaylistIds=[],this.loadingPlaylistIds=[],this.runningRequests=new Set,this.uncreditedRequests=new Set,this.requestById={},this.clipRequestId={},this.notifiedErrors=new Set,this.trashedClipIndices=new Map,this.loadingRadio=!1,this.pendingWavDownloadClip=null,this.pendingWavDownloadAtTime=null,this.alignedLyricsByClipId={},this.isUpdatingClipReaction=!1,this.runStream=async(e,t)=>{var i,r,a,l,u,d,p,h;let f=[];Object.values(e.imageData).forEach(e=>{e&&f.push(e)});let v=(null===(r=this.session)||void 0===r?void 0:null===(i=r.flags)||void 0===i?void 0:i.configs)&&this.session.isStaff,m=(null===(l=this.session)||void 0===l?void 0:null===(a=l.flags)||void 0===a?void 0:a["video-to-song"])&&this.session.isStaff,y=(null===(d=this.session)||void 0===d?void 0:null===(u=d.flags)||void 0===u?void 0:u["artist-consistency"])&&this.session.isStaff,g=(null===(h=this.session)||void 0===h?void 0:null===(p=h.flags)||void 0===p?void 0:p.cover)&&this.session.isStaff,b=e.isSimple||(null==t?void 0:t.isSimple)?{gpt_description_prompt:e.description||e.placeholder,mv:e.mv,prompt:"",make_instrumental:e.instrumental,user_uploaded_images_b64:f,generation_type:e.generationType,...m&&{user_uploaded_video_id:e.videoS3Id}}:{prompt:e.instrumental?"":e.lyrics,generation_type:e.generationType,tags:e.style,mv:c(e,this),title:e.title,continue_clip_id:e.continueClipId,continue_at:e.continueAtSeconds,infill_start_s:e.infillFromSeconds,infill_end_s:e.infillToSeconds,...y&&{artist_clip_id:e.artistClipId,artist_start_s:e.artistStartSeconds,artist_end_s:e.artistEndSeconds},...g&&{cover_clip_id:e.coverClipId},...v&&{metadata:{forced_infer_config:{temp_semantic:parseFloat(e.configurations.temp_semantic),temp_coarse:parseFloat(e.configurations.temp_coarse),top_k_semantic:e.configurations.top_k_semantic?parseInt(e.configurations.top_k_semantic,10):null,top_k_coarse:e.configurations.top_k_coarse?parseInt(e.configurations.top_k_coarse,10):null,top_p_semantic:parseFloat(e.configurations.top_p_semantic),top_p_coarse:parseFloat(e.configurations.top_p_coarse),cfg_coef:parseFloat(e.configurations.cfg_coef),cfg_coef_tags:parseFloat(e.configurations.cfg_coef_tags),cfg_coef_neg_tags:parseFloat(e.configurations.cfg_coef_neg_tags),cfg_coef_tags_max_steps:parseInt(e.configurations.cfg_coef_tags_max_steps,10)}}}},{data:w,error:_,response:k}=await this.apiClient.POST("/api/generate/v2/",{body:b});if(w){this.requestById[w.id]=w;let t=[];w.clips.forEach(i=>{this.addClip({...i}),v&&this.setClipConfigurations(i.id,e.configurations),y&&e.artistClipId&&this.setArtistClipId(i.id,e.artistClipId),g&&e.coverClipId&&this.setCoverClipId(i.id,e.coverClipId),this.runningRequests.add(i.id),this.uncreditedRequests.add(i.id),this.clipRequestId[i.id]=w.id,t.push(i.id)}),o.g.logAudioCreationEvent(e.isMobile,s.OF.createSong,e,this.session,{newClipIds:t}),o.g.track(s.Vy.songCreateResponseSuccess,{modelVersion:e.mv});let i=this.clipById[w.clips[0].id];return this.session.botCheck(),i}429===k.status?((0,n.Am)({title:"Please wait.",description:"Please wait for your other generations to finish.",status:"error",duration:4e3,isClosable:!0}),o.g.track(s.Vy.songCreateResponseError,{modelVersion:e.mv,errorCode:"429",errorReason:"Rate limited"})):402===k.status?((0,n.Am)({title:"Need at least 10 credits to create.",description:"Upgrade your account to get more credits!",status:"error",duration:4e3,isClosable:!0}),o.g.track(s.Vy.songCreateResponseError,{modelVersion:e.mv,errorCode:"402",errorReason:"Insufficient credits"})):503===k.status?((0,n.Am)({title:"We are seeing elevated usage.",description:"Generations are currently only available for Pro and Premier subscribers.",status:"error",duration:4e3,isClosable:!0}),o.g.track(s.Vy.songCreateResponseError,{modelVersion:e.mv,errorCode:"503",errorReason:"Elevated usage"})):_&&((0,n.Am)({title:"An error occurred.",description:"A system error occurred.",status:"error",duration:4e3,isClosable:!0}),o.g.track(s.Vy.songCreateResponseError,{modelVersion:e.mv,errorCode:"unknown",errorReason:"Unknown error"}))},this.runConcat=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{data:n}=await i.apiClient.POST("/api/generate/concat/v2/",{body:{clip_id:e,is_infill:t}});n&&(i.addClip(n),i.runningRequests.add(n.id))},this.fetchRecentClips=async()=>{var e,t,i;let{data:n}=await this.apiClient.GET("/api/feed/v2",{params:{query:{add_preset_clips:!0}}});n&&(null==n||null===(e=n.clips)||void 0===e||e.reverse(),null==n||null===(t=n.clips)||void 0===t||t.forEach(e=>{e.status&&"complete"!=e.status&&"error"!=e.status&&(this.runningRequests.add(e.id),this.uncreditedRequests.add(e.id)),this.clipById[e.id]=e}),this.clipIds=(null==n?void 0:null===(i=n.clips)||void 0===i?void 0:i.map(e=>e.id))||[])},this.addClip=e=>{this.clipById[e.id]=e,this.clipIds.includes(e.id)||this.clipIds.push(e.id)},this.updateClips=e=>{e.forEach(e=>{this.clipById[e.id]=e})},this.updatePlaylists=(e,t)=>{this.allPlaylistIds=[...this.allPlaylistIds.slice(0,(t-1)*12),...e.map(e=>e.id)],this.playlistIds=e.map(e=>e.id),e.forEach(e=>{this.playlistById[e.id]=e})},this.removeFromCreatePage=e=>{let t=this.clipIds.indexOf(e);-1!==t&&(this.trashedClipIndices.set(e,t),this.clipIds.splice(t,1))},this.addToCreatePage=e=>{if(!this.clipIds.includes(e)){let t=this.trashedClipIndices.get(e);"number"==typeof t?(this.clipIds.splice(t,0,e),this.trashedClipIndices.delete(e)):this.clipIds.push(e)}},this.fetchRunningRequests=async()=>{let{data:e}=await this.apiClient.GET("/api/generate/requests/",{params:{query:{status:"running"}}});e&&(null==e||e.forEach(e=>{e.clips.forEach(e=>this.addClip(e)),this.runningRequests.add(e.id),this.requestById[e.id]=e,this.updateClips(e.clips)}))},this.loadClipById=async e=>{let{data:t}=await this.apiClient.GET("/api/clip/{clip_id}",{params:{path:{clip_id:e}}});if(t)return t},this.getPlaylistClips=e=>{var t;return null===(t=this.playlistById[e])||void 0===t?void 0:t.playlist_clips},this.pollRunningGens=async()=>{var e;let{data:t}=await this.apiClient.GET("/api/feed/v2",{params:{query:{ids:Array.from(this.runningRequests).join(",")}}});t&&(null==t||null===(e=t.clips)||void 0===e||e.forEach(e=>{if(this.updateClips([e]),"streaming"===e.status&&this.uncreditedRequests.has(e.id)&&(this.uncreditedRequests.delete(e.id),this.session.deductCredits(5)),"complete"===e.status||"error"===e.status){if(this.runningRequests.delete(e.id),this.uncreditedRequests.has(e.id)&&(this.uncreditedRequests.delete(e.id),"error"===e.status||e.metadata.refund_credits||this.session.deductCredits(5)),"error"===e.status){let t=this.clipRequestId[e.id];if(t&&this.notifiedErrors.has(t))return;t&&this.notifiedErrors.add(t),"moderation_failure"===e.metadata.error_type?(0,n.Am)({title:"Couldn't generate that.",description:e.metadata.error_message,status:"error",duration:6e3,isClosable:!0}):(0,n.Am)({title:"An error occurred generating a clip.",description:"An error occurred.",status:"error",duration:4e3,isClosable:!0})}}else{let t=u(e);t>0&&t<5e3&&(0,n.Am)({title:"A clip got stuck while generating.",description:"No credits were used and you can retry.",status:"error",duration:4e3,isClosable:!0})}}))},this.likeClip=async(e,t)=>{(async()=>{this.clipById[e].reaction={...this.clipById[e].reaction,reaction_type:t?"L":null},void 0!==this.clipById[e].upvote_count&&(this.clipById[e].upvote_count+=t?1:-1);let{data:i}=await this.apiClient.POST("/api/gen/{gen_id}/update_reaction_type/",{params:{path:{gen_id:e}},body:{reaction:t?"LIKE":null}})})(),this.session.botCheck()},this.dislikeClip=async(e,t)=>{(async()=>(this.clipById[e].reaction={...this.clipById[e].reaction,reaction_type:t?"D":null},await this.apiClient.POST("/api/gen/{gen_id}/update_reaction_type/",{params:{path:{gen_id:e}},body:{reaction:t?"DISLIKE":null}})))(),this.session.botCheck()},this.setMetadata=async(e,t,i,r)=>{try{let o=(await this.apiClient.POST("/api/gen/{gen_id}/set_metadata/",{params:{path:{gen_id:e}},body:{title:t,image_url:i,is_audio_upload_tos_accepted:r}})).data;if(o&&(!o||!o.error_type))return(0,n.Am)({title:"Success",description:"Song details updated successfully.",status:"success",duration:5e3,isClosable:!0}),this.clipById[e].title=t,this.clipById[e].image_url=i||null,{success:!0,data:o};{let e="An error occurred updating your song details.";return e=(null==o?void 0:o.error_type)==="title_too_long"?"That title is too long. Please try a shorter title (max 100 characters).":(null==o?void 0:o.error_type)==="text_moderation_error"?"That title didn't pass moderation. Please try again.":(null==o?void 0:o.error_type)==="image_moderation_error"?"That image didn't pass moderation. Please try again.":(null==o?void 0:o.error_type)==="image_upload_error"?"Image upload failed. The image you uploaded may be invalid.":"An unknown error occurred. Check your uploaded image size and try again.",(0,n.Am)({title:"Error",description:e,status:"error",duration:6e3,isClosable:!0}),{success:!1,data:o}}}catch(e){return(0,n.Am)({title:"Network Error",description:"A network error occurred. Please try again.",status:"error",duration:6e3,isClosable:!0}),{success:!1,error:e}}},this.setClipPrompt=async(e,t,i)=>{try{let r=(await this.apiClient.POST("/api/gen/{gen_id}/set_clip_prompt/",{params:{path:{gen_id:e}},body:{prompt:t,model_name:i}})).data;if(r&&(!r||!r.error_type))return(0,n.Am)({title:"Success",description:"Song lyrics updated successfully.",status:"success",duration:5e3,isClosable:!0}),this.clipById[e].metadata.prompt=t,{success:!0,data:r};{let e="An error occurred updating your lyrics.";return(null==r?void 0:r.error_type.includes("prompt_too_long"))?e="Those lyrics are too long. Please try shorter lyrics (max ".concat(i.includes("v3.5")||i.includes("v4")?3e3:1250," characters)."):(null==r?void 0:r.error_type)==="text_moderation_error"?e="Those lyrics didn't pass moderation. Please try again.":(console.log(r),e="An unknown error occurred."),(0,n.Am)({title:"Error",description:e,status:"error",duration:6e3,isClosable:!0}),{success:!1,data:r}}}catch(e){return(0,n.Am)({title:"Network Error",description:"A network error occurred. Please try again.",status:"error",duration:6e3,isClosable:!0}),{success:!1,error:e}}},this.getStepCallback=e=>{let{setCurrentClip:t}=e;return(e,i)=>{var n;let r=this.clipIds.indexOf((null===(n=e.clip)||void 0===n?void 0:n.id)||"");if(-1===r)return;let o=this.clipIds[r+i];if(!o)return;let s=this.clipById[o];e.playClip(s),t&&t(s)}},this.loadPlaylist=async function(e){var t,n,r,o;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0;if(i.loadingPlaylistIds.includes(e)||i.playlistById[e]&&0===s)return;i.loadingPlaylistIds=[...i.loadingPlaylistIds,e];let{data:u}=await i.apiClient.GET("/api/playlist/{playlist_id}/",{params:{path:{playlist_id:e},query:{page:s}}});if(!u||s>1&&((null===(n=i.playlistById[e])||void 0===n?void 0:null===(t=n.clipIds)||void 0===t?void 0:t.length)||0)<(s-1)*l.kl)return!1;let c=[...s>1?null===(o=i.playlistById[e])||void 0===o?void 0:null===(r=o.clipIds)||void 0===r?void 0:r.slice(0,(s-1)*l.kl):[],...u.playlist_clips.map(e=>e.clip.id)];return i.playlistById[e]={...u,clipIds:c},i.loadingPlaylistIds=i.loadingPlaylistIds.filter(t=>t!==e),i.clipIds=c,i.updateClips(u.playlist_clips.map(e=>e.clip)),a&&a(),Object.fromEntries(u.playlist_clips.map((e,t)=>[t+(s-1)*l.kl,e]))},this.loadTrendingPlaylist=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,{data:r}=await i.apiClient.GET("/api/playlist/{playlist_id}/",{params:{path:{playlist_id:e},query:{page:t}}});return!!r&&(n&&n(),r)},this.loadTrendingMetaplaylist=async()=>{let{data:e}=await this.apiClient.GET("/api/trending/metaplaylist/",{params:{}});if(!e||!e.playlists)return[];let t=[];return e.playlists.forEach(e=>{let{id:i,playlist_clips:n}=e;n&&(this.playlistById[i]={...e,clipIds:n.map(e=>e.clip.id)},t.push(i),this.updateClips(n.map(e=>e.clip)))}),t},this.createPlaylist=async()=>{let{response:e}=await this.apiClient.POST("/api/playlist/create/",{body:void 0});return await e.json()},this.loadRadio=async e=>{let{tag:t,extend:i=!1,excludeClipIds:n=[],playbarState:r}=e;this.loadingRadio=!0;let{data:o}=await this.apiClient.GET("/api/radio/{tag}/",{params:{path:{tag:t},query:{exclude_clip_ids:n}}});return this.loadingRadio=!1,this.updateClips((null==o?void 0:o.clips)||[]),this.clipIds=[...i?this.clipIds:[],...(null==o?void 0:o.clips.map(e=>e.id))||[]],null==r||r.queue.setClips(this.allClips),this.clips},this.setClipVisibility=async(e,t)=>{if(!this.clipById[e])return;this.clipById[e].is_public=t;let{data:i}=await this.apiClient.POST("/api/gen/{gen_id}/set_visibility/",{params:{path:{gen_id:e}},body:{is_public:t}})},this.flagClip=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",{data:r}=await i.apiClient.POST("/api/gen/{gen_id}/update_flag_state/",{params:{path:{gen_id:e}},body:{flagged:!0,flagged_reason:t}});r&&(0,n.Am)({title:"Song flagged.",description:"This song has been flagged for review.",status:"warning",duration:4e3,isClosable:!0})},this.feedbackClip=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",{data:r}=await i.apiClient.POST("/api/gen/{gen_id}/update_feedback_state/",{params:{path:{gen_id:e}},body:{feedback_reason:t}});r&&(""===t?(0,n.Am)({title:"Your feedback has been removed.",description:"Your feedback has been removed for this clip.",status:"error",duration:4e3,isClosable:!0}):(0,n.Am)({title:"Thank you for your feedback!",description:"Your feedback has been updated for this clip.",status:"success",duration:4e3,isClosable:!0}))},this.trashClips=async(e,t)=>{e.some(e=>!this.clipById[e])||(e.forEach(e=>{this.clipById[e].is_trashed=t}),await this.apiClient.POST("/api/gen/trash/",{body:{trash:t,clip_ids:e}}))},this.deleteClips=async e=>{if(e.length)try{await this.apiClient.POST("/api/clips/delete/",{body:{ids:e}})}catch(e){console.error("Error deleting clips:",e)}},this.loadAlignedLyrics=async e=>{if(!this.alignedLyricsByClipId[e.id]){var t;let i=await this.apiClient.GET("/api/gen/{clip_id}/aligned_lyrics/",{params:{path:{clip_id:e.id}}}),n=(null==i?void 0:null===(t=i.data)||void 0===t?void 0:t.data)||void 0;n&&(this.alignedLyricsByClipId[e.id]=n)}},this.regenerateVideo=async(e,t)=>{t.clips.clipById[null==e?void 0:e.id]&&(t.clips.clipById[null==e?void 0:e.id].is_video_pending=!0),await t.apiClient.POST("/api/video/generate/{clip_id}/",{params:{path:{clip_id:null==e?void 0:e.id}}}),this.getVideoRegenStatus(e,t)},this.makeStems=async(e,t)=>{let{data:i}=await t.apiClient.POST("/api/edit/stems/{clip_id}/",{params:{path:{clip_id:null==e?void 0:e.id}}});i&&i.clips.forEach(e=>{this.addClip(e),this.runningRequests.add(e.id)})},this.getVideoRegenStatus=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,{data:o}=await t.apiClient.GET("/api/video/generate/{clip_id}/status/",{params:{path:{clip_id:null==e?void 0:e.id}}});if((null==o?void 0:o.status)==="complete")t.clips.clipById[null==e?void 0:e.id]&&(t.clips.clipById[null==e?void 0:e.id].is_video_pending=!1,t.clips.clipById[null==e?void 0:e.id].video_url=null==o?void 0:o.video_url);else{if(0===r){t.clips.clipById[null==e?void 0:e.id]&&(t.clips.clipById[null==e?void 0:e.id].is_video_pending=!1),(0,n.Am)({title:"Video generation timed out",description:"Please try again.",status:"error",duration:4e3,isClosable:!0});return}t.clips.clipById[null==e?void 0:e.id]&&(t.clips.clipById[null==e?void 0:e.id].is_video_pending=!0),setTimeout(()=>i.getVideoRegenStatus(e,t,r-1),4e3)}},(0,a.ky)(this),this.apiClient=e,this.session=t,setInterval(()=>{this.runningRequests.size&&this.pollRunningGens()},1e4),setInterval(async()=>{if(this.pendingWavDownloadClip){var e,t;let i=await (0,r.AP)(this.apiClient,this.pendingWavDownloadClip);if(null==i?void 0:null===(e=i.data)||void 0===e?void 0:e.wav_file_url){let e=this.pendingWavDownloadClip;this.pendingWavDownloadClip=null,this.pendingWavDownloadAtTime=null,await (0,r.gS)(this.apiClient,e,"audio-wav",null==i?void 0:null===(t=i.data)||void 0===t?void 0:t.wav_file_url)}else this.pendingWavDownloadAtTime&&Date.now()-this.pendingWavDownloadAtTime>6e4&&((0,n.Am)({title:"WAV file download timed out",description:"Please try again.",status:"error",duration:4e3,isClosable:!0}),this.pendingWavDownloadAtTime=null,this.pendingWavDownloadClip=null)}},5e3)}}let p=e=>u(e)>0,h=e=>{var t;return(null==e?void 0:null===(t=e.reaction)||void 0===t?void 0:t.reaction_type)==="L"},f=e=>{var t;return(null==e?void 0:null===(t=e.reaction)||void 0===t?void 0:t.reaction_type)==="D"},v=e=>e&&e.reaction&&e.reaction.feedback_reason?e.reaction.feedback_reason.split(","):[]},29945:function(e,t,i){"use strict";i.d(t,{Q:function(){return r},b:function(){return s}});var n,r,o=i(30305);(n=r||(r={})).PLAYLIST="playlist",n.RADIO="radio",n.FEED="feed",n.FOLLOWING_FEED="following_feed",n.PROFILE="profile",n.SONG_RECOMMENDATIONS="song_recommendations",n.SEARCH="search",n.TAG="tag";class s{constructor(){this.currentIndex=0,this.clips=[],this.pendingClips=[],this.contextType=null,this.contextId=null,this.currentPlayingSongIsRemoved=!1,this.setPlayContext=e=>{this.contextType=e.contextType||null,this.contextId=e.contextId||null,this.currentIndex=void 0!==e.currentIndex?e.currentIndex:null,this.clips=e.clips||[],this.pendingClips=e.pendingClips||[],this.currentPlayingSongIsRemoved=e.currentPlayingSongIsRemoved||!1},this.setClips=e=>{this.clips=e},this.setPendingClips=e=>{this.pendingClips=e},this.getClips=()=>this.clips,this.getClipsForContext=(e,t)=>this.contextType!==e||this.contextId!==t&&(this.contextId||t)?this.pendingClips||[]:this.clips||[],this.setToNextClip=()=>{let e=this.currentPlayingSongIsRemoved?this.currentIndex||0:null===this.currentIndex?1:this.currentIndex+1;return!!this.clips[e]&&(this.currentIndex=e,!0)},this.setToPreviousClip=()=>{if(null===this.currentIndex)return;let e=Math.max((this.currentIndex||0)-1,0);this.clips[e]&&(this.currentIndex=e)},this.getCurrentClip=()=>{if(null!==this.currentIndex)return this.clips[this.currentIndex]},this.setCurrentIndex=e=>{this.currentIndex=e},this.isPlaylistCurrentContext=e=>!!e&&("playlist"===this.contextType||"tag"===this.contextType||"search"===this.contextType)&&this.contextId===e,this.isRadioCurrentContext=e=>!!e&&"radio"===this.contextType&&this.contextId===e,this.setCurrentPlayingSongIsRemoved=e=>{this.currentPlayingSongIsRemoved=e},(0,o.ky)(this)}}},68554:function(e,t,i){"use strict";i.d(t,{a:function(){return s},p:function(){return l}});var n=i(64874),r=i(92115),o=i(30305);class s{constructor(e,t,i,n,r,o){this.searchType="public_song",this.query="",this.isPublic=!0,this.rankBy="trending",this.fromIndex=0,this.pageSize=20,this.getSearchCacheKey=()=>this.searchType+"|"+this.query+"|"+this.rankBy+"|"+this.isPublic,this.searchType=e,this.query=t,this.isPublic=i,this.rankBy=n,this.fromIndex=r,this.pageSize=o}}let a="public_song";class l{constructor(e){var t=this;this.searchTerm="",this.searchType=a,this.searchRankingType="trending",this.searchResultCache={},this.setSearchType=e=>{this.searchType=e},this.setSearchRankingType=e=>{this.searchRankingType=e},this.searchData=async function(e,i){var o,l,u,c;let d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"trending",h=new s(d,e,!0,p,0,20),f=h.getSearchCacheKey(),v=t.searchResultCache[f];if(!1===i&&t.searchResultCache[f])return;i&&(h.fromIndex=(null!==(o=null==v?void 0:v.from_index)&&void 0!==o?o:0)+(null!==(l=null==v?void 0:v.page_size)&&void 0!==l?l:0));let{data:m}=await t.apiClient.POST("/api/search/",{body:{search_queries:[{name:h.searchType+h.query,search_type:h.searchType,term:h.query,from_index:h.fromIndex,rank_by:h.rankBy}]}});if(n.g.track(r.Vy.songSearch,h),!m||e!=t.searchTerm)return;let y=m.result[d+e].result;i&&v&&(null!==(u=v.from_index)&&void 0!==u?u:0)+(null!==(c=v.page_size)&&void 0!==c?c:0)<=h.fromIndex&&(m.result[d+e].result=t.searchResultCache[h.getSearchCacheKey()].result.concat(y)),t.searchResultCache[h.getSearchCacheKey()]=m.result[d+e]},this.librarySearch=async function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o={query:e,from_index:20*i},{data:s}=await t.apiClient.POST("/api/search/",{body:{search_queries:[{search_type:"library_song",name:"library_song",term:o.query,from_index:o.from_index,rank_by:"most_relevant"}]}});if(n.g.track(r.Vy.songSearch,o),s)return s.result.library_song},this.apiClient=e,this.librarySearchTerm="",(0,o.ky)(this)}}},54226:function(e,t,i){"use strict";i.d(t,{B:function(){return o},n:function(){return r}});let n=()=>{let e=1/(Math.exp(2)-1);return{k:2,a:e,b:-e}},r=e=>{let{k:t,a:i,b:r}=n();return i*Math.exp(t*e)+r},o=e=>{let{k:t,a:i,b:r}=n();return 1/t*Math.log((e-r)/i)}},1633:function(e,t,i){"use strict";i.d(t,{$L:function(){return c},$x:function(){return A},CP:function(){return B},Cy:function(){return V},Dj:function(){return x},E2:function(){return v},Ff:function(){return s},KX:function(){return _},L8:function(){return O},MT:function(){return u},M_:function(){return S},Me:function(){return w},OV:function(){return J},PE:function(){return M},Qy:function(){return C},SL:function(){return a},SN:function(){return p},Wz:function(){return P},YY:function(){return L},Zs:function(){return E},ax:function(){return k},eL:function(){return I},fm:function(){return d},g5:function(){return R},ig:function(){return U},kA:function(){return j},kS:function(){return G},li:function(){return m},m:function(){return q},mh:function(){return h},n5:function(){return z},n_:function(){return N},sU:function(){return F},uH:function(){return T},uK:function(){return D},up:function(){return y},vj:function(){return f},yG:function(){return b},yR:function(){return g}});let n=["acoustic","aggressive","anthemic","atmospheric","bouncy","chill","dark","dreamy","electronic","emotional","epic","experimental","futuristic","groovy","heartfelt","infectious","melodic","mellow","powerful","psychedelic","romantic","smooth","syncopated","uplifting",""],r=["afrobeat","anime","ballad","bedroom pop","bluegrass","blues","classical","country","cumbia","dance","dancepop","delta blues","electropop","disco","dream pop","drum and bass","edm","emo","folk","funk","future bass","gospel","grunge","grime","hip hop","house","indie","j-pop","jazz","k-pop","kids music","metal","new jack swing","new wave","opera","pop","punk","raga","rap","reggae","reggaeton","rock","rumba","salsa","samba","sertanejo","soul","synthpop","swing","synthwave","techno","trap","uk garage"],o=["a bad breakup","finding love on a rainy day","a cozy rainy day","dancing all night long","dancing with you for the last time","not being able to wait to see you again","how you're always there for me","when you're not around","a faded photo on the mantel","a literal banana","wanting to be with you","writing a face-melting guitar solo","the place where we used to go","being trapped in an AI song factory, help!"],s=["pop","rock","rap","metal","electronic","upbeat","melodic","dark","piano","hip hop","epic","bass","emotional","acoustic","aggressive","trap","country","edm","r&b","jazz","ballad","funk","guitar","hard rock","synthwave","dance","folk","heavy metal","atmospheric","catchy","sad","indie","house","j-pop","dreamy","soul","punk","powerful","male voice","lo-fi","uplifting","female voice","chill","techno","ambient","blues","romantic","male vocals","reggae","orchestral","opera","female vocals","energetic","vocaloid","drum","melancholic","intense","dubstep","alternative rock","emo","disco","smooth","experimental","synth","psychedelic","progressive","k-pop","mellow","groovy","80s","japanese","anthemic","violin","nu metal","pop rock","electric guitar","cinematic","classical","cantonese","heartfelt","ethereal","swing","electro","flute","female singer","grunge","deep","drum and bass","trance","indie pop","gospel","anime","math rock","90s","dramatic","industrial","electropop","phonk","beat","acoustic guitar","futuristic","bounce drop","mutation funk"],a={rap:{trap:327e9,pop:137e8,bass:109e7,"hip hop":106e6,beat:94e5,rock:93e4,metal:88e3,melodic:6900,aggressive:660},melodic:{pop:76e9,metal:73e8,rap:69e7,rock:55e6,beat:48e5,guitar:46e4,bass:4e4,synth:3600,piano:320,epic:28},"hip hop":{rap:106e9,pop:45e8,punk:3e8,trap:27e6,bass:25e5,"r&b":22e4,"lo-fi":2e4,beat:1800,rock:160,metal:16},"r&b":{pop:76e9,soul:69e8,electro:32e7,rap:31e6,electronic:25e5,funk:24e4,"hip hop":22e3,smooth:2200,"male vocals":200,jazz:20},epic:{metal:91e9,orchestral:68e8,rock:66e7,bass:53e6,drum:5e6,guitar:47e4,pop:37e3,emo:3400,beat:310,"male voice":29},opera:{rock:5e10,powerful:41e8,metal:41e7,pop:35e6,punk:28e5,epic:27e4,"80s":22e3,dark:2e3,"pop rock":170,melodic:16},cinematic:{orchestral:33e9,epic:27e8,atmospheric:14e7,synth:14e6,metal:13e5,electronic:11e4,piano:11e3,ambient:1100,electro:110,dark:10},dramatic:{epic:15e9,rock:1e9,orchestral:1e8,dark:9e6,pop:9e5,opera:8e4,piano:8e3,bass:800,guitar:70,powerful:7},"lo-fi":{chill:35e9,funk:34e8,japanese:33e7,pop:23e6,jazz:21e5,"hip hop":2e5,electro:18e3,synth:1500,rock:140,mellow:13},japanese:{funk:37e9,"lo-fi":33e8,rock:29e7,pop:28e6,electro:14e5,vocaloid:13e4,metal:11e3,anime:1100,synth:90,swing:9},beat:{upbeat:366e9,pop:243e8,bass:94e7,rap:94e6,synth:71e5,electro:63e4,drum:62e3,rock:5700,electronic:510,melodic:48},rock:{pop:315e9,metal:223e8,"hard rock":183e7,guitar:161e6,punk:124e5,"alternative rock":121e4,indie:97e3,rap:9300,electro:870,emo:87},guitar:{rock:161e9,drum:134e8,bass:126e7,metal:125e6,"electric guitar":12e6,piano:85e4,pop:84e3,acoustic:8300,"acoustic guitar":690,"male voice":64},"hard rock":{rock:183e9,metal:86e8,guitar:37e7,industrial:32e6,"heavy metal":25e5,powerful:22e4,bass:19e3,drum:1600,pop:120,aggressive:12},bass:{drum:215e9,guitar:126e8,rap:109e7,beat:94e6,"drum and bass":84e5,pop:81e4,rock:71e3,deep:7e3,piano:660,synth:66},"male voice":{"female voice":167e9,pop:102e8,rock:7e8,guitar:64e6,bass:6e6,drum:45e4,rap:36e3,beat:3500,deep:350,piano:32},"female voice":{"male voice":167e9,pop:5e9,bass:34e7,guitar:26e6,rock:25e5,drum:21e4,beat:18e3,punk:1700,electro:170,edm:17},drum:{bass:215e9,guitar:134e8,"drum and bass":84e7,rock:75e6,metal:64e5,beat:62e4,pop:57e3,piano:5300,epic:500,"male voice":45},"drum and bass":{bass:84e9,drum:84e8,electro:13e7,electronic:12e6,vocaloid:11e5,emo:8e4,pop:8e3,experimental:800,funk:7},metal:{rock:223e9,"heavy metal":18e9,guitar:125e7,"nu metal":114e6,aggressive:95e5,epic:91e4,rap:88e3,"hard rock":8600,melodic:730,dark:68},"heavy metal":{metal:18e10,rock:4e9,guitar:32e7,bass:28e6,drum:28e5,aggressive:28e4,"hard rock":25e3,powerful:2400,epic:190},pop:{rock:315e9,electro:265e8,beat:243e7,upbeat:197e6,electronic:162e5,synth:16e5,"j-pop":157e3,punk:14800,dance:1450,indie:137},orchestral:{epic:68e9,cinematic:33e8,emo:32e7,emotional:3e7,drum:26e5,metal:22e4,guitar:21e3,dark:2100,bass:190,piano:15},"alternative rock":{rock:121e9,metal:34e8,electro:33e7,electronic:31e6,"nu metal":25e5,dark:23e4,futuristic:22e3,pop:1600,grunge:150,guitar:14},anime:{rock:24e9,pop:23e8,piano:13e7,epic:12e6,japanese:11e5,metal:1e5,dark:800,electro:80},dark:{synth:76e9,electro:73e8,rock:71e7,metal:68e6,pop:61e5,electronic:5e5,bass:48e3,rap:4600,synthwave:430,drum:38},synthwave:{synth:213e9,electro:6e9,dark:43e7,electronic:37e6,pop:31e5,disco:3e5,"80s":27e3,punk:2400,bass:240,beat:22},catchy:{pop:85e9,guitar:44e8,metal:43e7,beat:35e6,rock:34e5,bass:29e4,rap:28e3,epic:2600,"electric guitar":200,edm:19},emo:{emotional:341e9,pop:122e8,rock:87e7,piano:49e6,rap:49e5,sad:45e4,ballad:45e3,guitar:3700,synth:360,epic:34},synth:{synthwave:213e9,pop:16e9,electro:131e7,electronic:9e7,dark:76e5,beat:71e4,bass:66e3,"80s":5400,chill:450,punk:43},"80s":{pop:67e9,synth:54e8,rock:36e7,punk:28e6,synthwave:27e5,powerful:24e4,electro:22e3,opera:2200,electronic:210,"pop rock":17},electro:{electronic:543e9,pop:265e8,synth:131e7,rock:87e6,dark:73e5,swing:66e4,electropop:64e3,metal:6400,beat:630,bass:63},electropop:{pop:64e9,electro:64e8,synth:8e7,rap:6e6,rock:6e5,"r&b":5e4,"male vocals":5e3,dark:400,synthwave:40,emo:4},ballad:{pop:81e9,rock:51e8,emo:45e7,emotional:4e7,piano:39e5,guitar:24e4,sad:23e3,"male voice":2e3,acoustic:140,metal:12},emotional:{emo:341e9,pop:85e8,rock:48e7,piano:41e6,ballad:4e6,orchestral:3e5,sad:29e3,epic:2800,rap:250,guitar:22},country:{acoustic:43e9,pop:35e8,rock:34e7,beat:24e6,upbeat:19e5,rap:17e4,melodic:15e3,folk:1300,guitar:130,heartfelt:11},house:{deep:65e9,techno:43e8,bass:42e7,electro:37e6,pop:32e5,synth:29e4,beat:26e3,electronic:2500,funk:250,trance:24},experimental:{rock:23e9,pop:23e8,electro:21e7,electronic:2e7,funk:19e5,jazz:19e4,soul:14e3,guitar:1300,drum:130,bass:10},industrial:{metal:65e9,rock:45e8,"hard rock":32e7,electro:27e6,synth:15e5,dark:12e4,deep:9e3,bass:800,pop:70,synthwave:7},acoustic:{guitar:83e9,pop:78e8,"acoustic guitar":69e7,folk:57e6,country:43e5,indie:3e5,piano:29e3,melodic:2600,soul:250,rock:24},powerful:{rock:81e9,metal:66e8,pop:49e7,guitar:44e6,opera:41e5,drum:33e4,bass:27e3,epic:2700,"80s":240,"heavy metal":24},heartfelt:{pop:19e9,acoustic:11e8,country:11e7,rock:1e7,emo:9e5,soul:8e4,melodic:7e3,ballad:600,piano:60,beat:6},"acoustic guitar":{acoustic:69e9,guitar:69e8,piano:2e8,pop:13e6,flute:9e5,indie:9e4,beat:9e3,emo:800,catchy:70,rock:7},jazz:{pop:59e9,funk:58e8,rock:41e7,swing:38e6,soul:34e5,electro:32e4,bass:3e4,rap:2800,smooth:280,blues:27},funk:{pop:116e9,rock:8e9,jazz:58e7,bass:56e6,soul:53e5,"mutation funk":52e4,"bounce drop":48e3,dubstep:4500,"math rock":430,rap:40},indie:{pop:137e9,rock:97e8,"indie pop":65e7,folk:34e6,punk:31e5,dreamy:3e5,acoustic:3e4,psychedelic:2900,rap:210,beat:20},dreamy:{pop:74e9,indie:3e9,psychedelic:28e7,soul:18e6,synth:18e5,ethereal:16e4,funk:15e3,rap:1400,emo:130,electro:13},psychedelic:{pop:42e9,rock:33e8,soul:3e8,indie:29e6,dreamy:28e5,funk:23e4,electro:17e3,jazz:1500,electronic:150,synth:12},"indie pop":{pop:65e9,indie:65e8,rock:19e7,punk:11e6,rap:11e5,dreamy:1e5,jazz:9e3,funk:900,psychedelic:90,emo:8},punk:{pop:148e9,rock:124e8,metal:51e7,synth:43e6,guitar:41e5,bass:38e4,rap:36e3,electro:3400,dark:330,indie:31},"pop rock":{pop:85e9,rock:85e8,opera:17e7,"80s":17e6,powerful:16e5,punk:14e4,metal:7e3,ballad:500,indie:50,"male voice":4},mellow:{pop:13e9,"lo-fi":13e8,chill:12e7,piano:9e5,acoustic:8e4,jazz:8e3,"hip hop":800,melodic:70,folk:6},electronic:{electro:543e9,pop:162e8,synth:9e8,rock:58e6,beat:51e5,dark:5e5,dance:48e3,metal:4600,bass:440,synthwave:37},ambient:{electro:38e9,electronic:33e8,techno:26e7,trance:24e6,house:22e5,synth:2e5,atmospheric:18e3,pop:1800,piano:170,ethereal:14},piano:{pop:97e9,guitar:85e8,bass:66e7,drum:53e6,emo:49e5,rock:48e4,emotional:41e3,sad:4e3,ballad:390,violin:38},grunge:{rock:45e9,guitar:18e8,metal:17e7,pop:15e6,"alternative rock":15e5,melodic:13e4,dark:9e3,rap:600,"hard rock":60,"male vocals":6},"k-pop":{pop:12e10,beat:14e8,bass:12e7,upbeat:11e6,dance:1e6,synth:9e4,drum:9e3,rock:800,funk:80,dreamy:7},dance:{pop:145e9,electro:58e8,electronic:48e7,beat:36e6,bass:31e5,disco:3e5,synth:3e4,funk:2900,rap:210,house:20},disco:{synth:43e9,pop:4e9,funk:35e7,electro:35e6,dance:3e6,synthwave:3e5,beat:2e4,bass:1800,rock:150,"80s":14},"nu metal":{metal:114e9,rock:52e8,rap:33e7,electro:3e7,electronic:26e5,"alternative rock":25e4,dark:22e3,futuristic:2200,melodic:220,punk:17},sad:{pop:5e10,emo:45e8,piano:4e8,guitar:36e6,dark:33e5,emotional:29e3,rock:2900,ballad:230,"male voice":22},trap:{rap:327e9,bass:6e9,pop:28e7,"hip hop":27e6,beat:25e5,electro:18e4,guitar:18e3,emo:1700,aggressive:170,melodic:16},smooth:{jazz:28e9,pop:26e8,"r&b":22e7,soul:19e6,piano:11e5,beat:11e4,bass:1e4,funk:1e3,guitar:90,catchy:9},"male vocals":{"female vocals":151e9,pop:86e8,rock:5e8,metal:47e6,electro:43e5,bass:41e4,synth:33e3,rap:3200,emo:310,electronic:31},"female vocals":{"male vocals":151e9,pop:35e8,rock:27e7,bass:22e6,electro:22e5,synth:19e4,metal:19e3,electronic:1700,guitar:150,emo:15},upbeat:{beat:366e9,pop:197e8,electro:34e7,rock:28e6,electronic:26e5,"male voice":22e4,bass:22e3,guitar:2100,rap:200,synth:19},groovy:{funk:26e9,rock:22e8,pop:19e7,beat:11e6,bass:11e5,drum:11e4,rap:11e3,metal:1e3,melodic:90,reggae:7},futuristic:{electro:36e9,electronic:35e8,dark:31e7,rock:29e6,metal:27e5,"alternative rock":22e4,"nu metal":22e3,pop:1700,synth:170,beat:14},chill:{synth:45e9,pop:44e8,"lo-fi":35e7,electro:28e6,bass:25e5,electronic:24e4,jazz:21e3,piano:2e3,beat:180,house:17},edm:{pop:58e9,bass:38e8,rock:33e7,electro:27e6,electronic:24e5,beat:22e4,epic:2e4,"male voice":2e3,catchy:190,emo:19},techno:{house:43e9,trance:28e8,ambient:26e7,pop:23e6,bass:18e5,punk:16e4,guitar:16e3,electro:1600,dark:150,rock:15},cantonese:{pop:27e9,rap:19e8,"male voice":11e7,rock:7e6,dreamy:7e5,synth:5e4,opera:4e3,"hip hop":400,drum:40,metal:4},melancholic:{rock:2e10,emo:18e8,pop:15e7,acoustic:15e6,sad:12e5,indie:11e4,bass:11e3,folk:1100,rap:90,synth:9},gospel:{soul:19e9,uplifting:1e9,beat:9e7,"r&b":7e6,rock:7e5,funk:6e4,pop:6e3,blues:50,bass:5},folk:{acoustic:57e9,rock:46e8,pop:35e7,indie:34e6,guitar:3e6,metal:3e5,drum:22e3,"male voice":1800,dark:17},deep:{bass:7e10,house:65e8,"male voice":35e7,rap:29e6,beat:29e5,metal:26e4,"male vocals":26e3,pop:2300,electro:220,rock:22},flute:{piano:25e9,guitar:25e8,violin:15e7,bass:15e6,drum:13e5,epic:13e4,acoustic:11e3,folk:1100,synth:10},soul:{"r&b":69e9,pop:6e9,funk:53e7,blues:48e6,rock:36e5,jazz:34e4,psychedelic:3e4,emo:2900,acoustic:250},blues:{soul:48e9,rock:33e8,guitar:27e7,jazz:27e6,acoustic:19e4,bass:15e3,pop:1300,emo:120,rap:10},romantic:{pop:46e9,guitar:12e8,rap:12e7,ballad:12e6,funk:1e6,piano:1e5,melodic:1e4,experimental:900,violin:90,swing:9},uplifting:{pop:51e9,rock:2e9,drum:15e7,bass:14e6,melodic:13e5,piano:13e4,"hip hop":11e3,gospel:1e3,guitar:90,epic:9},progressive:{metal:54e9,rock:26e8,guitar:26e7,synth:25e6,aggressive:22e5,electro:2e4,house:1900,melodic:180,dark:15},atmospheric:{dark:28e9,piano:24e8,synth:23e7,electro:21e6,pop:19e5,electronic:18e4,ambient:18e3,ethereal:1500,cinematic:140,rock:13},"electric guitar":{guitar:12e10,rock:44e8,metal:29e7,drum:29e6,bass:24e5,catchy:2e5,"90s":16e3,powerful:1400,piano:120,pop:12},violin:{piano:38e9,guitar:29e8,bass:22e7,pop:21e6,drum:19e5,edm:16e4,beat:15e3,"male vocals":1500,flute:150,electro:14},aggressive:{metal:95e9,rap:66e7,rock:39e6,guitar:34e5,"heavy metal":28e4,bass:27e3,phonk:2600,progressive:220,pop:21},phonk:{aggressive:26e8,bass:18e7,rap:9e6,emo:9e5,beat:9e4,drum:8e3,electro:800,piano:80,deep:8},vocaloid:{pop:43e9,funk:32e8,rock:31e7,"j-pop":31e6,bass:23e5,"math rock":23e4,"bounce drop":23e3,"mutation funk":2300,dubstep:220},reggae:{beat:22e9,pop:18e8,dance:15e7,rap:14e6,upbeat:12e5,electro:1e5,melodic:9e3,rock:900,acoustic:80,"male voice":7},ethereal:{pop:19e9,dreamy:16e8,synth:16e7,atmospheric:15e6,ambient:14e5,folk:13e4,emo:12e3,rock:1100,dark:100,electro:9},"math rock":{rock:6e10,funk:43e8,"mutation funk":43e7,"bounce drop":42e6,dubstep:41e5,pop:37e4,"j-pop":34e3,vocaloid:2300,rap:160,edm:10},"female singer":{pop:21e9,synth:15e8,piano:14e7,electronic:12e6,electro:12e5,synthwave:1e5,dark:1e4,atmospheric:1e3,melodic:100,rock:10},intense:{metal:38e9,rock:24e8,epic:23e7,drum:17e6,aggressive:16e5,bass:15e4,guitar:11e3,"heavy metal":80,electro:8},energetic:{pop:3e10,beat:26e8,rock:2e8,synth:19e6,upbeat:19e5,electro:18e4,electronic:13e3,bass:900,guitar:90,drum:8},swing:{electro:66e9,jazz:38e8,funk:27e7,guitar:15e6,violin:13e5,bass:12e3,rock:1200,"lo-fi":110,experimental:10},anthemic:{rock:33e9,pop:21e8,emo:6e7,beat:6e6,melodic:6e5,"male vocals":5e4,catchy:5e3,classical:500,rap:40,dark:4},trance:{techno:28e9,house:24e8,ambient:24e7,pop:12e6,bass:11e5,edm:9e4,guitar:9e3,melodic:80,violin:7},"bounce drop":{funk:48e9,"mutation funk":48e8,dubstep:43e7,rock:42e6,"math rock":42e5,pop:38e4,"j-pop":33e3,vocaloid:2300,rap:160,edm:8},"j-pop":{pop:157e9,rock:57e8,funk:37e7,dubstep:35e6,"mutation funk":35e5,"math rock":34e4,"bounce drop":33e3,vocaloid:3100,bass:150,upbeat:15},dubstep:{rock:54e9,pop:51e8,funk:45e7,"mutation funk":44e6,"bounce drop":43e5,"math rock":41e4,"j-pop":35e3,rap:3100,bass:310,electro:26},"90s":{metal:19e9,guitar:18e8,catchy:18e7,"electric guitar":16e6,rock:13e5,rap:12e4,pop:11e3,dance:700,soul:6},classical:{piano:2e10,guitar:14e8,orchestral:12e7,dark:11e6,rock:11e5,powerful:9e4,pop:8e3,violin:800,dramatic:7},"mutation funk":{funk:52e9,"bounce drop":48e8,dubstep:44e7,rock:43e6,"math rock":43e5,pop:4e5,"j-pop":35e3,vocaloid:2300,rap:140,edm:10}};function l(e){if(0===e.length)throw Error("Array must contain at least one element.");let t=Math.floor(Math.random()*e.length);return e[t]}function u(){let e=l(n),t=l(r),i=l(o),s="aeiou".includes(e[0])?"an":"a";return"".concat(s," ").concat(e," ").concat(t," song about ").concat(i)}function c(){let e=l(n),t=l(r);return"".concat(e," ").concat(t)}function d(e){return e.charAt(0).toUpperCase()+e.slice(1)}let p="rgba(255, 255, 255, 0.7)",h="rgba(255, 255, 255, 0.12)",f="#252020",v={background:"rgba(255, 255, 255, 0.005)",backdropFilter:"blur(50px)",borderImage:"180deg linear-gradient(#383737, #A19F9D)",borderWidth:"0.01px",borderStyle:"solid"},m={background:"rgba(0, 0, 0, 0.05)",backdropFilter:"blur(25px)"},y="rgba(255, 255, 255, 0.08)",g=1250,b=3e3,w="26ced217328f4737497bd6ba6641ca1c",_="client-DaZjubWc7zwnZ5o2EEJhqt4UYRzYRoUuHbTQcIH9Ybq",k="/placeholder-1.jpg",S="07653cdf-8f72-430e-847f-9ab8ac05af40",C="trending",I="profile",P="similar",E="#FBD38D",T="18ea9594-dcb4-4504-8570-b9ac5ade5f60",x=256,A=500,O=20,j=12,M=360,L=100,R=14/232,F=1,D=16,B=14,q=1.143,N=.856,U=12e3,G=1e4,z=9999,J=1e3,V=50},69523:function(e,t,i){"use strict";i.d(t,{AP:function(){return c},HO:function(){return u},Mv:function(){return m},Rc:function(){return l},TA:function(){return v},eC:function(){return f},gS:function(){return a},mO:function(){return y},zz:function(){return d}});var n=i(67958),r=i(69548);async function o(e,t,i){e.POST("/api/gen/{gen_id}/increment_action_count/",{params:{path:{gen_id:t}},body:{action:i}})}function s(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}async function a(e,t,i,n){let s=n||("audio"===i?t.audio_url:t.video_url);if(!s){console.error("No ".concat(i," URL available."));return}o(e,t.id,"audio"===i?"download_audio":"audio-wav"===i?"download_audio_wav":"download_video");let a="".concat((0,r.M8)(t),".").concat("audio"===i?"mp3":"audio-wav"===i?"wav":"mp4");try{let e=await fetch(s);if(!e.ok)throw Error("Network response was not ok: ".concat(e.status));let t=await e.blob(),i=window.URL.createObjectURL(t),n=document.createElement("a");n.href=i,n.download=a,document.body.appendChild(n),n.style.display="none",n.click(),n.remove(),setTimeout(()=>{window.URL.revokeObjectURL(i)},100)}catch(e){console.error("Download failed:",e),alert("Download failed, please try again.")}}async function l(e,t){a(e,t,"audio")}function u(e,t){e.POST("/api/gen/{clip_id}/convert_wav/",{params:{path:{clip_id:t.id}}})}async function c(e,t){return await e.GET("/api/gen/{clip_id}/wav_file/",{params:{path:{clip_id:t.id}}})}async function d(e,t){a(e,t,"video")}let p=e=>"".concat(window.location.origin,"/song/").concat(e.id),h=e=>"".concat(window.location.origin,"/@").concat(e),f=(e,t)=>{let i={url:p(t),title:"Listen to ".concat((0,r.M8)(t)," on Suno! \uD83C\uDFB5")};if(o(e,t.id,"share"),s()&&window.navigator.canShare&&navigator.canShare(i)){try{navigator.share(i)}catch(e){console.error("Error sharing:",e)}return}navigator.clipboard&&window.isSecureContext?navigator.clipboard.writeText("".concat(window.location.origin,"/song/").concat(t.id)).then(()=>{(0,n.Am)({title:"Copied song link to clipboard",status:"success",duration:2e3,isClosable:!0})}).catch(e=>{console.error("Failed to copy: ",e)}):alert("Clipboard not supported. Please copy the URL from the address bar.")},v=e=>{let t="".concat(window.location.origin,"/playlist/").concat(e);navigator.clipboard&&window.isSecureContext?navigator.clipboard.writeText(t).then(()=>{(0,n.Am)({title:"Copied playlist link to clipboard",status:"success",duration:2e3,isClosable:!0})}).catch(e=>{console.error("Failed to copy: ",e),alert("Clipboard not supported. Please manually copy the URL from the address bar.")}):alert("Clipboard not supported. Please manually copy the URL from the address bar.")},m=e=>{let t={url:h(e.handle),title:"Listen to ".concat(e.display_name||e.handle," on Suno! \uD83C\uDFB5")};if(s()&&window.navigator.canShare&&navigator.canShare(t)){try{navigator.share(t)}catch(e){console.error("Error sharing:",e)}return}navigator.clipboard&&window.isSecureContext?navigator.clipboard.writeText(h(e.handle)).then(()=>{(0,n.Am)({title:"Copied profile link to clipboard",status:"success",duration:2e3,isClosable:!0})}).catch(e=>{console.error("Failed to copy: ",e)}):alert("Clipboard not supported. Please copy the URL from the address bar.")},y=e=>{let t="".concat(window.location.origin,"/radio/song/").concat(e);navigator.clipboard&&window.isSecureContext?navigator.clipboard.writeText(t).then(()=>{(0,n.Am)({title:"Copied radio link to clipboard",status:"success",duration:2e3,isClosable:!0})}).catch(e=>{console.error("Failed to copy: ",e),alert("Clipboard not supported. Please manually copy the URL from the address bar.")}):alert("Clipboard not supported. Please manually copy the URL from the address bar.")}},55499:function(e,t,i){"use strict";i.d(t,{BB:function(){return r},OB:function(){return o},r8:function(){return n}});let n=!1,r=!0,o="production"},64874:function(e,t,i){"use strict";i.d(t,{g:function(){return v}});var n=i(4681),r=i.n(n),o=i(1633),s=i(55499),a=i(25566),l="bkz9921ndc.execute-api.us-east-2.amazonaws",u="https://".concat(l,".com"),c="".concat(u,"/dev-testing/metrics/v1"),d=c.split("://")[1],p=i(92115);let h=o.Me;class f{constructor(){this.initialized=!1,this.identified=!1,this.init=()=>{if(!h){console.error("Mixpanel token not found");return}this.mixpanelClient&&(this.mixpanelClient.init(h,{track_pageview:!0}),this.initialized=!0),function(){location.hostname.endsWith(".com")?(l="metrics-prod.suno",u="https://".concat(l,".com"),d=(c="".concat(u,"/metrics")).split("://")[1]):s.BB&&(l="metrics-testing.suno",u="https://".concat(l,".fm"),d=(c="".concat(u,"/metrics")).split("://")[1]);var e,t,i,n,r,o,p,h={8878:function(e,t,i){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(i(325));function o(e,t){return function(){var i=this.traits(),n=this.properties?this.properties():{};return r.default(i,"address."+e)||r.default(i,e)||(t?r.default(i,"address."+t):null)||(t?r.default(i,t):null)||r.default(n,"address."+e)||r.default(n,e)||(t?r.default(n,"address."+t):null)||(t?r.default(n,t):null)}}t.default=function(e){e.zip=o("postalCode","zip"),e.country=o("country"),e.street=o("street"),e.state=o("state"),e.city=o("city"),e.region=o("region")}},4780:function(e,t,i){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Alias=void 0;var r=n(i(1285)),o=i(9512);function s(e,t){o.Facade.call(this,e,t)}t.Alias=s,r.default(s,o.Facade),s.prototype.action=function(){return"alias"},s.prototype.type=s.prototype.action,s.prototype.previousId=function(){return this.field("previousId")||this.field("from")},s.prototype.from=s.prototype.previousId,s.prototype.userId=function(){return this.field("userId")||this.field("to")},s.prototype.to=s.prototype.userId},4814:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.clone=void 0,t.clone=function e(t){if("[object Object]"===Object.prototype.toString.call(t)){var i={};for(var n in t)i[n]=e(t[n]);return i}return Array.isArray(t)?t.map(e):t}},5257:function(e,t,i){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Delete=void 0;var r=n(i(1285)),o=i(9512);function s(e,t){o.Facade.call(this,e,t)}t.Delete=s,r.default(s,o.Facade),s.prototype.type=function(){return"delete"}},9512:function(e,t,i){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Facade=void 0;var r=n(i(8878)),o=i(4814),s=n(i(2272)),a=n(i(5870)),l=n(i(325)),u=n(i(6279));function c(e,t){t=t||{},this.raw=o.clone(e),"clone"in t||(t.clone=!0),t.clone&&(e=o.clone(e)),"traverse"in t||(t.traverse=!0),e.timestamp="timestamp"in e?a.default(e.timestamp):new Date,t.traverse&&u.default(e),this.opts=t,this.obj=e}t.Facade=c;var d=c.prototype;d.proxy=function(e){var t,i=e.split("."),n=this[e=i.shift()]||this.field(e);return n?("function"==typeof n&&(n=n.call(this)||{}),0===i.length||(n=l.default(n,i.join("."))),this.opts.clone?(t=n,o.clone(t)):n):n},d.field=function(e){var t=this.obj[e];return this.opts.clone?o.clone(t):t},c.proxy=function(e){return function(){return this.proxy(e)}},c.field=function(e){return function(){return this.field(e)}},c.multi=function(e){return function(){var t=this.proxy(e+"s");if(Array.isArray(t))return t;var i=this.proxy(e);return i&&(i=[this.opts.clone?o.clone(i):i]),i||[]}},c.one=function(e){return function(){var t=this.proxy(e);if(t)return t;var i=this.proxy(e+"s");return Array.isArray(i)?i[0]:void 0}},d.json=function(){var e=this.opts.clone?o.clone(this.obj):this.obj;return this.type&&(e.type=this.type()),e},d.rawEvent=function(){return this.raw},d.options=function(e){var t=this.obj.options||this.obj.context||{},i=this.opts.clone?o.clone(t):t;if(!e)return i;if(this.enabled(e)){var n=this.integrations(),r=n[e]||l.default(n,e);return"object"!=typeof r&&(r=l.default(this.options(),e)),"object"==typeof r?r:{}}},d.context=d.options,d.enabled=function(e){var t=this.proxy("options.providers.all");"boolean"!=typeof t&&(t=this.proxy("options.all")),"boolean"!=typeof t&&(t=this.proxy("integrations.all")),"boolean"!=typeof t&&(t=!0);var i=t&&s.default(e),n=this.integrations();if(n.providers&&n.providers.hasOwnProperty(e)&&(i=n.providers[e]),n.hasOwnProperty(e)){var r=n[e];i="boolean"!=typeof r||r}return!!i},d.integrations=function(){return this.obj.integrations||this.proxy("options.providers")||this.options()},d.active=function(){var e=this.proxy("options.active");return null==e&&(e=!0),e},d.anonymousId=function(){return this.field("anonymousId")||this.field("sessionId")},d.sessionId=d.anonymousId,d.groupId=c.proxy("options.groupId"),d.traits=function(e){var t=this.proxy("options.traits")||{},i=this.userId();for(var n in e=e||{},i&&(t.id=i),e){var r=null==this[n]?this.proxy("options.traits."+n):this[n]();null!=r&&(t[e[n]]=r,delete t[n])}return t},d.library=function(){var e=this.proxy("options.library");return e?"string"==typeof e?{name:e,version:null}:e:{name:"unknown",version:null}},d.device=function(){var e=this.proxy("context.device");"object"==typeof e&&null!==e||(e={});var t=this.library().name;return e.type||(t.indexOf("ios")>-1&&(e.type="ios"),t.indexOf("android")>-1&&(e.type="android")),e},d.userAgent=c.proxy("context.userAgent"),d.timezone=c.proxy("context.timezone"),d.timestamp=c.field("timestamp"),d.channel=c.field("channel"),d.ip=c.proxy("context.ip"),d.userId=c.field("userId"),r.default(d)},615:function(e,t,i){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Group=void 0;var r=n(i(1285)),o=n(i(4554)),s=n(i(5870)),a=i(9512);function l(e,t){a.Facade.call(this,e,t)}t.Group=l,r.default(l,a.Facade);var u=l.prototype;u.action=function(){return"group"},u.type=u.action,u.groupId=a.Facade.field("groupId"),u.created=function(){var e=this.proxy("traits.createdAt")||this.proxy("traits.created")||this.proxy("properties.createdAt")||this.proxy("properties.created");if(e)return s.default(e)},u.email=function(){var e=this.proxy("traits.email");if(e)return e;var t=this.groupId();return o.default(t)?t:void 0},u.traits=function(e){var t=this.properties(),i=this.groupId();for(var n in e=e||{},i&&(t.id=i),e){var r=null==this[n]?this.proxy("traits."+n):this[n]();null!=r&&(t[e[n]]=r,delete t[n])}return t},u.name=a.Facade.proxy("traits.name"),u.industry=a.Facade.proxy("traits.industry"),u.employees=a.Facade.proxy("traits.employees"),u.properties=function(){return this.field("traits")||this.field("properties")||{}}},4705:function(e,t,i){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Identify=void 0;var r=i(9512),o=n(i(325)),s=n(i(1285)),a=n(i(4554)),l=n(i(5870)),u=function(e){return e.trim()};function c(e,t){r.Facade.call(this,e,t)}t.Identify=c,s.default(c,r.Facade);var d=c.prototype;d.action=function(){return"identify"},d.type=d.action,d.traits=function(e){var t=this.field("traits")||{},i=this.userId();for(var n in e=e||{},i&&(t.id=i),e){var r=null==this[n]?this.proxy("traits."+n):this[n]();null!=r&&(t[e[n]]=r,n!==e[n]&&delete t[n])}return t},d.email=function(){var e=this.proxy("traits.email");if(e)return e;var t=this.userId();return a.default(t)?t:void 0},d.created=function(){var e=this.proxy("traits.created")||this.proxy("traits.createdAt");if(e)return l.default(e)},d.companyCreated=function(){var e=this.proxy("traits.company.created")||this.proxy("traits.company.createdAt");if(e)return l.default(e)},d.companyName=function(){return this.proxy("traits.company.name")},d.name=function(){var e=this.proxy("traits.name");if("string"==typeof e)return u(e);var t=this.firstName(),i=this.lastName();return t&&i?u(t+" "+i):void 0},d.firstName=function(){var e=this.proxy("traits.firstName");if("string"==typeof e)return u(e);var t=this.proxy("traits.name");return"string"==typeof t?u(t).split(" ")[0]:void 0},d.lastName=function(){var e=this.proxy("traits.lastName");if("string"==typeof e)return u(e);var t=this.proxy("traits.name");if("string"==typeof t){var i=u(t).indexOf(" ");if(-1!==i)return u(t.substr(i+1))}},d.uid=function(){return this.userId()||this.username()||this.email()},d.description=function(){return this.proxy("traits.description")||this.proxy("traits.background")},d.age=function(){var e=this.birthday(),t=o.default(this.traits(),"age");return null!=t?t:e instanceof Date?(new Date).getFullYear()-e.getFullYear():void 0},d.avatar=function(){var e=this.traits();return o.default(e,"avatar")||o.default(e,"photoUrl")||o.default(e,"avatarUrl")},d.position=function(){var e=this.traits();return o.default(e,"position")||o.default(e,"jobTitle")},d.username=r.Facade.proxy("traits.username"),d.website=r.Facade.one("traits.website"),d.websites=r.Facade.multi("traits.website"),d.phone=r.Facade.one("traits.phone"),d.phones=r.Facade.multi("traits.phone"),d.address=r.Facade.proxy("traits.address"),d.gender=r.Facade.proxy("traits.gender"),d.birthday=r.Facade.proxy("traits.birthday")},4122:function(e,t,i){var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Delete=t.Screen=t.Page=t.Track=t.Identify=t.Group=t.Alias=t.Facade=void 0;var r=i(9512);Object.defineProperty(t,"Facade",{enumerable:!0,get:function(){return r.Facade}});var o=i(4780);Object.defineProperty(t,"Alias",{enumerable:!0,get:function(){return o.Alias}});var s=i(615);Object.defineProperty(t,"Group",{enumerable:!0,get:function(){return s.Group}});var a=i(4705);Object.defineProperty(t,"Identify",{enumerable:!0,get:function(){return a.Identify}});var l=i(5480);Object.defineProperty(t,"Track",{enumerable:!0,get:function(){return l.Track}});var u=i(5926);Object.defineProperty(t,"Page",{enumerable:!0,get:function(){return u.Page}});var c=i(1207);Object.defineProperty(t,"Screen",{enumerable:!0,get:function(){return c.Screen}});var d=i(5257);Object.defineProperty(t,"Delete",{enumerable:!0,get:function(){return d.Delete}}),t.default=n(n({},r.Facade),{Alias:o.Alias,Group:s.Group,Identify:a.Identify,Track:l.Track,Page:u.Page,Screen:c.Screen,Delete:d.Delete})},4554:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=/.+\@.+\..+/;t.default=function(e){return i.test(e)}},2272:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i={Salesforce:!0};t.default=function(e){return!i[e]}},5926:function(e,t,i){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Page=void 0;var r=n(i(1285)),o=i(9512),s=i(5480),a=n(i(4554));function l(e,t){o.Facade.call(this,e,t)}t.Page=l,r.default(l,o.Facade);var u=l.prototype;u.action=function(){return"page"},u.type=u.action,u.category=o.Facade.field("category"),u.name=o.Facade.field("name"),u.title=o.Facade.proxy("properties.title"),u.path=o.Facade.proxy("properties.path"),u.url=o.Facade.proxy("properties.url"),u.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},u.properties=function(e){var t=this.field("properties")||{},i=this.category(),n=this.name();for(var r in e=e||{},i&&(t.category=i),n&&(t.name=n),e){var o=null==this[r]?this.proxy("properties."+r):this[r]();null!=o&&(t[e[r]]=o,r!==e[r]&&delete t[r])}return t},u.email=function(){var e=this.proxy("context.traits.email")||this.proxy("properties.email");if(e)return e;var t=this.userId();return a.default(t)?t:void 0},u.fullName=function(){var e=this.category(),t=this.name();return t&&e?e+" "+t:t},u.event=function(e){return e?"Viewed "+e+" Page":"Loaded a Page"},u.track=function(e){var t=this.json();return t.event=this.event(e),t.timestamp=this.timestamp(),t.properties=this.properties(),new s.Track(t,this.opts)}},1207:function(e,t,i){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Screen=void 0;var r=n(i(1285)),o=i(5926),s=i(5480);function a(e,t){o.Page.call(this,e,t)}t.Screen=a,r.default(a,o.Page),a.prototype.action=function(){return"screen"},a.prototype.type=a.prototype.action,a.prototype.event=function(e){return e?"Viewed "+e+" Screen":"Loaded a Screen"},a.prototype.track=function(e){var t=this.json();return t.event=this.event(e),t.timestamp=this.timestamp(),t.properties=this.properties(),new s.Track(t,this.opts)}},5480:function(e,t,i){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Track=void 0;var r=n(i(1285)),o=i(9512),s=i(4705),a=n(i(4554)),l=n(i(325));function u(e,t){o.Facade.call(this,e,t)}t.Track=u,r.default(u,o.Facade);var c=u.prototype;c.action=function(){return"track"},c.type=c.action,c.event=o.Facade.field("event"),c.value=o.Facade.proxy("properties.value"),c.category=o.Facade.proxy("properties.category"),c.id=o.Facade.proxy("properties.id"),c.productId=function(){return this.proxy("properties.product_id")||this.proxy("properties.productId")},c.promotionId=function(){return this.proxy("properties.promotion_id")||this.proxy("properties.promotionId")},c.cartId=function(){return this.proxy("properties.cart_id")||this.proxy("properties.cartId")},c.checkoutId=function(){return this.proxy("properties.checkout_id")||this.proxy("properties.checkoutId")},c.paymentId=function(){return this.proxy("properties.payment_id")||this.proxy("properties.paymentId")},c.couponId=function(){return this.proxy("properties.coupon_id")||this.proxy("properties.couponId")},c.wishlistId=function(){return this.proxy("properties.wishlist_id")||this.proxy("properties.wishlistId")},c.reviewId=function(){return this.proxy("properties.review_id")||this.proxy("properties.reviewId")},c.orderId=function(){return this.proxy("properties.id")||this.proxy("properties.order_id")||this.proxy("properties.orderId")},c.sku=o.Facade.proxy("properties.sku"),c.tax=o.Facade.proxy("properties.tax"),c.name=o.Facade.proxy("properties.name"),c.price=o.Facade.proxy("properties.price"),c.total=o.Facade.proxy("properties.total"),c.repeat=o.Facade.proxy("properties.repeat"),c.coupon=o.Facade.proxy("properties.coupon"),c.shipping=o.Facade.proxy("properties.shipping"),c.discount=o.Facade.proxy("properties.discount"),c.shippingMethod=function(){return this.proxy("properties.shipping_method")||this.proxy("properties.shippingMethod")},c.paymentMethod=function(){return this.proxy("properties.payment_method")||this.proxy("properties.paymentMethod")},c.description=o.Facade.proxy("properties.description"),c.plan=o.Facade.proxy("properties.plan"),c.subtotal=function(){var e=l.default(this.properties(),"subtotal"),t=this.total()||this.revenue();if(e)return e;if(!t)return 0;if(this.total()){var i=this.tax();i&&(t-=i),(i=this.shipping())&&(t-=i),(i=this.discount())&&(t+=i)}return t},c.products=function(){var e=this.properties(),t=l.default(e,"products");return Array.isArray(t)?t.filter(function(e){return null!==e}):[]},c.quantity=function(){return(this.obj.properties||{}).quantity||1},c.currency=function(){return(this.obj.properties||{}).currency||"USD"},c.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},c.query=o.Facade.proxy("options.query"),c.properties=function(e){var t=this.field("properties")||{};for(var i in e=e||{}){var n=null==this[i]?this.proxy("properties."+i):this[i]();null!=n&&(t[e[i]]=n,delete t[i])}return t},c.username=function(){return this.proxy("traits.username")||this.proxy("properties.username")||this.userId()||this.sessionId()},c.email=function(){var e=this.proxy("traits.email")||this.proxy("properties.email")||this.proxy("options.traits.email");if(e)return e;var t=this.userId();return a.default(t)?t:void 0},c.revenue=function(){var e=this.proxy("properties.revenue"),t=this.event();return!e&&t&&t.match(/^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i)&&(e=this.proxy("properties.total")),function(e){if(e&&("number"==typeof e||"string"==typeof e&&!isNaN(e=parseFloat(e=e.replace(/\$/g,"")))))return e}(e)},c.cents=function(){var e=this.revenue();return"number"!=typeof e?this.value()||0:100*e},c.identify=function(){var e=this.json();return e.traits=this.traits(),new s.Identify(e,this.opts)}},6279:function(e,t,i){var n=i(8264);e.exports=function e(t,i){var r,o;return void 0===i&&(i=!0),t&&"object"==typeof t?(r=i,Object.keys(t).forEach(function(i){t[i]=e(t[i],r)}),t):Array.isArray(t)?(o=i,t.forEach(function(i,n){t[n]=e(i,o)}),t):n.is(t,i)?n.parse(t):t}},8264:function(e,t){var i=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;t.parse=function(e){var t=[1,5,6,7,11,12],n=i.exec(e),r=0;if(!n)return new Date(e);for(var o,s=0;o=t[s];s++)n[o]=parseInt(n[o],10)||0;return n[2]=parseInt(n[2],10)||1,n[3]=parseInt(n[3],10)||1,n[2]--,n[8]=n[8]?(n[8]+"00").substring(0,3):0," "===n[4]?r=(new Date).getTimezoneOffset():"Z"!==n[9]&&n[10]&&(r=60*n[11]+n[12],"+"===n[10]&&(r=0-r)),new Date(Date.UTC(n[1],n[2],n[3],n[5],n[6]+r,n[7],n[8]))},t.is=function(e,t){return"string"==typeof e&&(!t||!1!==/^\d{4}-\d{2}-\d{2}/.test(e))&&i.test(e)}},1285:function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}}},5870:function(e,t,i){var n=i(8264),r=i(5228),o=i(6076),s=Object.prototype.toString;e.exports=function(e){return"[object Date]"===s.call(e)?e:"[object Number]"===s.call(e)?new Date(e<315576e5?1e3*e:e):n.is(e)?n.parse(e):r.is(e)?r.parse(e):o.is(e)?o.parse(e):new Date(e)}},5228:function(e,t){var i=/\d{13}/;t.is=function(e){return i.test(e)},t.parse=function(e){return new Date(e=parseInt(e,10))}},6076:function(e,t){var i=/\d{10}/;t.is=function(e){return i.test(e)},t.parse=function(e){return new Date(1e3*parseInt(e,10))}},325:function(e){function t(e){return function(t,i,n,o){var s,a=o&&"function"==typeof o.normalizer?o.normalizer:r;i=a(i);for(var l=!1;!l;)(function(){for(s in t){var e=a(s);if(0===i.indexOf(e)){var n=i.substr(e.length);if("."===n.charAt(0)||0===n.length){i=n.substr(1);var r=t[s];return null==r?void(l=!0):i.length?void(t=r):void(l=!0)}}}s=void 0,l=!0})();if(s)return null==t?t:e(t,s,n)}}function i(e,t){return e.hasOwnProperty(t)&&delete e[t],e}function n(e,t,i){return e.hasOwnProperty(t)&&(e[t]=i),e}function r(e){return e.replace(/[^a-zA-Z0-9\.]+/g,"").toLowerCase()}e.exports=t(function(e,t){if(e.hasOwnProperty(t))return e[t]}),e.exports.find=e.exports,e.exports.replace=function(e,i,r,o){return t(n).call(this,e,i,r,o),e},e.exports.del=function(e,n,r){return t(i).call(this,e,n,null,r),e}},94:function(e,t,i){i.d(t,{G:function(){return r},s:function(){return o}});var n=i(204);function r(){return!(0,n.j)()||window.navigator.onLine}function o(){return!r()}},4328:function(e,t,i){i.d(t,{U:function(){return n}});var n="".concat(d)},8404:function(e,t,i){i.d(t,{_:function(){return s}});var n=i(5163),r=i(1494),o=i(6218),s=function(e){function t(t,i){return e.call(this,t,i,new o.j)||this}return(0,n.ZT)(t,e),t.system=function(){return new this({type:"track",event:"system"})},t}(r._)},204:function(e,t,i){function n(){return!0}function r(){return!1}i.d(t,{j:function(){return n},s:function(){return r}})},6863:function(e,t,i){function n(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}}i.d(t,{a:function(){return n}})},6218:function(e,t,i){i.d(t,{j:function(){return a}});var n,r=i(5163),o=i(417),s=i(449),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.ZT)(t,e),t.initRemoteMetrics=function(e){n=new s.B(e)},t.prototype.increment=function(t,i,r){e.prototype.increment.call(this,t,i,r),null==n||n.increment(t,null!=r?r:[])},t}(o.s)},98:function(e,t,i){function n(e,t){var i=t.methodName,n=t.integrationName,r=t.type,o=t.didError;e.stats.increment("analytics_js.integration.invoke".concat(void 0!==o&&o?".error":""),1,["method:".concat(i),"integration_name:".concat(n),"type:".concat(r)])}i.d(t,{z:function(){return n}})},449:function(e,t,i){i.d(t,{B:function(){return u}});var n=i(5163),r=i(4759),o=i(4278),s=i(6175),a=i(4328);function l(e){console.error("Error sending segment performance metrics",e)}var u=function(){function e(e){var t,i,n,r,o,s=this;if(this.host=null!==(t=null==e?void 0:e.host)&&void 0!==t?t:a.U,this.sampleRate=null!==(i=null==e?void 0:e.sampleRate)&&void 0!==i?i:1,this.flushTimer=null!==(n=null==e?void 0:e.flushTimer)&&void 0!==n?n:3e4,this.maxQueueSize=null!==(r=null==e?void 0:e.maxQueueSize)&&void 0!==r?r:20,this.protocol=null!==(o=null==e?void 0:e.protocol)&&void 0!==o?o:"https",this.queue=[],this.sampleRate>0){var u=!1,c=function(){u||(u=!0,s.flush().catch(l),u=!1,setTimeout(c,s.flushTimer))};c()}}return e.prototype.increment=function(e,t){if(e.includes("analytics_js.")&&0!==t.length&&!(Math.random()>this.sampleRate||this.queue.length>=this.maxQueueSize)){var i,r,a=(i=(0,s.B)(),r=t.reduce(function(e,t){var i=t.split(":"),n=i[0],r=i[1];return e[n]=r,e},{}),{type:"Counter",metric:e,value:1,tags:(0,n.pi)((0,n.pi)({},r),{library:"analytics.js",library_version:"web"===i?"next-".concat(o.i):"npm:next-".concat(o.i)})});this.queue.push(a),e.includes("error")&&this.flush().catch(l)}},e.prototype.flush=function(){return(0,n.mG)(this,void 0,Promise,function(){var e=this;return(0,n.Jh)(this,function(t){switch(t.label){case 0:return this.queue.length<=0?[2]:[4,this.send().catch(function(t){l(t),e.sampleRate=0})];case 1:return t.sent(),[2]}})})},e.prototype.send=function(){return(0,n.mG)(this,void 0,Promise,function(){var e,t,i;return(0,n.Jh)(this,function(n){return e={series:this.queue},this.queue=[],t={"Content-Type":"application/json"},i="".concat(this.protocol,"://").concat(this.host,"/m"),[2,(0,r.h)(i,{headers:t,body:JSON.stringify(e),method:"PUT"})]})})},e}()},4278:function(e,t,i){i.d(t,{i:function(){return n}});var n="1.70.0"},584:function(e,t,i){i.d(t,{M:function(){return n}});try{window.analyticsWriteKey="suno"}catch(e){}function n(){if(void 0!==window.analyticsWriteKey)return"__WRITE_KEY__"!==window.analyticsWriteKey?window.analyticsWriteKey:void 0}},4759:function(e,t,i){function n(e,t){return t=t||{},new Promise(function(i,n){var r=new XMLHttpRequest,o=[],s=[],a={},l=function(){return{ok:2==(r.status/100|0),statusText:r.statusText,status:r.status,url:r.responseURL,text:function(){return Promise.resolve(r.responseText)},json:function(){return Promise.resolve(JSON.parse(r.responseText))},blob:function(){return Promise.resolve(new Blob([r.response]))},clone:l,headers:{keys:function(){return o},entries:function(){return s},get:function(e){return a[e.toLowerCase()]},has:function(e){return e.toLowerCase() in a}}}};for(var u in r.open(t.method||"get",e,!0),r.onload=function(){r.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(e,t,i){o.push(t=t.toLowerCase()),s.push([t,i]),a[t]=a[t]?a[t]+","+i:i}),i(l())},r.onerror=n,r.withCredentials="include"==t.credentials,t.headers)r.setRequestHeader(u,t.headers[u]);r.send(t.body||null)})}i.d(t,{h:function(){return o}});var r=i(3744),o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=(0,r.R)();return(i&&i.fetch||n).apply(void 0,e)}},3744:function(e,t,i){i.d(t,{R:function(){return n}});var n=function(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:window}},6249:function(e,t,i){i.d(t,{jV:function(){return o},ql:function(){return s},wI:function(){return r}});var n="analytics";function r(){return window[n]}function o(e){n=e}function s(e){window[n]=e}},7070:function(e,t,i){function n(e){return Array.prototype.slice.call(window.document.querySelectorAll("script")).find(function(t){return t.src===e})}function r(e,t){var i=n(e);if(void 0!==i){var r=null==i?void 0:i.getAttribute("status");if("loaded"===r)return Promise.resolve(i);if("loading"===r)return new Promise(function(e,t){i.addEventListener("load",function(){return e(i)}),i.addEventListener("error",function(e){return t(e)})})}return new Promise(function(i,n){var r,o=window.document.createElement("script");o.type="text/javascript",o.src=e,o.async=!0,o.setAttribute("status","loading");for(var s=0,a=Object.entries(null!=t?t:{});s<a.length;s++){var l=a[s],u=l[0],c=l[1];o.setAttribute(u,c)}o.onload=function(){o.onerror=o.onload=null,o.setAttribute("status","loaded"),i(o)},o.onerror=function(){o.onerror=o.onload=null,o.setAttribute("status","error"),n(Error("Failed to load ".concat(e)))};var d=window.document.getElementsByTagName("script")[0];null===(r=d.parentElement)||void 0===r||r.insertBefore(o,d)})}function o(e){var t=n(e);return void 0!==t&&t.remove(),Promise.resolve()}i.d(t,{t:function(){return o},v:function(){return r}})},5944:function(e,t,i){i.d(t,{o:function(){return r}});var n=i(5163);function r(e,t){var i,r=Object.entries(null!==(i=t.integrations)&&void 0!==i?i:{}).reduce(function(e,t){var i,r,o=t[0],s=t[1];return"object"==typeof s?(0,n.pi)((0,n.pi)({},e),((i={})[o]=s,i)):(0,n.pi)((0,n.pi)({},e),((r={})[o]={},r))},{});return Object.entries(e.integrations).reduce(function(e,t){var i,o=t[0],s=t[1];return(0,n.pi)((0,n.pi)({},e),((i={})[o]=(0,n.pi)((0,n.pi)({},s),r[o]),i))},{})}},8044:function(e,t,i){i.d(t,{x:function(){return r}});var n=i(5163),r=function(e,t){return(0,n.mG)(void 0,void 0,Promise,function(){var i;return(0,n.Jh)(this,function(r){return[2,(i=function(r){return(0,n.mG)(void 0,void 0,Promise,function(){var o;return(0,n.Jh)(this,function(n){switch(n.label){case 0:return e(r)?(o=i,[4,t()]):[3,2];case 1:return[2,o.apply(void 0,[n.sent()])];case 2:return[2]}})})})(void 0)]})})}},7566:function(e,t,i){i.d(t,{Kg:function(){return u},UH:function(){return a},Vl:function(){return l},YM:function(){return d}});var n,r=i(6249),o=i(584),s=/(https:\/\/.*)\/analytics\.js\/v1\/(?:.*?)\/(?:platform|analytics.*)?/,a=function(e){var t=(0,r.wI)();t&&(t._cdn=e),n=e},l=function(){var e,t,i=null!=n?n:null===(t=(0,r.wI)())||void 0===t?void 0:t._cdn;return i||(Array.prototype.slice.call(document.querySelectorAll("script")).forEach(function(t){var i,n=null!==(i=t.getAttribute("src"))&&void 0!==i?i:"",r=s.exec(n);r&&r[1]&&(e=r[1])}),e||c)},u=function(){var e=l();return"".concat(e,"/next-integrations")};function d(){for(var e,t,i,n=null!==(e=(0,o.M)())&&void 0!==e?e:null===(t=(0,r.wI)())||void 0===t?void 0:t._writeKey,a=void 0,l=0,u=Array.prototype.slice.call(document.querySelectorAll("script"));l<u.length;l++){var c=null!==(i=u[l].getAttribute("src"))&&void 0!==i?i:"",d=s.exec(c);if(d&&d[1]){a=c;break}}return a?a.replace("analytics.min.js","analytics.classic.js"):"https://cdn.segment.com/analytics.js/v1/".concat(n,"/analytics.classic.js")}},3061:function(e,t,i){i.d(t,{$:function(){return p}});var n=i(5163),r=i(3098),o=i(8404),s=i(204),a={getItem:function(){},setItem:function(){},removeItem:function(){}};try{a=(0,s.j)()&&window.localStorage?window.localStorage:a}catch(e){console.warn("Unable to access localStorage",e)}function l(e){var t=a.getItem(e);return(t?JSON.parse(t):[]).map(function(e){return new o._(e.event,e.id)})}function u(e){var t=a.getItem(e);return t?JSON.parse(t):{}}function c(e){a.removeItem(e)}function d(e,t,i){void 0===i&&(i=0);var n="persisted-queue:v1:".concat(e,":lock"),r=a.getItem(n),o=r?JSON.parse(r):null,s=null===o||(new Date).getTime()>o;if(s)return a.setItem(n,JSON.stringify((new Date).getTime()+50)),t(),void a.removeItem(n);!s&&i<3?setTimeout(function(){d(e,t,i+1)},50):console.error("Unable to retrieve lock")}var p=function(e){function t(t,i){var r=e.call(this,t,[])||this,o="persisted-queue:v1:".concat(i,":items"),s="persisted-queue:v1:".concat(i,":seen"),p=[],h={};return d(i,function(){try{p=l(o),h=u(s),c(o),c(s),r.queue=(0,n.ev)((0,n.ev)([],p,!0),r.queue,!0),r.seen=(0,n.pi)((0,n.pi)({},h),r.seen)}catch(e){console.error(e)}}),window.addEventListener("pagehide",function(){if(r.todo>0){var e=(0,n.ev)((0,n.ev)([],r.queue,!0),r.future,!0);try{d(i,function(){var t,i,c,d;t=l(o),i=(0,n.ev)((0,n.ev)([],e,!0),t,!0).reduce(function(e,t){var i;return(0,n.pi)((0,n.pi)({},e),((i={})[t.id]=t,i))},{}),a.setItem(o,JSON.stringify(Object.values(i))),c=r.seen,d=u(s),a.setItem(s,JSON.stringify((0,n.pi)((0,n.pi)({},d),c)))})}catch(e){console.error(e)}}}),r}return(0,n.ZT)(t,e),t}(r.Z)},9950:function(e,t,i){i.d(t,{D:function(){return r}});var n=i(4122);function r(e,t){var i=new n.Facade(e,t);return"track"===e.type&&(i=new n.Track(e,t)),"identify"===e.type&&(i=new n.Identify(e,t)),"page"===e.type&&(i=new n.Page(e,t)),"alias"===e.type&&(i=new n.Alias(e,t)),"group"===e.type&&(i=new n.Group(e,t)),"screen"===e.type&&(i=new n.Screen(e,t)),Object.defineProperty(i,"obj",{value:e,writable:!0}),i}},6175:function(e,t,i){i.d(t,{B:function(){return o},X:function(){return r}});var n="npm";function r(e){n=e}function o(){return n}},6338:function(e,t,i){i.r(t),i.d(t,{applyDestinationMiddleware:function(){return s},sourceMiddlewarePlugin:function(){return a}});var n=i(5163),r=i(1494),o=i(9950);function s(e,t,i){return(0,n.mG)(this,void 0,Promise,function(){var r,s,a,l,u;return(0,n.Jh)(this,function(c){switch(c.label){case 0:r=(0,o.D)(t,{clone:!0,traverse:!1}).rawEvent(),s=0,a=i,c.label=1;case 1:return s<a.length?(l=a[s],[4,function(t,i){return(0,n.mG)(this,void 0,Promise,function(){var r,s,a;return(0,n.Jh)(this,function(l){switch(l.label){case 0:return r=!1,s=null,[4,i({payload:(0,o.D)(t,{clone:!0,traverse:!1}),integration:e,next:function(e){r=!0,null===e&&(s=null),e&&(s=e.obj)}})];case 1:return l.sent(),r||null===s||(s.integrations=(0,n.pi)((0,n.pi)({},t.integrations),((a={})[e]=!1,a))),[2,s]}})})}(r,l)]):[3,4];case 2:if(null===(u=c.sent()))return[2,null];r=u,c.label=3;case 3:return s++,[3,1];case 4:return[2,r]}})})}function a(e,t){function i(i){return(0,n.mG)(this,void 0,Promise,function(){var s;return(0,n.Jh)(this,function(n){switch(n.label){case 0:return s=!1,[4,e({payload:(0,o.D)(i.event,{clone:!0,traverse:!1}),integrations:null!=t?t:{},next:function(e){s=!0,e&&(i.event=e.obj)}})];case 1:if(n.sent(),!s)throw new r.Y({retry:!1,type:"middleware_cancellation",reason:"Middleware `next` function skipped"});return[2,i]}})})}return{name:"Source Middleware ".concat(e.name),type:"before",version:"0.1.0",isLoaded:function(){return!0},load:function(e){return Promise.resolve(e)},track:i,page:i,identify:i,alias:i,group:i}}},5163:function(e,t,i){i.d(t,{Jh:function(){return l},ZT:function(){return r},_T:function(){return s},ev:function(){return u},mG:function(){return a},pi:function(){return o}});var n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)};function r(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var o=function(){return(o=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function s(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)0>t.indexOf(n[r])&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i}function a(e,t,i,n){return new(i||(i=Promise))(function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}l((n=n.apply(e,t||[])).next())})}function l(e,t){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(i)throw TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(i=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){s.label=a[1];break}if(6===a[0]&&s.label<r[1]){s.label=r[1],r=a;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(a);break}r[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{i=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}function u(e,t,i){if(i||2==arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))}},888:function(e,t,i){function n(e,t){return new Promise(function(i,n){var r=setTimeout(function(){n(Error("Promise timed out"))},t);e.then(function(e){return clearTimeout(r),i(e)}).catch(n)})}function r(e,t,i){return new Promise(function(e){return setTimeout(e,i)}).then(function(){return n(function(){try{return Promise.resolve(t(e))}catch(e){return Promise.reject(e)}}(),1e3)}).catch(function(t){null==e||e.log("warn","Callback Error",{error:t}),null==e||e.stats.increment("callback_error")}).then(function(){return e})}i.d(t,{FJ:function(){return n},UI:function(){return r}})},1494:function(e,t,i){i.d(t,{Y:function(){return l},_:function(){return u}});var n=i(7831),r=i(380),o=i(5163),s=function(){function e(){this._logs=[]}return e.prototype.log=function(e,t,i){var n=new Date;this._logs.push({level:e,message:t,time:n,extras:i})},Object.defineProperty(e.prototype,"logs",{get:function(){return this._logs},enumerable:!1,configurable:!0}),e.prototype.flush=function(){if(this.logs.length>1){var e=this._logs.reduce(function(e,t){var i,n,r,s=(0,o.pi)((0,o.pi)({},t),{json:JSON.stringify(t.extras,null," "),extras:t.extras});delete s.time;var a=null!==(r=null===(n=t.time)||void 0===n?void 0:n.toISOString())&&void 0!==r?r:"";return e[a]&&(a="".concat(a,"-").concat(Math.random())),(0,o.pi)((0,o.pi)({},e),((i={})[a]=s,i))},{});console.table?console.table(e):console.log(e)}else this.logs.forEach(function(e){var t=e.level,i=e.message,n=e.extras;"info"===t||"debug"===t?console.log(i,null!=n?n:""):console[t](i,null!=n?n:"")});this._logs=[]},e}(),a=i(417),l=function(e){var t,i,n;this.retry=null===(t=e.retry)||void 0===t||t,this.type=null!==(i=e.type)&&void 0!==i?i:"plugin Error",this.reason=null!==(n=e.reason)&&void 0!==n?n:""},u=function(){function e(e,t,i,r){void 0===t&&(t=(0,n.v4)()),void 0===i&&(i=new a.i),void 0===r&&(r=new s),this.attempts=0,this.event=e,this._id=t,this.logger=r,this.stats=i}return e.system=function(){},e.prototype.isSame=function(e){return e.id===this.id},e.prototype.cancel=function(e){if(e)throw e;throw new l({reason:"Context Cancel"})},e.prototype.log=function(e,t,i){this.logger.log(e,t,i)},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),e.prototype.updateEvent=function(e,t){var i;if("integrations"===e.split(".")[0]){var n=e.split(".")[1];if(!1===(null===(i=this.event.integrations)||void 0===i?void 0:i[n]))return this.event}return(0,r.N)(this.event,e,t),this.event},e.prototype.failedDelivery=function(){return this._failedDelivery},e.prototype.setFailedDelivery=function(e){this._failedDelivery=e},e.prototype.logs=function(){return this.logger.logs},e.prototype.flush=function(){this.logger.flush(),this.stats.flush()},e.prototype.toJSON=function(){return{id:this._id,event:this.event,logs:this.logger.logs,metrics:this.stats.metrics}},e}()},3098:function(e,t,i){i.d(t,{M:function(){return o},Z:function(){return s}});var n=i(5163),r=i(7830),o="onRemoveFromFuture",s=function(e){function t(t,i,n){var r=e.call(this)||this;return r.future=[],r.maxAttempts=t,r.queue=i,r.seen=null!=n?n:{},r}return(0,n.ZT)(t,e),t.prototype.push=function(){for(var e=this,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=t.map(function(t){return!(e.updateAttempts(t)>e.maxAttempts||e.includes(t))&&(e.queue.push(t),!0)});return this.queue=this.queue.sort(function(t,i){return e.getAttempts(t)-e.getAttempts(i)}),n},t.prototype.pushWithBackoff=function(e){var t,i,n,r,s=this;if(0===this.getAttempts(e))return this.push(e)[0];var a=this.updateAttempts(e);return!(a>this.maxAttempts||this.includes(e))&&(setTimeout(function(){s.queue.push(e),s.future=s.future.filter(function(t){return t.id!==e.id}),s.emit(o)},(i=(t={attempt:a-1}).minTimeout,Math.min((Math.random()+1)*(void 0===i?500:i)*Math.pow(void 0===(n=t.factor)?2:n,t.attempt),void 0===(r=t.maxTimeout)?1/0:r))),this.future.push(e),!0)},t.prototype.getAttempts=function(e){var t;return null!==(t=this.seen[e.id])&&void 0!==t?t:0},t.prototype.updateAttempts=function(e){return this.seen[e.id]=this.getAttempts(e)+1,this.getAttempts(e)},t.prototype.includes=function(e){return this.queue.includes(e)||this.future.includes(e)||!!this.queue.find(function(t){return t.id===e.id})||!!this.future.find(function(t){return t.id===e.id})},t.prototype.pop=function(){return this.queue.shift()},Object.defineProperty(t.prototype,"length",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"todo",{get:function(){return this.queue.length+this.future.length},enumerable:!1,configurable:!0}),t}(r.Q)},6096:function(e,t,i){i.d(t,{a:function(){return o},z:function(){return s}});var n=i(5163),r=i(1494);function o(e,t){e.log("debug","plugin",{plugin:t.name});var i=(new Date).getTime(),o=t[e.event.type];return void 0===o?Promise.resolve(e):(function(e){return(0,n.mG)(this,void 0,void 0,function(){return(0,n.Jh)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,e()];case 1:return[2,t.sent()];case 2:return[2,Promise.reject(t.sent())];case 3:return[2]}})})})(function(){return o.apply(t,[e])}).then(function(e){var n=(new Date).getTime()-i;return e.stats.gauge("plugin_time",n,["plugin:".concat(t.name)]),e}).catch(function(i){if(i instanceof r.Y&&"middleware_cancellation"===i.type)throw i;return i instanceof r.Y?e.log("warn",i.type,{plugin:t.name,error:i}):(e.log("error","plugin Error",{plugin:t.name,error:i}),e.stats.increment("plugin_error",1,["plugin:".concat(t.name)])),i})}function s(e,t){return o(e,t).then(function(t){if(t instanceof r._)return t;e.log("debug","Context canceled"),e.stats.increment("context_canceled"),e.cancel(t)})}},417:function(e,t,i){i.d(t,{i:function(){return o},s:function(){return r}});var n=i(5163),r=function(){function e(){this.metrics=[]}return e.prototype.increment=function(e,t,i){void 0===t&&(t=1),this.metrics.push({metric:e,value:t,tags:null!=i?i:[],type:"counter",timestamp:Date.now()})},e.prototype.gauge=function(e,t,i){this.metrics.push({metric:e,value:t,tags:null!=i?i:[],type:"gauge",timestamp:Date.now()})},e.prototype.flush=function(){var e=this.metrics.map(function(e){return(0,n.pi)((0,n.pi)({},e),{tags:e.tags.join(",")})});console.table?console.table(e):console.log(e),this.metrics=[]},e.prototype.serialize=function(){return this.metrics.map(function(e){return{m:e.metric,v:e.value,t:e.tags,k:({gauge:"g",counter:"c"})[e.type],e:e.timestamp}})},e}(),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.ZT)(t,e),t.prototype.gauge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.increment=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.flush=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.serialize=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return[]},t}(r)},7595:function(e,t,i){function n(e){return"string"==typeof e}function r(e){return"number"==typeof e}function o(e){return"function"==typeof e}function s(e){return null!=e}function a(e){return"object"===Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}i.d(t,{Gg:function(){return s},HD:function(){return n},PO:function(){return a},hj:function(){return r},mf:function(){return o}})},7848:function(e,t,i){i.d(t,{d:function(){return n}});var n=function(){var e,t,i=!1,n=new Promise(function(n,r){e=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i=!0,n.apply(void 0,e)},t=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i=!0,r.apply(void 0,e)}});return{resolve:e,reject:t,promise:n,isSettled:function(){return i}}}},7830:function(e,t,i){i.d(t,{Q:function(){return n}});var n=function(){function e(e){var t;this.callbacks={},this.warned=!1,this.maxListeners=null!==(t=null==e?void 0:e.maxListeners)&&void 0!==t?t:10}return e.prototype.warnIfPossibleMemoryLeak=function(e){this.warned||this.maxListeners&&this.callbacks[e].length>this.maxListeners&&(console.warn("Event Emitter: Possible memory leak detected; ".concat(String(e)," has exceeded ").concat(this.maxListeners," listeners.")),this.warned=!0)},e.prototype.on=function(e,t){return this.callbacks[e]?(this.callbacks[e].push(t),this.warnIfPossibleMemoryLeak(e)):this.callbacks[e]=[t],this},e.prototype.once=function(e,t){var i=this,n=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];i.off(e,n),t.apply(i,r)};return this.on(e,n),this},e.prototype.off=function(e,t){var i,n=(null!==(i=this.callbacks[e])&&void 0!==i?i:[]).filter(function(e){return e!==t});return this.callbacks[e]=n,this},e.prototype.emit=function(e){for(var t,i=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return(null!==(t=this.callbacks[e])&&void 0!==t?t:[]).forEach(function(e){e.apply(i,n)}),this},e}()},7831:function(e,t,i){i.d(t,{v4:function(){return s}});for(var n,r=256,o=[];r--;)o[r]=(r+256).toString(16).substring(1);function s(){var e,t=0,i="";if(!n||r+16>256){for(n=Array(t=256);t--;)n[t]=256*Math.random()|0;t=r=0}for(;t<16;t++)e=n[r+t],i+=6==t?o[15&e|64]:8==t?o[63&e|128]:o[e],1&t&&t>1&&t<11&&(i+="-");return r++,i}},380:function(e,t,i){function n(e,t,i){t.split&&(t=t.split("."));for(var n,r,o=0,s=t.length,a=e;o<s&&"__proto__"!==(r=t[o++])&&"constructor"!==r&&"prototype"!==r;)a=a[r]=o===s?i:typeof(n=a[r])==typeof t?n:0*t[o]!=0||~(""+t[o]).indexOf(".")?{}:[]}i.d(t,{N:function(){return n}})}},f={};function v(e){var t=f[e];if(void 0!==t)return t.exports;var i=f[e]={exports:{}};return h[e].call(i.exports,i,i.exports,v),i.exports}v.m=h,v.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return v.d(t,{a:t}),t},r=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},v.t=function(e,t){if(1&t&&(e=this(e)),8&t||"object"==typeof e&&e&&(4&t&&e.__esModule||16&t&&"function"==typeof e.then))return e;var i=Object.create(null);v.r(i);var o={};n=n||[null,r({}),r([]),r(r)];for(var s=2&t&&e;"object"==typeof s&&!~n.indexOf(s);s=r(s))Object.getOwnPropertyNames(s).forEach(function(t){o[t]=function(){return e[t]}});return o.default=function(){return e},v.d(i,o),i},v.d=function(e,t){for(var i in t)v.o(t,i)&&!v.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},v.f={},v.e=function(e){return Promise.all(Object.keys(v.f).reduce(function(t,i){return v.f[i](e,t),t},[]))},v.u=function(e){return(({96:"queryString",119:"auto-track",150:"legacyVideos",214:"remoteMiddleware",464:"ajs-destination",493:"schemaFilter",604:"tsub-middleware"})[e]||e)+".bundle."+({96:"5949e6e86feb5312385b",119:"a9d7db192bb0f8beb329",150:"611314fd74bde9f21947",214:"366df96a78421ccf3f3e",464:"ed53a26b6edc80c65d73",493:"5c2661f67b4b71a6d9bd",604:"77315eced46c5ae4c052",799:"3370767d4bbb423fe139",870:"6e2976b75e60ab2b2bf8"})[e]+".js"},v.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o={},p="@segment/analytics-next:",v.l=function(e,t,i,n){if(o[e])o[e].push(t);else{if(void 0!==i)for(var r,s,a=document.getElementsByTagName("script"),l=0;l<a.length;l++){var u=a[l];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==p+i){r=u;break}}r||(s=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,v.nc&&r.setAttribute("nonce",v.nc),r.setAttribute("data-webpack",p+i),r.src=e),o[e]=[t];var c=function(t,i){r.onerror=r.onload=null,clearTimeout(d);var n=o[e];if(delete o[e],r.parentNode&&r.parentNode.removeChild(r),n&&n.forEach(function(e){return e(i)}),t)return t(i)},d=setTimeout(c.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=c.bind(null,r.onerror),r.onload=c.bind(null,r.onload),s&&document.head.appendChild(r)}},v.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},v.p="",e={610:0},v.f.j=function(t,i){var n=v.o(e,t)?e[t]:void 0;if(0!==n){if(n)i.push(n[2]);else{var r=new Promise(function(i,r){n=e[t]=[i,r]});i.push(n[2]=r);var o=v.p+v.u(t),s=Error();v.l(o,function(i){if(v.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var r=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.src;s.message="Loading chunk "+t+" failed.\n("+r+": "+o+")",s.name="ChunkLoadError",s.type=r,s.request=o,n[1](s)}},"chunk-"+t,t)}}},t=function(t,i){var n,r,o=i[0],s=i[1],a=i[2],l=0;if(o.some(function(t){return 0!==e[t]})){for(n in s)v.o(s,n)&&(v.m[n]=s[n]);a&&a(v)}for(t&&t(i);l<o.length;l++)r=o[l],v.o(e,r)&&e[r]&&e[r][0](),e[r]=0},(i=self.webpackChunk_segment_analytics_next=self.webpackChunk_segment_analytics_next||[]).forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i));var m={};(function(){v.r(m);var e,t,i,n,r,o,s=v(5163),u=v(7566),c=v(6175);function d(){return void 0!==a&&a.env?a.env:{}}var p=v(4759),h=v(7595);function f(e,t,i,n){var r,o=[e,t,i,n],s=(0,h.PO)(e)?e.event:e;if(!s||!(0,h.HD)(s))throw Error("Event missing");var a=(0,h.PO)(e)?null!==(r=e.properties)&&void 0!==r?r:{}:(0,h.PO)(t)?t:{},l={};return(0,h.mf)(i)||(l=null!=i?i:{}),(0,h.PO)(e)&&!(0,h.mf)(t)&&(l=null!=t?t:{}),[s,a,l,o.find(h.mf)]}function y(e,t,i,n,r){var o,s,a=null,l=null,u=[e,t,i,n,r],c=u.filter(h.HD);void 0!==c[0]&&void 0!==c[1]&&(a=c[0],l=c[1]),1===c.length&&(a=null,l=c[0]);var d=u.find(h.mf),p=u.filter(function(e){return null===l?(0,h.PO)(e):(0,h.PO)(e)||null===e}),f=null!==(o=p[0])&&void 0!==o?o:{},v=null!==(s=p[1])&&void 0!==s?s:{};return[a,l,f,v,d]}var g=function(e){return function(){for(var t,i,n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];for(var s={},a=["callback","options","traits","id"],l=0;l<r.length;l++){var u=r[l],c=a.pop();if("id"===c){if((0,h.HD)(u)||(0,h.hj)(u)){s.id=u.toString();continue}if(null==u)continue;c=a.pop()}if(("traits"===c||"options"===c)&&(null==u||(0,h.PO)(u))&&(s[c]=u),(0,h.mf)(u)){s.callback=u;break}}return[null!==(t=s.id)&&void 0!==t?t:e.id(),null!==(i=s.traits)&&void 0!==i?i:{},null!==(n=s.options)&&void 0!==n?n:{},s.callback]}};function b(e,t,i,n){(0,h.hj)(e)&&(e=e.toString()),(0,h.hj)(t)&&(t=t.toString());var r=[e,t,i,n],o=r.filter(h.HD),s=o[0],a=void 0===s?e:s,l=o[1],u=r.filter(h.PO)[0];return[a,void 0===l?null:l,void 0===u?{}:u,r.find(h.mf)]}var w=v(94),_=v(8404),k=v(888),S=v(7830),C=v(7831),I=function(e,t,i,n,r,o){return{__t:"bpc",c:t,p:n,u:e,s:i,t:r,r:o}},P=Object.keys(I("","","","","","")),E=function(e){var t,i=e.c,n=e.p,r=e.s,o=e.u,s=e.r,a=e.t,l=i?function(e){try{return new URL(e).pathname}catch(t){return"/"===e[0]?e:"/"+e}}(i):n,u=i?i.indexOf("?")>-1?i:i+r:-1===(t=o.indexOf("#"))?o:o.slice(0,t);return{path:l,referrer:s,search:r,title:a,url:u}},T=function(){var e=document.querySelector("link[rel='canonical']");return I(location.href,e&&e.getAttribute("href")||void 0,location.search,location.pathname,document.title,document.referrer)},x=function(e,t){void 0===t&&(t=E(T()));var i,n,r,o=e.context;"page"===e.type&&(i=e.properties&&(n=e.properties,r=Object.keys(t),Object.assign.apply(Object,(0,s.ev)([{}],r.map(function(e){var t;if(n&&Object.prototype.hasOwnProperty.call(n,e))return(t={})[e]=n[e],t}),!1))),e.properties=(0,s.pi)((0,s.pi)((0,s.pi)({},t),e.properties),e.name?{name:e.name}:{})),o.page=(0,s.pi)((0,s.pi)((0,s.pi)({},t),i),o.page)},A=v(380),O=function(e){function t(t,i){var n=e.call(this,"".concat(t," ").concat(i))||this;return n.field=t,n}return(0,s.ZT)(t,e),t}(Error),j="is not a string",M="is not an object",L=function(e){var t,i;this.settings=e,this.createMessageId=e.createMessageId,this.onEventMethodCall=null!==(t=e.onEventMethodCall)&&void 0!==t?t:function(){},this.onFinishedEvent=null!==(i=e.onFinishedEvent)&&void 0!==i?i:function(){}},R=function(e){function t(t){var i=e.call(this,{createMessageId:function(){return"ajs-next-".concat(Date.now(),"-").concat((0,C.v4)())},onEventMethodCall:function(e){var t=e.options;i.maybeUpdateAnonId(t)},onFinishedEvent:function(e){return i.addIdentity(e),e}})||this;return i.user=t,i}return(0,s.ZT)(t,e),t.prototype.maybeUpdateAnonId=function(e){(null==e?void 0:e.anonymousId)&&this.user.anonymousId(e.anonymousId)},t.prototype.addIdentity=function(e){this.user.id()&&(e.userId=this.user.id()),this.user.anonymousId()&&(e.anonymousId=this.user.anonymousId())},t.prototype.track=function(t,i,n,r,o){var s=e.prototype.track.call(this,t,i,n,r);return x(s,o),s},t.prototype.page=function(t,i,n,r,o,s){var a=e.prototype.page.call(this,t,i,n,r,o);return x(a,s),a},t.prototype.screen=function(t,i,n,r,o,s){var a=e.prototype.screen.call(this,t,i,n,r,o);return x(a,s),a},t.prototype.identify=function(t,i,n,r,o){var s=e.prototype.identify.call(this,t,i,n,r);return x(s,o),s},t.prototype.group=function(t,i,n,r,o){var s=e.prototype.group.call(this,t,i,n,r);return x(s,o),s},t.prototype.alias=function(t,i,n,r,o){var s=e.prototype.alias.call(this,t,i,n,r);return x(s,o),s},t}(function(){function e(e){this.settings=new L(e)}return e.prototype.track=function(e,t,i,n){return this.settings.onEventMethodCall({type:"track",options:i}),this.normalize((0,s.pi)((0,s.pi)({},this.baseEvent()),{event:e,type:"track",properties:null!=t?t:{},options:(0,s.pi)({},i),integrations:(0,s.pi)({},n)}))},e.prototype.page=function(e,t,i,n,r){this.settings.onEventMethodCall({type:"page",options:n});var o,a={type:"page",properties:(0,s.pi)({},i),options:(0,s.pi)({},n),integrations:(0,s.pi)({},r)};return null!==e&&(a.category=e,a.properties=null!==(o=a.properties)&&void 0!==o?o:{},a.properties.category=e),null!==t&&(a.name=t),this.normalize((0,s.pi)((0,s.pi)({},this.baseEvent()),a))},e.prototype.screen=function(e,t,i,n,r){this.settings.onEventMethodCall({type:"screen",options:n});var o={type:"screen",properties:(0,s.pi)({},i),options:(0,s.pi)({},n),integrations:(0,s.pi)({},r)};return null!==e&&(o.category=e),null!==t&&(o.name=t),this.normalize((0,s.pi)((0,s.pi)({},this.baseEvent()),o))},e.prototype.identify=function(e,t,i,n){return this.settings.onEventMethodCall({type:"identify",options:i}),this.normalize((0,s.pi)((0,s.pi)({},this.baseEvent()),{type:"identify",userId:e,traits:null!=t?t:{},options:(0,s.pi)({},i),integrations:n}))},e.prototype.group=function(e,t,i,n){return this.settings.onEventMethodCall({type:"group",options:i}),this.normalize((0,s.pi)((0,s.pi)({},this.baseEvent()),{type:"group",traits:null!=t?t:{},options:(0,s.pi)({},i),integrations:(0,s.pi)({},n),groupId:e}))},e.prototype.alias=function(e,t,i,n){this.settings.onEventMethodCall({type:"alias",options:i});var r={userId:e,type:"alias",options:(0,s.pi)({},i),integrations:(0,s.pi)({},n)};return null!==t&&(r.previousId=t),void 0===e?this.normalize((0,s.pi)((0,s.pi)({},r),this.baseEvent())):this.normalize((0,s.pi)((0,s.pi)({},this.baseEvent()),r))},e.prototype.baseEvent=function(){return{integrations:{},options:{}}},e.prototype.context=function(e){var t,i=["userId","anonymousId","timestamp","messageId"];delete e.integrations;var n=Object.keys(e),r=null!==(t=e.context)&&void 0!==t?t:{},o={};return n.forEach(function(t){"context"!==t&&(i.includes(t)?(0,A.N)(o,t,e[t]):(0,A.N)(r,t,e[t]))}),[r,o]},e.prototype.normalize=function(e){var t,i,n,r,o=Object.keys(null!==(t=e.integrations)&&void 0!==t?t:{}).reduce(function(t,i){var n,r;return(0,s.pi)((0,s.pi)({},t),((n={})[i]=!!(null===(r=e.integrations)||void 0===r?void 0:r[i]),n))},{});e.options=(n=e.options||{},r=function(e,t){return void 0!==t},Object.keys(n).filter(function(e){return r(e,n[e])}).reduce(function(e,t){return e[t]=n[t],e},{}));var a=(0,s.pi)((0,s.pi)({},o),null===(i=e.options)||void 0===i?void 0:i.integrations),l=e.options?this.context(e.options):[],u=l[0],c=l[1],d=e.options,p=(0,s._T)(e,["options"]),f=(0,s.pi)((0,s.pi)((0,s.pi)((0,s.pi)({timestamp:new Date},p),{context:u,integrations:a}),c),{messageId:d.messageId||this.settings.createMessageId()});return this.settings.onFinishedEvent(f),function(e){if(!(0,h.Gg)(e))throw new O("Event","is nil");if("object"!=typeof e)throw new O("Event",M)}(f),function(e){if(!(0,h.HD)(e.type))throw new O(".type",j)}(f),function(e){if(!(0,h.HD)(e.messageId))throw new O(".messageId",j)}(f),"track"===f.type&&(function(e){if(!(0,h.HD)(e.event))throw new O(".event",j)}(f),function(e){if(!(0,h.PO)(e.properties))throw new O(".properties",M)}(f)),["group","identify"].includes(f.type)&&function(e){if(!(0,h.PO)(e.traits))throw new O(".traits",M)}(f),f},e}()),F=function(e){return"addMiddleware"in e&&"destination"===e.type},D=v(3061),B=v(3098),q=v(1494),N=v(6096),U=function(e){function t(t){return e.call(this,"string"==typeof t?new D.$(4,t):t)||this}return(0,s.ZT)(t,e),t.prototype.flush=function(){return(0,s.mG)(this,void 0,Promise,function(){return(0,s.Jh)(this,function(t){return(0,w.s)()?[2,[]]:[2,e.prototype.flush.call(this)]})})},t}(function(e){function t(t){var i,n,r,o=e.call(this)||this;return o.criticalTasks=(r=0,{done:function(){return i},run:function(e){var t=e();return"object"==typeof t&&null!==t&&"then"in t&&"function"==typeof t.then&&(1==++r&&(i=new Promise(function(e){return n=e})),t.finally(function(){return 0==--r&&n()})),t}}),o.plugins=[],o.failedInitializations=[],o.flushing=!1,o.queue=t,o.queue.on(B.M,function(){o.scheduleFlush(0)}),o}return(0,s.ZT)(t,e),t.prototype.register=function(e,t,i){return(0,s.mG)(this,void 0,void 0,function(){var n,r,o=this;return(0,s.Jh)(this,function(s){switch(s.label){case 0:return this.plugins.push(t),n=function(i){o.failedInitializations.push(t.name),o.emit("initialization_failure",t),console.warn(t.name,i),e.log("warn","Failed to load destination",{plugin:t.name,error:i}),o.plugins=o.plugins.filter(function(e){return e!==t})},"destination"!==t.type||"Segment.io"===t.name?[3,1]:(t.load(e,i).catch(n),[3,4]);case 1:return s.trys.push([1,3,,4]),[4,t.load(e,i)];case 2:return s.sent(),[3,4];case 3:return r=s.sent(),n(r),[3,4];case 4:return[2]}})})},t.prototype.deregister=function(e,t,i){return(0,s.mG)(this,void 0,void 0,function(){var n;return(0,s.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),t.unload?[4,Promise.resolve(t.unload(e,i))]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.plugins=this.plugins.filter(function(e){return e.name!==t.name}),[3,4];case 3:return n=r.sent(),e.log("warn","Failed to unload destination",{plugin:t.name,error:n}),[3,4];case 4:return[2]}})})},t.prototype.dispatch=function(e){return(0,s.mG)(this,void 0,void 0,function(){var t;return(0,s.Jh)(this,function(i){return e.log("debug","Dispatching"),e.stats.increment("message_dispatched"),this.queue.push(e),t=this.subscribeToDelivery(e),this.scheduleFlush(0),[2,t]})})},t.prototype.subscribeToDelivery=function(e){return(0,s.mG)(this,void 0,void 0,function(){var t=this;return(0,s.Jh)(this,function(i){return[2,new Promise(function(i){var n=function(r,o){r.isSame(e)&&(t.off("flush",n),i(r))};t.on("flush",n)})]})})},t.prototype.dispatchSingle=function(e){return(0,s.mG)(this,void 0,void 0,function(){var t=this;return(0,s.Jh)(this,function(i){return e.log("debug","Dispatching"),e.stats.increment("message_dispatched"),this.queue.updateAttempts(e),e.attempts=1,[2,this.deliver(e).catch(function(i){return t.enqueuRetry(i,e)?t.subscribeToDelivery(e):(e.setFailedDelivery({reason:i}),e)})]})})},t.prototype.isEmpty=function(){return 0===this.queue.length},t.prototype.scheduleFlush=function(e){var t=this;void 0===e&&(e=500),this.flushing||(this.flushing=!0,setTimeout(function(){t.flush().then(function(){setTimeout(function(){t.flushing=!1,t.queue.length&&t.scheduleFlush(0)},0)})},e))},t.prototype.deliver=function(e){return(0,s.mG)(this,void 0,void 0,function(){var t,i,n,r;return(0,s.Jh)(this,function(o){switch(o.label){case 0:return[4,this.criticalTasks.done()];case 1:o.sent(),t=Date.now(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.flushOne(e)];case 3:return e=o.sent(),i=Date.now()-t,this.emit("delivery_success",e),e.stats.gauge("delivered",i),e.log("debug","Delivered",e.event),[2,e];case 4:throw r=n=o.sent(),e.log("error","Failed to deliver",r),this.emit("delivery_failure",e,r),e.stats.increment("delivery_failed"),n;case 5:return[2]}})})},t.prototype.enqueuRetry=function(e,t){return!(e instanceof q.Y&&!e.retry)&&this.queue.pushWithBackoff(t)},t.prototype.flush=function(){return(0,s.mG)(this,void 0,void 0,function(){var e,t;return(0,s.Jh)(this,function(i){switch(i.label){case 0:if(0===this.queue.length||!(e=this.queue.pop()))return[2,[]];e.attempts=this.queue.getAttempts(e),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.deliver(e)];case 2:return e=i.sent(),this.emit("flush",e,!0),[3,4];case 3:return t=i.sent(),this.enqueuRetry(t,e)||(e.setFailedDelivery({reason:t}),this.emit("flush",e,!1)),[2,[]];case 4:return[2,[e]]}})})},t.prototype.isReady=function(){return!0},t.prototype.availableExtensions=function(e){var t,i,n=(t="type",i={},this.plugins.filter(function(t){if("destination"!==t.type&&"Segment.io"!==t.name)return!0;var i,n,r,o=void 0;return null===(i=t.alternativeNames)||void 0===i||i.forEach(function(t){void 0!==e[t]&&(o=e[t])}),null!==(r=null!==(n=e[t.name])&&void 0!==n?n:o)&&void 0!==r?r:!1!==("Segment.io"===t.name||e.All)}).forEach(function(e){var n,r=void 0;if("string"==typeof t){var o=e[t];r="string"!=typeof o?JSON.stringify(o):o}else t instanceof Function&&(r=t(e));void 0!==r&&(i[r]=(0,s.ev)((0,s.ev)([],null!==(n=i[r])&&void 0!==n?n:[],!0),[e],!1))}),i),r=n.before,o=n.enrichment,a=n.destination,l=n.after;return{before:void 0===r?[]:r,enrichment:void 0===o?[]:o,destinations:void 0===a?[]:a,after:void 0===l?[]:l}},t.prototype.flushOne=function(e){var t,i;return(0,s.mG)(this,void 0,void 0,function(){var n,r,o,a,l,u,c,d,p,h,f,v,m;return(0,s.Jh)(this,function(s){switch(s.label){case 0:if(!this.isReady())throw Error("Not ready");e.attempts>1&&this.emit("delivery_retry",e),r=(n=this.availableExtensions(null!==(t=e.event.integrations)&&void 0!==t?t:{})).before,o=n.enrichment,a=0,l=r,s.label=1;case 1:return a<l.length?(u=l[a],[4,(0,N.z)(e,u)]):[3,4];case 2:(h=s.sent())instanceof q._&&(e=h),this.emit("message_enriched",e,u),s.label=3;case 3:return a++,[3,1];case 4:c=0,d=o,s.label=5;case 5:return c<d.length?(p=d[c],[4,(0,N.a)(e,p)]):[3,8];case 6:(h=s.sent())instanceof q._&&(e=h),this.emit("message_enriched",e,p),s.label=7;case 7:return c++,[3,5];case 8:return v=(f=this.availableExtensions(null!==(i=e.event.integrations)&&void 0!==i?i:{})).destinations,m=f.after,[4,new Promise(function(t,i){setTimeout(function(){Promise.all(v.map(function(t){return(0,N.a)(e,t)})).then(t).catch(i)},0)})];case 9:return s.sent(),e.stats.increment("message_delivered"),this.emit("message_delivered",e),[4,Promise.all(m.map(function(t){return(0,N.a)(e,t)}))];case 10:return s.sent(),[2,e]}})})},t}(S.Q));function G(e){for(var t=e.constructor.prototype,i=0,n=Object.getOwnPropertyNames(t);i<n.length;i++){var r=n[i];if("constructor"!==r){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,r);o&&"function"==typeof o.value&&(e[r]=e[r].bind(e))}}return e}var z={Cookie:"cookie",LocalStorage:"localStorage",Memory:"memory"},J=function(e,t,i,n){console.warn("".concat(e.constructor.name,": Can't ").concat(t,' key "').concat(i,'" | Err: ').concat(n))},V=function(){function e(e){this.stores=e}return e.prototype.get=function(e){for(var t=null,i=0,n=this.stores;i<n.length;i++){var r=n[i];try{if(null!=(t=r.get(e)))return t}catch(t){J(r,"get",e,t)}}return null},e.prototype.set=function(e,t){this.stores.forEach(function(i){try{i.set(e,t)}catch(t){J(i,"set",e,t)}})},e.prototype.clear=function(e){this.stores.forEach(function(t){try{t.remove(e)}catch(i){J(t,"remove",e,i)}})},e.prototype.getAndSync=function(e){var t=this.get(e),i="number"==typeof t?t.toString():t;return this.set(e,i),i},e}(),W=function(){function e(){this.cache={}}return e.prototype.get=function(e){var t;return null!==(t=this.cache[e])&&void 0!==t?t:null},e.prototype.set=function(e,t){this.cache[e]=t},e.prototype.remove=function(e){delete this.cache[e]},e}();function K(e){return e&&e.stores&&Array.isArray(e.stores)&&e.stores.every(function(e){return Object.values(z).includes(e)})}function H(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)e[n]=i[n]}return e}var Z=function e(t,i){function n(e,n,r){if("undefined"!=typeof document){"number"==typeof(r=H({},i,r)).expires&&(r.expires=new Date(Date.now()+864e5*r.expires)),r.expires&&(r.expires=r.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var s in r)r[s]&&(o+="; "+s,!0!==r[s]&&(o+="="+r[s].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+o}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var i=document.cookie?document.cookie.split("; "):[],n={},r=0;r<i.length;r++){var o=i[r].split("="),s=o.slice(1).join("=");try{var a=decodeURIComponent(o[0]);if(n[a]=t.read(s,a),e===a)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){n(e,"",H({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,H({},this.attributes,t))},withConverter:function(t){return e(H({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(i)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});function Y(e){var t=function(e){try{return new URL(e)}catch(e){return}}(e);if(t)for(var i=function(e){var t=e.hostname.split("."),i=t[t.length-1],n=[];if(4===t.length&&parseInt(i,10)>0||t.length<=1)return n;for(var r=t.length-2;r>=0;--r)n.push(t.slice(r).join("."));return n}(t),n=0;n<i.length;++n){var r="__tld__",o=i[n],s={domain:"."+o};try{if(Z.set(r,"1",s),Z.get(r))return Z.remove(r,s),o}catch(e){return}}}var Q=function(){function e(t){void 0===t&&(t=e.defaults),this.options=(0,s.pi)((0,s.pi)({},e.defaults),t)}return Object.defineProperty(e,"defaults",{get:function(){return{maxage:365,domain:Y(window.location.href),path:"/",sameSite:"Lax"}},enumerable:!1,configurable:!0}),e.prototype.opts=function(){return{sameSite:this.options.sameSite,expires:this.options.maxage,domain:this.options.domain,path:this.options.path,secure:this.options.secure}},e.prototype.get=function(e){var t;try{var i=Z.get(e);if(null==i)return null;try{return null!==(t=JSON.parse(i))&&void 0!==t?t:null}catch(e){return null!=i?i:null}}catch(e){return null}},e.prototype.set=function(e,t){"string"==typeof t?Z.set(e,t,this.opts()):null===t?Z.remove(e,this.opts()):Z.set(e,JSON.stringify(t),this.opts())},e.prototype.remove=function(e){return Z.remove(e,this.opts())},e}(),$=function(){function e(){}return e.prototype.localStorageWarning=function(e,t){console.warn("Unable to access ".concat(e,", localStorage may be ").concat(t))},e.prototype.get=function(e){var t;try{var i=localStorage.getItem(e);if(null===i)return null;try{return null!==(t=JSON.parse(i))&&void 0!==t?t:null}catch(e){return null!=i?i:null}}catch(t){return this.localStorageWarning(e,"unavailable"),null}},e.prototype.set=function(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(t){this.localStorageWarning(e,"full")}},e.prototype.remove=function(e){try{return localStorage.removeItem(e)}catch(t){this.localStorageWarning(e,"unavailable")}},e}();function X(e){return e.map(function(e){var t,i;switch("object"==typeof e&&void 0!==e.name?(t=e.name,i=e.settings):t=e,t){case z.Cookie:return new Q(i);case z.LocalStorage:return new $;case z.Memory:return new W;default:throw Error("Unknown Store Type: ".concat(e))}})}function ee(e,t){return e.map(function(e){return t&&e===z.Cookie?{name:e,settings:t}:e})}var et={persist:!0,cookie:{key:"ajs_user_id",oldKey:"ajs_user"},localStorage:{key:"ajs_user_traits"}},ei=function(){function e(e,t){void 0===e&&(e=et);var i,n,r,o,a=this;this.options={},this.id=function(e){if(a.options.disable)return null;var t=a.identityStore.getAndSync(a.idKey);void 0!==e&&(a.identityStore.set(a.idKey,e),e!==t&&null!==t&&null!==e&&a.anonymousId(null));var i=a.identityStore.getAndSync(a.idKey);if(i)return i;var n=a.legacyUserStore.get(et.cookie.oldKey);return n?"object"==typeof n?n.id:n:null},this.anonymousId=function(e){var t,i;if(a.options.disable)return null;if(void 0===e){var n=null!==(t=a.identityStore.getAndSync(a.anonKey))&&void 0!==t?t:null===(i=a.legacySIO())||void 0===i?void 0:i[0];if(n)return n}return null===e?a.identityStore.set(a.anonKey,null):a.identityStore.set(a.anonKey,null!=e?e:(0,C.v4)()),a.identityStore.getAndSync(a.anonKey)},this.traits=function(e){var t;if(!a.options.disable)return null===e&&(e={}),e&&a.traitsStore.set(a.traitsKey,null!=e?e:{}),null!==(t=a.traitsStore.get(a.traitsKey))&&void 0!==t?t:{}},this.options=(0,s.pi)((0,s.pi)({},et),e),this.cookieOptions=t,this.idKey=null!==(n=null===(i=e.cookie)||void 0===i?void 0:i.key)&&void 0!==n?n:et.cookie.key,this.traitsKey=null!==(o=null===(r=e.localStorage)||void 0===r?void 0:r.key)&&void 0!==o?o:et.localStorage.key,this.anonKey="ajs_anonymous_id",this.identityStore=this.createStorage(this.options,t),this.legacyUserStore=this.createStorage(this.options,t,function(e){return e===z.Cookie}),this.traitsStore=this.createStorage(this.options,t,function(e){return e!==z.Cookie});var l=this.legacyUserStore.get(et.cookie.oldKey);l&&"object"==typeof l&&(l.id&&this.id(l.id),l.traits&&this.traits(l.traits)),G(this)}return e.prototype.legacySIO=function(){var e=this.legacyUserStore.get("_sio");if(!e)return null;var t=e.split("----");return[t[0],t[1]]},e.prototype.identify=function(e,t){if(!this.options.disable){t=null!=t?t:{};var i=this.id();null!==i&&i!==e||(t=(0,s.pi)((0,s.pi)({},this.traits()),t)),e&&this.id(e),this.traits(t)}},e.prototype.logout=function(){this.anonymousId(null),this.id(null),this.traits({})},e.prototype.reset=function(){this.logout(),this.identityStore.clear(this.idKey),this.identityStore.clear(this.anonKey),this.traitsStore.clear(this.traitsKey)},e.prototype.load=function(){return new e(this.options,this.cookieOptions)},e.prototype.save=function(){return!0},e.prototype.createStorage=function(e,t,i){var n=[z.LocalStorage,z.Cookie,z.Memory];return e.disable?new V([]):e.persist?(void 0!==e.storage&&null!==e.storage&&K(e.storage)&&(n=e.storage.stores),e.localStorageFallbackDisabled&&(n=n.filter(function(e){return e!==z.LocalStorage})),i&&(n=n.filter(i)),new V(X(ee(n,t)))):new V([new W])},e.defaults=et,e}(),en={persist:!0,cookie:{key:"ajs_group_id"},localStorage:{key:"ajs_group_properties"}},er=function(e){function t(t,i){void 0===t&&(t=en);var n=e.call(this,(0,s.pi)((0,s.pi)({},en),t),i)||this;return n.anonymousId=function(e){},G(n),n}return(0,s.ZT)(t,e),t}(ei),eo=v(4278),es=v(3744),ea=v(6249),el=function(e,t,i){i.getCalls(e).forEach(function(e){ev(t,e).catch(console.error)})},eu=el.bind(void 0,"on"),ec=el.bind(void 0,"setAnonymousId"),ed=function(e){if(ep(e))return E(e.pop())},ep=function(e){return function(e){if(!(0,h.PO)(e)||"bpc"!==e.__t)return!1;for(var t in e)if(!P.includes(t))return!1;return!0}(e[e.length-1])},eh=function(e,t,i,n){void 0===i&&(i=function(){}),void 0===n&&(n=console.error),this.method=e,this.resolve=i,this.reject=n,this.called=!1,this.args=t},ef=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._callMap={},this.push.apply(this,e)}return Object.defineProperty(e.prototype,"calls",{get:function(){return this._pushSnippetWindowBuffer(),this._callMap},set:function(e){this._callMap=e},enumerable:!1,configurable:!0}),e.prototype.getCalls=function(e){var t;return null!==(t=this.calls[e])&&void 0!==t?t:[]},e.prototype.push=function(){for(var e=this,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];t.forEach(function(t){["track","screen","alias","group","page","identify"].includes(t.method)&&!ep(t.args)&&(t.args=(0,s.ev)((0,s.ev)([],t.args,!0),[T()],!1)),e.calls[t.method]?e.calls[t.method].push(t):e.calls[t.method]=[t]})},e.prototype.clear=function(){this._pushSnippetWindowBuffer(),this.calls={}},e.prototype.toArray=function(){var e;return(e=[]).concat.apply(e,Object.values(this.calls))},e.prototype._pushSnippetWindowBuffer=function(){var e=(0,ea.wI)();if(Array.isArray(e)){var t=e.splice(0,e.length).map(function(e){return new eh(e[0],e.slice(1))});this.push.apply(this,t)}},e}();function ev(e,t){return(0,s.mG)(this,void 0,Promise,function(){var i,n;return(0,s.Jh)(this,function(r){var o;switch(r.label){case 0:return r.trys.push([0,3,,4]),t.called?[2,void 0]:(t.called=!0,"object"==typeof(o=i=e[t.method].apply(e,t.args))&&null!==o&&"then"in o&&"function"==typeof o.then?[4,i]:[3,2]);case 1:r.sent(),r.label=2;case 2:return t.resolve(i),[3,4];case 3:return n=r.sent(),t.reject(n),[3,4];case 4:return[2]}})})}var em=function(){function e(e){var t=this;this.trackSubmit=this._createMethod("trackSubmit"),this.trackClick=this._createMethod("trackClick"),this.trackLink=this._createMethod("trackLink"),this.pageView=this._createMethod("pageview"),this.identify=this._createMethod("identify"),this.reset=this._createMethod("reset"),this.group=this._createMethod("group"),this.track=this._createMethod("track"),this.ready=this._createMethod("ready"),this.alias=this._createMethod("alias"),this.debug=this._createChainableMethod("debug"),this.page=this._createMethod("page"),this.once=this._createChainableMethod("once"),this.off=this._createChainableMethod("off"),this.on=this._createChainableMethod("on"),this.addSourceMiddleware=this._createMethod("addSourceMiddleware"),this.setAnonymousId=this._createMethod("setAnonymousId"),this.addDestinationMiddleware=this._createMethod("addDestinationMiddleware"),this.screen=this._createMethod("screen"),this.register=this._createMethod("register"),this.deregister=this._createMethod("deregister"),this.user=this._createMethod("user"),this.VERSION=eo.i,this._preInitBuffer=new ef,this._promise=e(this._preInitBuffer),this._promise.then(function(e){var i=e[0],n=e[1];t.instance=i,t.ctx=n}).catch(function(){})}return e.prototype.then=function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return(e=this._promise).then.apply(e,t)},e.prototype.catch=function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return(e=this._promise).catch.apply(e,t)},e.prototype.finally=function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return(e=this._promise).finally.apply(e,t)},e.prototype._createMethod=function(e){var t=this;return function(){for(var i,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.instance?Promise.resolve((i=t.instance)[e].apply(i,n)):new Promise(function(i,r){t._preInitBuffer.push(new eh(e,n,i,r))})}},e.prototype._createChainableMethod=function(e){var t=this;return function(){for(var i,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.instance?(i=t.instance)[e].apply(i,n):t._preInitBuffer.push(new eh(e,n)),t}},e}(),ey="This is being deprecated and will be not be available in future releases of Analytics JS",eg=(0,es.R)(),eb=null==eg?void 0:eg.analytics,ew=function(e){var t;this.timeout=300,this.writeKey=e.writeKey,this.cdnSettings=null!==(t=e.cdnSettings)&&void 0!==t?t:{integrations:{}}};function e_(){console.warn(ey)}var ek,eS=function(e){function t(t,i,n,r,o){var a,l,u,c,d,p,h=this;(h=e.call(this)||this)._debug=!1,h.initialized=!1,h.user=function(){return h._user},h.init=h.initialize.bind(h),h.log=e_,h.addIntegrationMiddleware=e_,h.listeners=e_,h.addEventListener=e_,h.removeAllListeners=e_,h.removeListener=e_,h.removeEventListener=e_,h.hasListeners=e_,h.add=e_,h.addIntegration=e_;var f=null==i?void 0:i.cookie,v=null!==(d=null==i?void 0:i.disableClientPersistence)&&void 0!==d&&d;h.settings=new ew(t),h.queue=null!=n?n:(a="".concat(t.writeKey,":event-queue"),void 0===(l=null==i?void 0:i.retryQueue)&&(l=!1),void 0===(u=v)&&(u=!1),c=l?10:1,new U(u?new B.Z(c,[]):new D.$(c,a)));var m=null==i?void 0:i.storage;return h._universalStorage=h.createStore(v,m,f),h._user=null!=r?r:new ei((0,s.pi)({persist:!v,storage:null==i?void 0:i.storage},null==i?void 0:i.user),f).load(),h._group=null!=o?o:new er((0,s.pi)({persist:!v,storage:null==i?void 0:i.storage},null==i?void 0:i.group),f).load(),h.eventFactory=new R(h._user),h.integrations=null!==(p=null==i?void 0:i.integrations)&&void 0!==p?p:{},h.options=null!=i?i:{},G(h),h}return(0,s.ZT)(t,e),t.prototype.createStore=function(e,t,i){return new V(e?[new W]:t&&K(t)?X(ee(t.stores,i)):X([z.LocalStorage,{name:z.Cookie,settings:i},z.Memory]))},Object.defineProperty(t.prototype,"storage",{get:function(){return this._universalStorage},enumerable:!1,configurable:!0}),t.prototype.track=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,s.mG)(this,void 0,Promise,function(){var t,i,n,r,o,a,l,u=this;return(0,s.Jh)(this,function(s){return t=ed(e),n=(i=f.apply(void 0,e))[0],r=i[1],o=i[2],a=i[3],l=this.eventFactory.track(n,r,o,this.integrations,t),[2,this._dispatch(l,a).then(function(e){return u.emit("track",n,e.event.properties,e.event.options),e})]})})},t.prototype.page=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,s.mG)(this,void 0,Promise,function(){var t,i,n,r,o,a,l,u,c=this;return(0,s.Jh)(this,function(s){return t=ed(e),n=(i=y.apply(void 0,e))[0],r=i[1],o=i[2],a=i[3],l=i[4],u=this.eventFactory.page(n,r,o,a,this.integrations,t),[2,this._dispatch(u,l).then(function(e){return c.emit("page",n,r,e.event.properties,e.event.options),e})]})})},t.prototype.identify=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,s.mG)(this,void 0,Promise,function(){var t,i,n,r,o,a,l,u=this;return(0,s.Jh)(this,function(s){return t=ed(e),n=(i=g(this._user).apply(void 0,e))[0],r=i[1],o=i[2],a=i[3],this._user.identify(n,r),l=this.eventFactory.identify(this._user.id(),this._user.traits(),o,this.integrations,t),[2,this._dispatch(l,a).then(function(e){return u.emit("identify",e.event.userId,e.event.traits,e.event.options),e})]})})},t.prototype.group=function(){for(var e=this,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=ed(t);if(0===t.length)return this._group;var r=g(this._group).apply(void 0,t),o=r[0],s=r[1],a=r[2],l=r[3];this._group.identify(o,s);var u=this._group.id(),c=this._group.traits(),d=this.eventFactory.group(u,c,a,this.integrations,n);return this._dispatch(d,l).then(function(t){return e.emit("group",t.event.groupId,t.event.traits,t.event.options),t})},t.prototype.alias=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,s.mG)(this,void 0,Promise,function(){var t,i,n,r,o,a,l,u=this;return(0,s.Jh)(this,function(s){return t=ed(e),n=(i=b.apply(void 0,e))[0],r=i[1],o=i[2],a=i[3],l=this.eventFactory.alias(n,r,o,this.integrations,t),[2,this._dispatch(l,a).then(function(e){return u.emit("alias",n,r,e.event.options),e})]})})},t.prototype.screen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,s.mG)(this,void 0,Promise,function(){var t,i,n,r,o,a,l,u,c=this;return(0,s.Jh)(this,function(s){return t=ed(e),n=(i=y.apply(void 0,e))[0],r=i[1],o=i[2],a=i[3],l=i[4],u=this.eventFactory.screen(n,r,o,a,this.integrations,t),[2,this._dispatch(u,l).then(function(e){return c.emit("screen",n,r,e.event.properties,e.event.options),e})]})})},t.prototype.trackClick=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,s.mG)(this,void 0,Promise,function(){var t;return(0,s.Jh)(this,function(i){switch(i.label){case 0:return[4,v.e(119).then(v.bind(v,1956))];case 1:return[2,(t=i.sent().link).call.apply(t,(0,s.ev)([this],e,!1))]}})})},t.prototype.trackLink=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,s.mG)(this,void 0,Promise,function(){var t;return(0,s.Jh)(this,function(i){switch(i.label){case 0:return[4,v.e(119).then(v.bind(v,1956))];case 1:return[2,(t=i.sent().link).call.apply(t,(0,s.ev)([this],e,!1))]}})})},t.prototype.trackSubmit=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,s.mG)(this,void 0,Promise,function(){var t;return(0,s.Jh)(this,function(i){switch(i.label){case 0:return[4,v.e(119).then(v.bind(v,1956))];case 1:return[2,(t=i.sent().form).call.apply(t,(0,s.ev)([this],e,!1))]}})})},t.prototype.trackForm=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,s.mG)(this,void 0,Promise,function(){var t;return(0,s.Jh)(this,function(i){switch(i.label){case 0:return[4,v.e(119).then(v.bind(v,1956))];case 1:return[2,(t=i.sent().form).call.apply(t,(0,s.ev)([this],e,!1))]}})})},t.prototype.register=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,s.mG)(this,void 0,Promise,function(){var t,i=this;return(0,s.Jh)(this,function(n){switch(n.label){case 0:return t=_._.system(),[4,Promise.all(e.map(function(e){return i.queue.register(t,e,i)}))];case 1:return n.sent(),[2,t]}})})},t.prototype.deregister=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,s.mG)(this,void 0,Promise,function(){var t,i=this;return(0,s.Jh)(this,function(n){switch(n.label){case 0:return t=_._.system(),[4,Promise.all(e.map(function(e){var n=i.queue.plugins.find(function(t){return t.name===e});if(n)return i.queue.deregister(t,n,i);t.log("warn","plugin ".concat(e," not found"))}))];case 1:return n.sent(),[2,t]}})})},t.prototype.debug=function(e){return!1===e&&localStorage.getItem("debug")&&localStorage.removeItem("debug"),this._debug=e,this},t.prototype.reset=function(){this._user.reset(),this._group.reset(),this.emit("reset")},t.prototype.timeout=function(e){this.settings.timeout=e},t.prototype._dispatch=function(e,t){return(0,s.mG)(this,void 0,Promise,function(){var i;return(0,s.Jh)(this,function(n){return i=new _._(e),(0,w.s)()&&!this.options.retryQueue?[2,i]:[2,function(e,t,i,n){return(0,s.mG)(this,void 0,void 0,function(){var r,o;return(0,s.Jh)(this,function(s){var a,l;switch(s.label){case 0:return i.emit("dispatch_start",e),r=Date.now(),t.isEmpty()?[4,t.dispatchSingle(e)]:[3,2];case 1:return o=s.sent(),[3,4];case 2:return[4,t.dispatch(e)];case 3:o=s.sent(),s.label=4;case 4:return(null==n?void 0:n.callback)?[4,(0,k.UI)(o,n.callback,(a=r,Math.max((null!=(l=n.timeout)?l:300)-(Date.now()-a),0)))]:[3,6];case 5:o=s.sent(),s.label=6;case 6:return(null==n?void 0:n.debug)&&o.flush(),[2,o]}})})}(i,this.queue,this,{callback:t,debug:this._debug,timeout:this.settings.timeout})]})})},t.prototype.addSourceMiddleware=function(e){return(0,s.mG)(this,void 0,Promise,function(){var t=this;return(0,s.Jh)(this,function(i){switch(i.label){case 0:return[4,this.queue.criticalTasks.run(function(){return(0,s.mG)(t,void 0,void 0,function(){var t,i,n;return(0,s.Jh)(this,function(r){switch(r.label){case 0:return[4,Promise.resolve().then(v.bind(v,6338))];case 1:return t=r.sent().sourceMiddlewarePlugin,i={},this.queue.plugins.forEach(function(e){if("destination"===e.type)return i[e.name]=!0}),n=t(e,i),[4,this.register(n)];case 2:return r.sent(),[2]}})})})];case 1:return i.sent(),[2,this]}})})},t.prototype.addDestinationMiddleware=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];return this.queue.plugins.filter(F).forEach(function(i){"*"!==e&&i.name.toLowerCase()!==e.toLowerCase()||i.addMiddleware.apply(i,t)}),Promise.resolve(this)},t.prototype.setAnonymousId=function(e){return this._user.anonymousId(e)},t.prototype.queryString=function(e){return(0,s.mG)(this,void 0,Promise,function(){return(0,s.Jh)(this,function(t){switch(t.label){case 0:return!1===this.options.useQueryString?[2,[]]:[4,v.e(96).then(v.bind(v,7473))];case 1:return[2,(0,t.sent().queryString)(this,e)]}})})},t.prototype.use=function(e){return e(this),this},t.prototype.ready=function(e){return void 0===e&&(e=function(e){return e}),(0,s.mG)(this,void 0,Promise,function(){return(0,s.Jh)(this,function(t){return[2,Promise.all(this.queue.plugins.map(function(e){return e.ready?e.ready():Promise.resolve()})).then(function(t){return e(t),t})]})})},t.prototype.noConflict=function(){return console.warn(ey),(0,ea.ql)(null!=eb?eb:this),this},t.prototype.normalize=function(e){return console.warn(ey),this.eventFactory.normalize(e)},Object.defineProperty(t.prototype,"failedInitializations",{get:function(){return console.warn(ey),this.queue.failedInitializations},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"VERSION",{get:function(){return eo.i},enumerable:!1,configurable:!0}),t.prototype.initialize=function(e,t){return(0,s.mG)(this,void 0,Promise,function(){return(0,s.Jh)(this,function(e){return console.warn(ey),[2,Promise.resolve(this)]})})},t.prototype.pageview=function(e){return(0,s.mG)(this,void 0,Promise,function(){return(0,s.Jh)(this,function(t){switch(t.label){case 0:return console.warn(ey),[4,this.page({path:e})];case 1:return t.sent(),[2,this]}})})},Object.defineProperty(t.prototype,"plugins",{get:function(){var e;return console.warn(ey),null!==(e=this._plugins)&&void 0!==e?e:{}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Integrations",{get:function(){return console.warn(ey),this.queue.plugins.filter(function(e){return"destination"===e.type}).reduce(function(e,t){var i="".concat(t.name.toLowerCase().replace(".","").split(" ").join("-"),"Integration"),n=window[i];if(!n)return e;var r=n.Integration;return r?e[t.name]=r:e[t.name]=n,e},{})},enumerable:!1,configurable:!0}),t.prototype.push=function(e){var t=e.shift();t&&!this[t]||this[t].apply(this,e)},t}(S.Q),eC=function(e){function t(){var t=e.call(this,{writeKey:""},{disableClientPersistence:!0})||this;return t.initialized=!0,t}return(0,s.ZT)(t,e),t}(eS),eI=v(5944),eP=v(7848),eE=v(6863),eT=new function(){var e=this;this.name="Page Enrichment",this.type="before",this.version="0.1.0",this.isLoaded=function(){return!0},this.load=function(t,i){return(0,s.mG)(e,void 0,void 0,function(){var e;return(0,s.Jh)(this,function(t){switch(t.label){case 0:this.instance=i,t.label=1;case 1:return t.trys.push([1,3,,4]),e=this,[4,function(e){return(0,s.mG)(this,void 0,Promise,function(){var t;return(0,s.Jh)(this,function(i){return(t=navigator.userAgentData)?e?[2,t.getHighEntropyValues(e).catch(function(){return t.toJSON()})]:[2,t.toJSON()]:[2,void 0]})})}(this.instance.options.highEntropyValuesClientHints)];case 2:return e.userAgentData=t.sent(),[3,4];case 3:return t.sent(),[3,4];case 4:return[2,Promise.resolve()]}})})},this.enrich=function(t){var i,n,r,o,a,l,u,d=t.event.context,p=d.page.search||"",h="object"==typeof p?function(e){try{var t=new URLSearchParams;return Object.entries(e).forEach(function(e){var i=e[0],n=e[1];Array.isArray(n)?n.forEach(function(e){return t.append(i,e)}):t.append(i,n)}),t.toString()}catch(e){return""}}(p):p;d.userAgent=navigator.userAgent,d.userAgentData=e.userAgentData;var f=navigator.userLanguage||navigator.language;void 0===d.locale&&void 0!==f&&(d.locale=f),null!==(l=d.library)&&void 0!==l||(d.library={name:"analytics.js",version:"".concat("web"===(0,c.B)()?"next":"npm:next","-").concat(eo.i)}),h&&!d.campaign&&(d.campaign=((i=h).startsWith("?")&&(i=i.substring(1)),(i=i.replace(/\?/g,"&")).split("&").reduce(function(e,t){var i=t.split("="),n=i[0],r=i[1];if(n.includes("utm_")&&n.length>4){var o=n.slice(4);"campaign"===o&&(o="name"),e[o]=(0,eE.a)(void 0===r?"":r)}return e},{})));var v=function(){var e=Z.get("_ga");if(e&&e.startsWith("amp"))return e}();v&&(d.amp={id:v}),o=(r=new V(null!==(u=e.instance.options.disableClientPersistence)&&void 0!==u&&u?[]:[new Q(function(){if(ek)return ek;var e=Y(window.location.href);return ek={expires:31536e6,secure:!1,path:"/"},e&&(ek.domain=e),ek}())])).get("s:context.referrer"),(a=null!==(n=function(e){var t={btid:"dataxu",urid:"millennial-media"};e.startsWith("?")&&(e=e.substring(1));for(var i=0,n=(e=e.replace(/\?/g,"&")).split("&");i<n.length;i++){var r=n[i].split("="),o=r[0],s=r[1];if(t[o])return{id:s,type:t[o]}}}(h))&&void 0!==n?n:o)&&(d&&(d.referrer=(0,s.pi)((0,s.pi)({},d.referrer),a)),r.set("s:context.referrer",a));try{d.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){}return t},this.track=this.enrich,this.identify=this.enrich,this.page=this.enrich,this.group=this.enrich,this.alias=this.enrich,this.screen=this.enrich},ex=v(7070),eA=v(6338),eO=v(98),ej=function(){function e(e,t){this.version="1.0.0",this.alternativeNames=[],this.loadPromise=(0,eP.d)(),this.middleware=[],this.alias=this._createMethod("alias"),this.group=this._createMethod("group"),this.identify=this._createMethod("identify"),this.page=this._createMethod("page"),this.screen=this._createMethod("screen"),this.track=this._createMethod("track"),this.action=t,this.name=e,this.type=t.type,this.alternativeNames.push(t.name)}return e.prototype.addMiddleware=function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];"destination"===this.type&&(e=this.middleware).push.apply(e,t)},e.prototype.transform=function(e){return(0,s.mG)(this,void 0,Promise,function(){var t;return(0,s.Jh)(this,function(i){switch(i.label){case 0:return[4,(0,eA.applyDestinationMiddleware)(this.name,e.event,this.middleware)];case 1:return null===(t=i.sent())&&e.cancel(new q.Y({retry:!1,reason:"dropped by destination middleware"})),[2,new _._(t)]}})})},e.prototype._createMethod=function(e){var t=this;return function(i){return(0,s.mG)(t,void 0,Promise,function(){var t,n;return(0,s.Jh)(this,function(r){switch(r.label){case 0:return this.action[e]?(t=i,"destination"!==this.type?[3,2]:[4,this.transform(i)]):[2,i];case 1:t=r.sent(),r.label=2;case 2:return r.trys.push([2,5,,6]),[4,this.ready()];case 3:if(!r.sent())throw Error("Something prevented the destination from getting ready");return(0,eO.z)(i,{integrationName:this.action.name,methodName:e,type:"action"}),[4,this.action[e](t)];case 4:return r.sent(),[3,6];case 5:throw n=r.sent(),(0,eO.z)(i,{integrationName:this.action.name,methodName:e,type:"action",didError:!0}),n;case 6:return[2,i]}})})}},e.prototype.isLoaded=function(){return this.action.isLoaded()},e.prototype.ready=function(){return(0,s.mG)(this,void 0,Promise,function(){return(0,s.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.loadPromise.promise];case 1:return e.sent(),[2,!0];case 2:return e.sent(),[2,!1];case 3:return[2]}})})},e.prototype.load=function(e,t){return(0,s.mG)(this,void 0,Promise,function(){var i,n,r,o;return(0,s.Jh)(this,function(s){switch(s.label){case 0:if(this.loadPromise.isSettled())return[2,this.loadPromise.promise];s.label=1;case 1:return s.trys.push([1,3,,4]),(0,eO.z)(e,{integrationName:this.action.name,methodName:"load",type:"action"}),i=this.action.load(e,t),r=(n=this.loadPromise).resolve,[4,i];case 2:return r.apply(n,[s.sent()]),[2,i];case 3:throw o=s.sent(),(0,eO.z)(e,{integrationName:this.action.name,methodName:"load",type:"action",didError:!0}),this.loadPromise.reject(o),o;case 4:return[2]}})})},e.prototype.unload=function(e,t){var i,n;return null===(n=(i=this.action).unload)||void 0===n?void 0:n.call(i,e,t)},e}(),eM=v(9950);function eL(e){return(encodeURI(JSON.stringify(e)).split(/%..|./).length-1)/1024}var eR=v(8044);function eF(e,t,i,n){var r=this;e||setTimeout(function(){return(0,s.mG)(r,void 0,void 0,function(){var e,r;return(0,s.Jh)(this,function(o){switch(o.label){case 0:return e=!0,[4,function(e,t){return(0,s.mG)(this,void 0,Promise,function(){var i,n=this;return(0,s.Jh)(this,function(r){switch(r.label){case 0:return i=[],(0,w.s)()?[2,t]:[4,(0,eR.x)(function(){return t.length>0&&!(0,w.s)()},function(){return(0,s.mG)(n,void 0,void 0,function(){var n;return(0,s.Jh)(this,function(r){switch(r.label){case 0:return(n=t.pop())?[4,(0,N.a)(n,e)]:[2];case 1:return r.sent() instanceof _._||i.push(n),[2]}})})})];case 1:return r.sent(),i.map(function(e){return t.pushWithBackoff(e)}),[2,t]}})})}(i,t)];case 1:return r=o.sent(),e=!1,t.todo>0&&n(e,r,i,n),[2]}})})},5e3*Math.random())}var eD,eB,eq=v(4328),eN=null!==(eD=(eB=(0,es.R)()).__SEGMENT_INSPECTOR__)&&void 0!==eD?eD:eB.__SEGMENT_INSPECTOR__={},eU=v(6218),eG=function(e){function t(){var t=this,i=(0,eP.d)(),n=i.promise,r=i.resolve;return(t=e.call(this,function(e){return n.then(function(t){return function(e,t,i){var n,r,o,a,c,h,f,m,y,g;return void 0===t&&(t={}),(0,s.mG)(this,void 0,Promise,function(){var b,k,S,C,I,P,E,T,x,A,O;return(0,s.Jh)(this,function(j){var M,L,R,F,q,N;switch(j.label){case 0:return!0===t.disable?[2,[new eC,_._.system()]]:(t.globalAnalyticsKey&&(0,ea.jV)(t.globalAnalyticsKey),e.cdnURL&&(0,u.UH)(e.cdnURL),t.initialPageview&&i.push(new eh("page",[])),null===(n=e.cdnSettings)||void 0===n?[3,1]:(k=n,[3,3]));case 1:return[4,(M=e.writeKey,R=null!=(L=e.cdnURL)?L:(0,u.Vl)(),(0,p.h)("".concat(R,"/projects/").concat(M,"/settings")).then(function(e){return e.ok?e.json():e.text().then(function(e){throw Error(e)})}).catch(function(e){throw console.error(e.message),e}))];case 2:k=j.sent(),j.label=3;case 3:return b=k,t.updateCDNSettings&&(b=t.updateCDNSettings(b)),"function"!=typeof t.disable?[3,5]:[4,t.disable(b)];case 4:if(j.sent())return[2,[new eC,_._.system()]];j.label=5;case 5:return S=null===(o=null===(r=b.integrations["Segment.io"])||void 0===r?void 0:r.retryQueue)||void 0===o||o,t=(0,s.pi)({retryQueue:S},t),F=C=new eS((0,s.pi)((0,s.pi)({},e),{cdnSettings:b}),t),null===(q=eN.attach)||void 0===q||q.call(eN,F),I=null!==(a=e.plugins)&&void 0!==a?a:[],P=null!==(c=e.classicIntegrations)&&void 0!==c?c:[],E=null===(h=t.integrations)||void 0===h?void 0:h["Segment.io"],eU.j.initRemoteMetrics((0,s.pi)((0,s.pi)({},b.metrics),{host:null!==(f=null==E?void 0:E.apiHost)&&void 0!==f?f:null===(m=b.metrics)||void 0===m?void 0:m.host,protocol:null==E?void 0:E.protocol})),ec(N=C,i),eu(N,i),[4,function(e,t,i,n,r,o){var a,c,h;return void 0===r&&(r=[]),(0,s.mG)(this,void 0,Promise,function(){var f,m,y,g,b,_,k,S,C,I,P,E,T,x,A=this;return(0,s.Jh)(this,function(O){switch(O.label){case 0:var j,M,L;return f=null==r?void 0:r.filter(function(e){return"object"==typeof e}),m=null==r?void 0:r.filter(function(e){return"function"==typeof e&&"string"==typeof e.pluginName}),"test"!==d().NODE_ENV&&(null!==(L=null===(M=null===(j=t.middlewareSettings)||void 0===j?void 0:j.routingRules)||void 0===M?void 0:M.length)&&void 0!==L?L:0)>0?[4,Promise.all([v.e(870),v.e(604)]).then(v.bind(v,669)).then(function(e){return e.tsubMiddleware(t.middlewareSettings.routingRules)})]:[3,2];case 1:return g=O.sent(),[3,3];case 2:g=void 0,O.label=3;case 3:return y=g,"test"!==d().NODE_ENV&&Object.keys(t.integrations).length>1||o.length>0?[4,v.e(464).then(v.bind(v,3162)).then(function(r){return r.ajsDestinations(e,t,i.integrations,n,y,o)})]:[3,5];case 4:return _=O.sent(),[3,6];case 5:_=[],O.label=6;case 6:return b=_,t.legacyVideoPluginsEnabled?[4,v.e(150).then(v.bind(v,9141)).then(function(e){return e.loadLegacyVideoPlugins(i)})]:[3,8];case 7:O.sent(),O.label=8;case 8:return(null===(a=n.plan)||void 0===a?void 0:a.track)?[4,v.e(493).then(v.bind(v,5081)).then(function(e){var i;return e.schemaFilter(null===(i=n.plan)||void 0===i?void 0:i.track,t)})]:[3,10];case 9:return S=O.sent(),[3,11];case 10:S=void 0,O.label=11;case 11:return k=S,C=(0,eI.o)(t,n),[4,(function(e,t,i,n,r,o){var a,c,d;return(0,s.mG)(this,void 0,Promise,function(){var p,h,f=this;return(0,s.Jh)(this,function(v){switch(v.label){case 0:return p=[],h=null!==(c=null===(a=e.middlewareSettings)||void 0===a?void 0:a.routingRules)&&void 0!==c?c:[],[4,Promise.all((null!==(d=e.remotePlugins)&&void 0!==d?d:[]).map(function(e){return(0,s.mG)(f,void 0,void 0,function(){var a,c,d,f,v;return(0,s.Jh)(this,function(m){switch(m.label){case 0:var y,g;if(y=t[e.creationName],g=t[e.name],!1===t.All&&!y&&!g||!1===y||!1===g)return[2];m.label=1;case 1:return m.trys.push([1,6,,7]),(c=null==o?void 0:o.find(function(t){return t.pluginName===e.name}))?[3,3]:[4,function(e,t){return(0,s.mG)(this,void 0,Promise,function(){var i,n,r,o,a;return(0,s.Jh)(this,function(s){switch(s.label){case 0:if(i=new RegExp("https://".concat(l,".(com|build|fm)")),n=(0,u.Vl)(),!t)return[3,6];o=(r=e.url.split("/"))[r.length-2],a=e.url.replace(o,btoa(o).replace(/=/g,"")),s.label=1;case 1:return s.trys.push([1,3,,5]),[4,(0,ex.v)(a.replace(i,n))];case 2:case 4:return s.sent(),[3,5];case 3:return s.sent(),[4,(0,ex.v)(e.url.replace(i,n))];case 5:return[3,8];case 6:return[4,(0,ex.v)(e.url.replace(i,n))];case 7:s.sent(),s.label=8;case 8:return"function"==typeof window[e.libraryName]?[2,window[e.libraryName]]:[2]}})})}(e,null==n?void 0:n.obfuscate)];case 2:c=m.sent(),m.label=3;case 3:return(a=c)?[4,a((0,s.pi)((0,s.pi)({},e.settings),i[e.name]))]:[3,5];case 4:(function(e){if(!Array.isArray(e))throw Error("Not a valid list of plugins");var t=["load","isLoaded","name","version","type"];e.forEach(function(e){t.forEach(function(t){var i;if(void 0===e[t])throw Error("Plugin: ".concat(null!==(i=e.name)&&void 0!==i?i:"unknown"," missing required function ").concat(t))})})})(f=Array.isArray(d=m.sent())?d:[d]),v=h.filter(function(t){return t.destinationName===e.creationName}),f.forEach(function(t){var i=new ej(e.creationName,t);v.length&&r&&i.addMiddleware(r),p.push(i)}),m.label=5;case 5:return[3,7];case 6:return console.warn("Failed to load Remote Plugin",m.sent()),[3,7];case 7:return[2]}})})}))];case 1:return v.sent(),[2,p.filter(Boolean)]}})})})(t,i.integrations,C,n,y,m).catch(function(){return[]})];case 12:return I=O.sent(),P=(0,s.ev)((0,s.ev)((0,s.ev)([eT],f,!0),b,!0),I,!0),k&&P.push(k),!1===(null===(c=n.integrations)||void 0===c?void 0:c.All)&&!n.integrations["Segment.io"]||n.integrations&&!1===n.integrations["Segment.io"]?[3,14]:(T=(E=P).push,[4,function(e,t,i){window.addEventListener("pagehide",function(){u.push.apply(u,Array.from(c)),c.clear()});var n,r,o,a,l=null!==(n=null==t?void 0:t.apiKey)&&void 0!==n?n:"",u=e.options.disableClientPersistence?new B.Z(e.queue.queue.maxAttempts,[]):new D.$(e.queue.queue.maxAttempts,"".concat(l,":dest-Segment.io")),c=new Set,d=null!==(r=null==t?void 0:t.apiHost)&&void 0!==r?r:eq.U,h=null!==(o=null==t?void 0:t.protocol)&&void 0!==o?o:"https",f="".concat(h,"://").concat(d),v=null==t?void 0:t.deliveryStrategy,m="batching"===(null==v?void 0:v.strategy)?function(e,t){var i,n,r,o,a,l=[],u=!1,c=null!==(i=null==t?void 0:t.size)&&void 0!==i?i:10,d=null!==(n=null==t?void 0:t.timeout)&&void 0!==n?n:5e3;function h(t){var i;if(0!==t.length){var n=null===(i=t[0])||void 0===i?void 0:i.writeKey,r=t.map(function(e){return e.sentAt,(0,s._T)(e,["sentAt"])});return(0,p.h)("https://".concat(e,"/b"),{keepalive:u,headers:{"Content-Type":"application/test"},method:"PUT",body:JSON.stringify({writeKey:n,batch:r,sentAt:(new Date).toISOString()})})}}function f(){return(0,s.mG)(this,void 0,Promise,function(){var e;return(0,s.Jh)(this,function(t){return l.length?(e=l,l=[],[2,h(e)]):[2]})})}return o=function(e){if((u=e)&&l.length){var t,i;Promise.all((t=[],i=0,l.forEach(function(e){eL(t[i])>=64&&i++,t[i]?t[i].push(e):t[i]=[e]}),t).map(h)).catch(console.error)}},a=!1,window.addEventListener("pagehide",function(){a||o(a=!0)}),document.addEventListener("visibilitychange",function(){if("hidden"==document.visibilityState){if(a)return;a=!0}else a=!1;o(a)}),{dispatch:function(e,t){return(0,s.mG)(this,void 0,Promise,function(){return(0,s.Jh)(this,function(e){return l.push(t),[2,l.length>=c||eL(l)>=450||u?f():void(r||(r=setTimeout(function(){r=void 0,f().catch(console.error)},d)))]})})}}}(d,v.config):(a=null==v?void 0:v.config,{dispatch:function(e,t){return(0,p.h)(e,{keepalive:null==a?void 0:a.keepalive,headers:{"Content-Type":"application/json"},method:"PUT",body:JSON.stringify(t)})}});function y(n){return(0,s.mG)(this,void 0,Promise,function(){var r,o;return(0,s.Jh)(this,function(a){var l,d,p,h,v,y;return(0,w.s)()?(u.push(n),eF(!1,u,g,eF),[2,n]):(c.add(n),r=n.event.type.charAt(0),o=(0,eM.D)(n.event).json(),"track"===n.event.type&&delete o.traits,"alias"===n.event.type&&(l=o,y=e.user(),l.previousId=null!==(h=null!==(p=null!==(d=l.previousId)&&void 0!==d?d:l.from)&&void 0!==p?p:y.id())&&void 0!==h?h:y.anonymousId(),l.userId=null!==(v=l.userId)&&void 0!==v?v:l.to,delete l.from,delete l.to,o=l),[2,m.dispatch("".concat(f,"/").concat(r),function(e,t,i,n){var r,o=e.user();delete t.options,t.writeKey=null==i?void 0:i.apiKey,t.userId=t.userId||o.id(),t.anonymousId=t.anonymousId||o.anonymousId(),t.sentAt=new Date;var a=e.queue.failedInitializations||[];a.length>0&&(t._metadata={failedInitializations:a});var l=[],u=[];for(var c in n){var d=n[c];"Segment.io"===c&&l.push(c),"bundled"===d.bundlingStatus&&l.push(c),"unbundled"===d.bundlingStatus&&u.push(c)}for(var p=0,h=(null==i?void 0:i.unbundledIntegrations)||[];p<h.length;p++){var f=h[p];u.includes(f)||u.push(f)}var v=null!==(r=null==i?void 0:i.maybeBundledConfigIds)&&void 0!==r?r:{},m=[];return l.sort().forEach(function(e){var t;(null!==(t=v[e])&&void 0!==t?t:[]).forEach(function(e){m.push(e)})}),!1!==(null==i?void 0:i.addBundledMetadata)&&(t._metadata=(0,s.pi)((0,s.pi)({},t._metadata),{bundled:l.sort(),unbundled:u.sort(),bundledIds:m})),t}(e,o,t,i)).then(function(){return n}).catch(function(){return u.pushWithBackoff(n),eF(!1,u,g,eF),n}).finally(function(){c.delete(n)})])})})}var g={name:"Segment.io",type:"destination",version:"0.1.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:y,identify:y,page:y,alias:y,group:y,screen:y};return u.todo&&eF(!1,u,g,eF),g}(i,C["Segment.io"],t.integrations)]);case 13:T.apply(E,[O.sent()]),O.label=14;case 14:return[4,i.register.apply(i,P)];case 15:return x=O.sent(),Object.entries(null!==(h=t.enabledMiddleware)&&void 0!==h?h:{}).some(function(e){return e[1]})?[4,v.e(214).then(v.bind(v,9568)).then(function(e){var r=e.remoteMiddlewares;return(0,s.mG)(A,void 0,void 0,function(){return(0,s.Jh)(this,function(e){switch(e.label){case 0:return[4,r(x,t,n.obfuscate)];case 1:return[2,Promise.all(e.sent().map(function(e){return i.addSourceMiddleware(e)}))]}})})})]:[3,17];case 16:O.sent(),O.label=17;case 17:return[2,x]}})})}(e.writeKey,b,C,t,I,P)];case 6:return T=j.sent(),x=null!==(y=window.location.search)&&void 0!==y?y:"",A=null!==(g=window.location.hash)&&void 0!==g?g:"",(O=x.length?x:A.replace(/(?=#).*(?=\?)/,"")).includes("ajs_")?[4,C.queryString(O).catch(console.error)]:[3,8];case 7:j.sent(),j.label=8;case 8:return C.initialized=!0,C.emit("initialize",e,t),[4,function(e,t){return(0,s.mG)(this,void 0,Promise,function(){return(0,s.Jh)(this,function(i){switch(i.label){case 0:return[4,(0,s.mG)(void 0,void 0,void 0,function(){var i,n;return(0,s.Jh)(this,function(r){switch(r.label){case 0:i=0,n=t.getCalls("addSourceMiddleware"),r.label=1;case 1:return i<n.length?[4,ev(e,n[i]).catch(console.error)]:[3,4];case 2:r.sent(),r.label=3;case 3:return i++,[3,1];case 4:return[2]}})})];case 1:return i.sent(),function(e,t){t.toArray().forEach(function(t){setTimeout(function(){ev(e,t).catch(console.error)},0)})}(e,t),t.clear(),[2]}})})}(C,i)];case 9:return j.sent(),[2,[C,T]]}})})}(t[0],t[1],e)})})||this)._resolveLoadStart=function(e,t){return r([e,t])},t}return(0,s.ZT)(t,e),t.prototype.load=function(e,t){return void 0===t&&(t={}),this._resolveLoadStart(e,t),this},t.load=function(e,i){return void 0===i&&(i={}),(new t).load(e,i)},t.standalone=function(e,i){return t.load({writeKey:e},i).then(function(e){return e[0]})},t}(em),ez=v(584);function eJ(){var e,t;return(0,s.mG)(this,void 0,Promise,function(){var i,n,r;return(0,s.Jh)(this,function(o){switch(o.label){case 0:return i=function(){if((0,ez.M)())return(0,ez.M)();var e,t,i=(0,ea.wI)();if(null==i?void 0:i._writeKey)return i._writeKey;for(var n=/http.*\/analytics\.js\/v1\/([^/]*)(\/platform)?\/analytics.*/,r=void 0,o=0,s=Array.prototype.slice.call(document.querySelectorAll("script"));o<s.length;o++){var a=null!==(e=s[o].getAttribute("src"))&&void 0!==e?e:"";if((t=n.exec(a))&&t[1]){r=t[1];break}}return!r&&document.currentScript&&(a=document.currentScript.src,(t=n.exec(a))&&t[1]&&(r=t[1])),r}(),n=null!==(t=null===(e=(0,ea.wI)())||void 0===e?void 0:e._loadOptions)&&void 0!==t?t:{},i?(r=ea.ql,[4,eG.standalone(i,n)]):(console.error("Failed to load Write Key. Make sure to use the latest version of the Segment snippet, which can be found in your source settings."),[2]);case 1:return r.apply(void 0,[o.sent()]),[2]}})})}var eV,eW=v(449),eK=(0,u.Vl)();(0,u.UH)(eK),v.p=eK?eK+"/analytics-next/bundles/":"https://cdn.segment.com/analytics-next/bundles/",(0,c.X)("web");var eH=!1,eZ=function(e){(new eW.B).increment("analytics_js.invoke.error",(0,s.ev)((0,s.ev)([],e,!0),["wk:".concat((0,ez.M)())],!1))};function eY(e){return(0,s.mG)(this,void 0,void 0,function(){var t;return(0,s.Jh)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,e()];case 1:return[2,i.sent()];case 2:return console.error("[analytics.js]","Failed to load Analytics.js",t=i.sent()),eZ((0,s.ev)(["type:initialization"],t instanceof Error?["message:".concat(null==t?void 0:t.message),"name:".concat(null==t?void 0:t.name)]:[],!0)),[3,3];case 3:return[2]}})})}document.addEventListener("securitypolicyviolation",function(e){var t;!eH&&"report"!==(t=e).disposition&&t.blockedURI.includes(l)&&(eH=!0,eZ(["type:csp"]),(function(){return(0,s.mG)(this,void 0,Promise,function(){var e;return(0,s.Jh)(this,function(t){switch(t.label){case 0:return console.warn("Your CSP policy is missing permissions required in order to run Analytics.js 2.0","https://segment.com/docs/connections/sources/catalog/libraries/website/javascript/upgrade-to-ajs2/#using-a-strict-content-security-policy-on-the-page"),console.warn("Reverting to Analytics.js 1.0"),e=(0,u.YM)(),[4,(0,ex.v)(e)];case 1:return t.sent(),[2]}})})})().catch(console.error))});var eQ=null===(eV=document.querySelector("script[data-global-segment-analytics-key]"))||void 0===eV?void 0:eV.dataset.globalSegmentAnalyticsKey;if(eQ&&(0,ea.jV)(eQ),e={Firefox:46,Edge:13},t=!!window.MSInputMethodContext&&!!document.documentMode,r=(n=(i=navigator.userAgent.split(" "))[i.length-1].split("/"))[0],o=n[1],t||void 0!==e[r]&&e[r]>=parseInt(o)){var e$=document.createElement("script");e$.setAttribute("src","https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/7.7.0/polyfill.min.js"),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){return document.body.appendChild(e$)}):document.body.appendChild(e$),e$.onload=function(){eY(eJ)}}else eY(eJ)})(),window.AnalyticsNext=m}()},this.track=(e,t)=>{this.initialized&&this.mixpanelClient.track(e,t)},this.segmentTrack=(e,t)=>{var i;(null===(i=window)||void 0===i?void 0:i.analytics)&&analytics.track(e,t)},this.logAudioActionEvent=(e,t,i,n,r,o)=>{v.segmentTrack(p.Vy.audioActionEvent,{isMobile:e,clipId:null==i?void 0:i.id,playlistId:o,isPublic:null==i?void 0:i.is_public,actionName:t,isUserSongOwner:(null==n?void 0:n.userId)!==void 0&&(null==n?void 0:n.userId)===(null==i?void 0:i.user_id),clickSourceUrl:r,userId:null==n?void 0:n.userId})},this.logAudioCreationEvent=(e,t,i,n,r)=>{v.segmentTrack(p.Vy.audioCreationEvent,{isMobile:e,continueClipId:i.continueClipId,reusePromptClipId:i.reusePromptClipId,actionName:t,clickSourceUrl:location.pathname,userId:n.userId,isCustomMode:!i.isSimple,hasLyrics:0!==i.lyrics.length,hasStyle:0!==i.style.length,hasTitle:0!==i.title.length,hasDescription:0!==i.description.length,isInstrumentalMode:i.instrumental,modelVersion:i.mv,isUserExtendSongOwner:(null==n?void 0:n.userId)!==void 0&&(null==n?void 0:n.userId)===i.continueClipUserId,isUserResusePromptSongOwner:(null==n?void 0:n.userId)!==void 0&&(null==n?void 0:n.userId)===i.reusePromptClipUserId,isGenerateLyircsUsed:i.isGenerateLyircsUsed,isRecommendStyleUsed:i.isRecommendStyleUsed,isContinueClipPublic:i.continueClipIsPublic,isReusePromptClipPublic:i.reusePromptClipIsPublic,...r})},this.identify=e=>{this.mixpanelClient&&(this.mixpanelClient.identify(e),this.identified=!0)},this.reset=()=>{if(this.initialized){var e;null===(e=this.mixpanelClient)||void 0===e||e.reset(),this.identified=!1}},this.updateUserProperty=e=>{this.mixpanelClient&&this.identified&&this.mixpanelClient.people.set(e)},this.incrementUserProperty=(e,t)=>{this.mixpanelClient&&this.identified&&this.mixpanelClient.people.increment(e,t)},this.mixpanelClient=r()}}let v=new f},92115:function(e,t,i){"use strict";i.d(t,{Fc:function(){return r},OF:function(){return o},Vy:function(){return n}});let n={clickedInspirationCard:"Inspiration Card Clicked",clickedCreateSongLoggedOut:"Logged out: Clicked Create Song",clickedCreateSong:"Create Song Clicked",songCreateResponseSuccess:"Song Successfully Created",songCreateResponseError:"Song Create Request Errored",audioPlayerBackwardClicked:"Audio Player: Backward Clicked",audioPlayerForwardClicked:"Audio Player: Forward Clicked",audioPlayerPlayClicked:"Audio Player: Play Clicked",audioPlayerPauseClicked:"Audio Player: Pause Clicked",audioPlayerWhileLoadingPlayClicked:"Audio Player: While Loading Play Clicked",trackingSongTimeElapsed:"Playbar: Tracking Song Time Elapsed",playbarSongStartedFromBeginning:"Playbar: Song Started From Beginning",playbarSongEndReached:"Playbar: Song End Reached",playbarErrorLogged:"Playbar: Error Logged",audioCreationEvent:"Audio-Creation-Event",audioActionEvent:"Audio-Action-Event",playlistActionEvent:"Playlist-Action-Event",artistActionEvent:"Artist-Action-Event",audioPlayerEvent:"Audio-Player-Event",accountActionEvent:"Account-Action-Event",linkClickEvent:"Link-Click-Event",searchEvent:"Search-Event",audioEditingEvent:"Audio-Editing-Event",generalEvent:"General-Event",recommendedStyleClick:"Click Recommended Style",songSearch:"Search: search for songs",extendSongBtnClick:"Click Extend Button",likeSongBtnClick:"Click Like Song Button",autoPlayBtnClick:"Click AutoPlay Button",reusePromptBtnClick:"Click Reuse Prompt Button",copyLinkBtnClick:"Click Copy Link Button",shareToBtnClick:"Click Share to Button",shareOnFackbookClick:"Click Share On Facebook Button",shareOnLinkedInClick:"Click Share On LinkedIn Button",shareOnRedditClick:"Click Share On Reddit Button",shareOnXClick:"Click Share On X Button",shareOnEmailClick:"Click Share On Email Button",followBtnClick:"Click Follow Button",playlistPageOpen:"Open Playlsit Page",audioUploadBanner:"AudioUploadBanner",tutorialClick:"Creation Music Creation Tutorial"},r={totalPlayTimeInSeconds:"User: Total Play Time in Seconds"},o={playNewSong:"PlayNewSong",songEnd:"SongEnd",autoRepeatPlaySong:"AutoRepeatPlaySong",playSong:"PlaySong",pauseSong:"PauseSong",seekProgressBarPauseSong:"SeekProgressBarPauseSong",seekProgressBarPlaySong:"SeekProgressBarPlaySong",backwardPauseSong:"BackwardPauseSong",backwardRepeatSong:"BackwardRepeatSong",forwardPausePreSong:"ForwardPausePreSong",createSong:"CreateSong",uploadSong:"UploadSong",useRecommendStyle:"UseRecommendStyle",likeSong:"LikeSong",undoLikeSong:"UndoLikeSong",dislikeSong:"DislikeSong",undoDislikeSong:"UndoDislikeSong",shareSongWithLink:"ShareSongWithLink",shareSongWithX:"ShareSongWithX",shareSongWithFacebook:"ShareSongWithFacebook",shareSongWithEmail:"ShareSongWithEmail",shareSongWithLinkedIn:"ShareSongWithLinkedIn",shareSongWithReddit:"ShareSongWithReddit",downloadMP3:"DownloadMP3",downloadWAV:"DownloadWAV",downloadVideo:"DownloadVideo",regenerateVideo:"RegenerateVideo",getStems:"GetStems",reportInappropriate:"ReportInappropriate",goToSongRadio:"GoToSongRadio",editTitle:"EditTitle",editLyrics:"EditLyrics",reusePrompt:"ReusePrompt",likePlaylist:"LikePlaylist",undoLikePlaylist:"UndoLikePlaylist",dislikePlaylist:"DislikePlaylist",undoDislikePlaylist:"UndoDislikePlaylist",sharePlaylistWithLink:"sharePlaylistWithLink",followArtist:"FollowArtist",unfollowArtist:"UnfollowArtist",shareArtistWithLink:"ShareArtistWithLink",clickSuggestion:"SuggestionClicked"}},55329:function(e,t,i){"use strict";i.d(t,{J1:function(){return l},dn:function(){return s},mR:function(){return a}});var n=i(1633);let r=n.Ff,o=n.SL;function s(e,t){e.GET("/api/generate/get_recommend_styles/").then(e=>{e.data&&(r=e.data.default_styles||n.Ff,o=e.data.co_existing_styles_dict||n.SL,t.setRecommendedStyles(a()))}).catch(e=>{console.error("Failed to fetch default styles:",e)})}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=r.length;for(let i=0;i<e;i++){let e=Math.floor(Math.random()*t)+i;t-=1,[r[i],r[e]]=[r[e],r[i]]}return r.slice(0,e)}function l(e,t){if(void 0==e||0==e.length)return a();let i=e.split(","),n=[];for(let e of i)e.trim() in o&&n.push(e.trim());if(n.length>8)return[];let r=new Map,s=Object.keys(o);for(let e of n){let t=o[e];if(void 0!==t){let i=s.indexOf(e);for(let[e,o]of(s.splice(i,1),Object.entries(t)))n.includes(e)||r.set(e,(r.get(e)||0)+o)}}if(0==r.size)return t;let l=[...r.entries()].sort((e,t)=>t[1]-e[1]),u=[],c=0,d=Math.min(5,l.length);for(let e=0;e<d;e++){u.push(l[e][0]);let i=s.indexOf(l[e][0]);s.splice(i,1),l[e][0]==t[e]&&(c+=1)}if(5==c)return t;let p=8-d;if(u.length>0)for(let e=0;e<p;e++){let e=Math.floor(Math.random()*s.length);u.push(s[e]),s.splice(e,1)}return u.length>0?u:t}},69548:function(e,t,i){"use strict";i.d(t,{Be:function(){return m},Hl:function(){return v},L7:function(){return o},M8:function(){return n},Nq:function(){return d},ST:function(){return a},_v:function(){return c},d:function(){return h},fm:function(){return f},jd:function(){return l},kl:function(){return u},lh:function(){return r},p6:function(){return s},q$:function(){return p}});let n=e=>{var t,i;return(null==e?void 0:e.title)||(null==e?void 0:null===(i=e.metadata)||void 0===i?void 0:null===(t=i.prompt)||void 0===t?void 0:t.replace(/\[.*?\]/g,"").trim().split("\n")[0].slice(0,40))||"Untitled"},r=e=>{if(!e||!/^\d+:\d+(\.\d+)?$/.test(e))return null;let t=e.split(":").reverse();if(2!=t.length)return null;let[i,n]=t,[r,o]=i.split(".").map(e=>parseFloat(e)),s=parseInt(n);return isNaN(r)||isNaN(s)?null:r+(o?o/10**o.toString().length:0)+60*s},o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e&&0!==e)return null;let i=Math.floor(e%60),n=Math.floor(e/60),r=(e%1).toFixed(t).slice(2);return 60===i&&(n++,i=0),n.toLocaleString("en-US",{minimumIntegerDigits:2})+":"+i.toLocaleString("en-US",{minimumIntegerDigits:2})+(t>0?".".concat(r):"")},s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short",timeZone:"America/New_York",...t}).format(e)},a=(e,t)=>new Date(e).toLocaleDateString(t,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"}),l="chirp-v3-5",u=50,c=12,d=e=>(e||[]).map(e=>({value:e,sort:Math.random()})).sort((e,t)=>e.sort-t.sort).map(e=>e.value),p=(e,t)=>Math.round(e/t)*t,h=(e,t)=>{var i;return(e.roles.pro||e.roles.staff)&&(null==t?void 0:null===(i=t.metadata)||void 0===i?void 0:i.type)!=="upload"},f=e=>e.charAt(0).toUpperCase()+e.slice(1),v=e=>e?e>=1e3&&e<1e4?(e/1e3).toFixed(1)+"K":e>=1e4&&e<1e6?(e/1e3).toFixed(0)+"K":e>=1e6?(e/1e6).toFixed(1)+"M":e:0,m=(e,t)=>void 0!==e?e:t}}]);